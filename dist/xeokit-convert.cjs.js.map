{"version":3,"file":"xeokit-convert.cjs.js","mappings":"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","sources":["webpack://convert2xkt/webpack/universalModuleDefinition","webpack://convert2xkt/webpack/bootstrap","webpack://convert2xkt/webpack/runtime/define property getters","webpack://convert2xkt/webpack/runtime/hasOwnProperty shorthand","webpack://convert2xkt/webpack/runtime/make namespace object","webpack://convert2xkt/external commonjs \"@loaders.gl/polyfills\"","webpack://convert2xkt/./src/XKT_INFO.js","webpack://convert2xkt/./src/lib/math.js","webpack://convert2xkt/./src/XKTModel/lib/geometryCompression.js","webpack://convert2xkt/./src/constants.js","webpack://convert2xkt/./src/XKTModel/lib/buildEdgeIndices.js","webpack://convert2xkt/./src/XKTModel/lib/isTriangleMeshSolid.js","webpack://convert2xkt/./src/XKTModel/XKTMesh.js","webpack://convert2xkt/./src/XKTModel/XKTGeometry.js","webpack://convert2xkt/./src/XKTModel/XKTEntity.js","webpack://convert2xkt/./src/XKTModel/XKTTile.js","webpack://convert2xkt/./src/XKTModel/KDNode.js","webpack://convert2xkt/./src/XKTModel/XKTMetaObject.js","webpack://convert2xkt/./src/XKTModel/XKTPropertySet.js","webpack://convert2xkt/./src/XKTModel/XKTTexture.js","webpack://convert2xkt/./src/XKTModel/XKTTextureSet.js","webpack://convert2xkt/external commonjs \"@loaders.gl/core\"","webpack://convert2xkt/external commonjs \"@loaders.gl/textures\"","webpack://convert2xkt/external commonjs \"@loaders.gl/images\"","webpack://convert2xkt/./src/XKTModel/XKTModel.js","webpack://convert2xkt/./src/lib/mergeVertices.js","webpack://convert2xkt/external commonjs \"pako\"","webpack://convert2xkt/./src/XKTModel/writeXKTModelToArrayBuffer.js","webpack://convert2xkt/./src/lib/earcut.js","webpack://convert2xkt/./src/parsers/parseCityJSONIntoXKTModel.js","webpack://convert2xkt/./src/XKTModel/lib/utils.js","webpack://convert2xkt/external commonjs \"@loaders.gl/gltf\"","webpack://convert2xkt/./src/parsers/parseGLTFIntoXKTModel.js","webpack://convert2xkt/./src/parsers/parseGLTFJSONIntoXKTModel.js","webpack://convert2xkt/./src/parsers/parseIFCIntoXKTModel.js","webpack://convert2xkt/external commonjs \"@loaders.gl/las\"","webpack://convert2xkt/./src/parsers/parseLASIntoXKTModel.js","webpack://convert2xkt/./src/parsers/parseMetaModelIntoXKTModel.js","webpack://convert2xkt/./src/parsers/parsePCDIntoXKTModel.js","webpack://convert2xkt/external commonjs \"@loaders.gl/ply\"","webpack://convert2xkt/./src/parsers/parsePLYIntoXKTModel.js","webpack://convert2xkt/./src/parsers/parseSTLIntoXKTModel.js","webpack://convert2xkt/./src/lib/faceToVertexNormals.js","webpack://convert2xkt/./src/geometryBuilders/buildBoxGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildBoxLinesGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildCylinderGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildGridGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildPlaneGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildSphereGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildTorusGeometry.js","webpack://convert2xkt/./src/geometryBuilders/buildVectorTextGeometry.js","webpack://convert2xkt/./src/convert2xkt_browser.js","webpack://convert2xkt/./src/XKTModel/lib/toArraybuffer.js","webpack://convert2xkt/./index.dist.node.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"convert2xkt\"] = factory();\n\telse\n\t\troot[\"convert2xkt\"] = factory();\n})(global, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/polyfills\");","/**\n * @desc Provides info on the XKT generated by xeokit-convert.\n */\nconst XKT_INFO = {\n\n    /**\n     * The XKT version generated by xeokit-convert.\n     *\n     * This is the XKT version that's modeled by {@link XKTModel}, serialized\n     * by {@link writeXKTModelToArrayBuffer}, and written by {@link convert2xkt}.\n     *\n     * * Current XKT version: **10**\n     * * [XKT format specs](https://github.com/xeokit/xeokit-convert/blob/main/specs/index.md)\n     *\n     * @property xktVersion\n     * @type {number}\n     */\n    xktVersion: 10\n};\n\nexport {XKT_INFO};","// Some temporary vars to help avoid garbage collection\n\nconst doublePrecision = true;\nconst FloatArrayType = doublePrecision ? Float64Array : Float32Array;\n\nconst tempMat1 = new FloatArrayType(16);\nconst tempMat2 = new FloatArrayType(16);\nconst tempVec4 = new FloatArrayType(4);\n\n/**\n * @private\n */\nconst math = {\n\n    MIN_DOUBLE: -Number.MAX_SAFE_INTEGER,\n    MAX_DOUBLE:  Number.MAX_SAFE_INTEGER,\n\n    /**\n     * The number of radiians in a degree (0.0174532925).\n     * @property DEGTORAD\n     * @type {Number}\n     */\n    DEGTORAD: 0.0174532925,\n\n    /**\n     * The number of degrees in a radian.\n     * @property RADTODEG\n     * @type {Number}\n     */\n    RADTODEG: 57.295779513,\n\n    /**\n     * Returns a new, uninitialized two-element vector.\n     * @method vec2\n     * @param [values] Initial values.\n     * @static\n     * @returns {Number[]}\n     */\n    vec2(values) {\n        return new FloatArrayType(values || 2);\n    },\n\n    /**\n     * Returns a new, uninitialized three-element vector.\n     * @method vec3\n     * @param [values] Initial values.\n     * @static\n     * @returns {Number[]}\n     */\n    vec3(values) {\n        return new FloatArrayType(values || 3);\n    },\n\n    /**\n     * Returns a new, uninitialized four-element vector.\n     * @method vec4\n     * @param [values] Initial values.\n     * @static\n     * @returns {Number[]}\n     */\n    vec4(values) {\n        return new FloatArrayType(values || 4);\n    },\n\n    /**\n     * Returns a new, uninitialized 3x3 matrix.\n     * @method mat3\n     * @param [values] Initial values.\n     * @static\n     * @returns {Number[]}\n     */\n    mat3(values) {\n        return new FloatArrayType(values || 9);\n    },\n\n    /**\n     * Converts a 3x3 matrix to 4x4\n     * @method mat3ToMat4\n     * @param mat3 3x3 matrix.\n     * @param mat4 4x4 matrix\n     * @static\n     * @returns {Number[]}\n     */\n    mat3ToMat4(mat3, mat4 = new FloatArrayType(16)) {\n        mat4[0] = mat3[0];\n        mat4[1] = mat3[1];\n        mat4[2] = mat3[2];\n        mat4[3] = 0;\n        mat4[4] = mat3[3];\n        mat4[5] = mat3[4];\n        mat4[6] = mat3[5];\n        mat4[7] = 0;\n        mat4[8] = mat3[6];\n        mat4[9] = mat3[7];\n        mat4[10] = mat3[8];\n        mat4[11] = 0;\n        mat4[12] = 0;\n        mat4[13] = 0;\n        mat4[14] = 0;\n        mat4[15] = 1;\n        return mat4;\n    },\n\n    /**\n     * Returns a new, uninitialized 4x4 matrix.\n     * @method mat4\n     * @param [values] Initial values.\n     * @static\n     * @returns {Number[]}\n     */\n    mat4(values) {\n        return new FloatArrayType(values || 16);\n    },\n\n    /**\n     * Converts a 4x4 matrix to 3x3\n     * @method mat4ToMat3\n     * @param mat4 4x4 matrix.\n     * @param mat3 3x3 matrix\n     * @static\n     * @returns {Number[]}\n     */\n    mat4ToMat3(mat4, mat3) { // TODO\n        //return new FloatArrayType(values || 9);\n    },\n\n    /**\n     * Returns a new UUID.\n     * @method createUUID\n     * @static\n     * @return string The new UUID\n     */\n    createUUID: ((() => {\n        const self = {};\n        const lut = [];\n        for (let i = 0; i < 256; i++) {\n            lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\n        }\n        return () => {\n            const d0 = Math.random() * 0xffffffff | 0;\n            const d1 = Math.random() * 0xffffffff | 0;\n            const d2 = Math.random() * 0xffffffff | 0;\n            const d3 = Math.random() * 0xffffffff | 0;\n            return `${lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff]}-${lut[d1 & 0xff]}${lut[d1 >> 8 & 0xff]}-${lut[d1 >> 16 & 0x0f | 0x40]}${lut[d1 >> 24 & 0xff]}-${lut[d2 & 0x3f | 0x80]}${lut[d2 >> 8 & 0xff]}-${lut[d2 >> 16 & 0xff]}${lut[d2 >> 24 & 0xff]}${lut[d3 & 0xff]}${lut[d3 >> 8 & 0xff]}${lut[d3 >> 16 & 0xff]}${lut[d3 >> 24 & 0xff]}`;\n        };\n    }))(),\n\n    /**\n     * Clamps a value to the given range.\n     * @param {Number} value Value to clamp.\n     * @param {Number} min Lower bound.\n     * @param {Number} max Upper bound.\n     * @returns {Number} Clamped result.\n     */\n    clamp(value, min, max) {\n        return Math.max(min, Math.min(max, value));\n    },\n\n    /**\n     * Floating-point modulus\n     * @method fmod\n     * @static\n     * @param {Number} a\n     * @param {Number} b\n     * @returns {*}\n     */\n    fmod(a, b) {\n        if (a < b) {\n            console.error(\"math.fmod : Attempting to find modulus within negative range - would be infinite loop - ignoring\");\n            return a;\n        }\n        while (b <= a) {\n            a -= b;\n        }\n        return a;\n    },\n\n    /**\n     * Negates a four-element vector.\n     * @method negateVec4\n     * @static\n     * @param {Array(Number)} v Vector to negate\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    negateVec4(v, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = -v[0];\n        dest[1] = -v[1];\n        dest[2] = -v[2];\n        dest[3] = -v[3];\n        return dest;\n    },\n\n    /**\n     * Adds one four-element vector to another.\n     * @method addVec4\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    addVec4(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] + v[0];\n        dest[1] = u[1] + v[1];\n        dest[2] = u[2] + v[2];\n        dest[3] = u[3] + v[3];\n        return dest;\n    },\n\n    /**\n     * Adds a scalar value to each element of a four-element vector.\n     * @method addVec4Scalar\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    addVec4Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] + s;\n        dest[1] = v[1] + s;\n        dest[2] = v[2] + s;\n        dest[3] = v[3] + s;\n        return dest;\n    },\n\n    /**\n     * Adds one three-element vector to another.\n     * @method addVec3\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    addVec3(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] + v[0];\n        dest[1] = u[1] + v[1];\n        dest[2] = u[2] + v[2];\n        return dest;\n    },\n\n    /**\n     * Adds a scalar value to each element of a three-element vector.\n     * @method addVec4Scalar\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    addVec3Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] + s;\n        dest[1] = v[1] + s;\n        dest[2] = v[2] + s;\n        return dest;\n    },\n\n    /**\n     * Subtracts one four-element vector from another.\n     * @method subVec4\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Vector to subtract\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    subVec4(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] - v[0];\n        dest[1] = u[1] - v[1];\n        dest[2] = u[2] - v[2];\n        dest[3] = u[3] - v[3];\n        return dest;\n    },\n\n    /**\n     * Subtracts one three-element vector from another.\n     * @method subVec3\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Vector to subtract\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    subVec3(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] - v[0];\n        dest[1] = u[1] - v[1];\n        dest[2] = u[2] - v[2];\n        return dest;\n    },\n\n    /**\n     * Subtracts one two-element vector from another.\n     * @method subVec2\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Vector to subtract\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    subVec2(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] - v[0];\n        dest[1] = u[1] - v[1];\n        return dest;\n    },\n\n    /**\n     * Subtracts a scalar value from each element of a four-element vector.\n     * @method subVec4Scalar\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    subVec4Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] - s;\n        dest[1] = v[1] - s;\n        dest[2] = v[2] - s;\n        dest[3] = v[3] - s;\n        return dest;\n    },\n\n    /**\n     * Sets each element of a 4-element vector to a scalar value minus the value of that element.\n     * @method subScalarVec4\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    subScalarVec4(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = s - v[0];\n        dest[1] = s - v[1];\n        dest[2] = s - v[2];\n        dest[3] = s - v[3];\n        return dest;\n    },\n\n    /**\n     * Multiplies one three-element vector by another.\n     * @method mulVec3\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    mulVec4(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] * v[0];\n        dest[1] = u[1] * v[1];\n        dest[2] = u[2] * v[2];\n        dest[3] = u[3] * v[3];\n        return dest;\n    },\n\n    /**\n     * Multiplies each element of a four-element vector by a scalar.\n     * @method mulVec34calar\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    mulVec4Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] * s;\n        dest[1] = v[1] * s;\n        dest[2] = v[2] * s;\n        dest[3] = v[3] * s;\n        return dest;\n    },\n\n    /**\n     * Multiplies each element of a three-element vector by a scalar.\n     * @method mulVec3Scalar\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    mulVec3Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] * s;\n        dest[1] = v[1] * s;\n        dest[2] = v[2] * s;\n        return dest;\n    },\n\n    /**\n     * Multiplies each element of a two-element vector by a scalar.\n     * @method mulVec2Scalar\n     * @static\n     * @param {Array(Number)} v The vector\n     * @param {Number} s The scalar\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, v otherwise\n     */\n    mulVec2Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] * s;\n        dest[1] = v[1] * s;\n        return dest;\n    },\n\n    /**\n     * Divides one three-element vector by another.\n     * @method divVec3\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    divVec3(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] / v[0];\n        dest[1] = u[1] / v[1];\n        dest[2] = u[2] / v[2];\n        return dest;\n    },\n\n    /**\n     * Divides one four-element vector by another.\n     * @method divVec4\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @param  {Array(Number)} [dest] Destination vector\n     * @return {Array(Number)} dest if specified, u otherwise\n     */\n    divVec4(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        dest[0] = u[0] / v[0];\n        dest[1] = u[1] / v[1];\n        dest[2] = u[2] / v[2];\n        dest[3] = u[3] / v[3];\n        return dest;\n    },\n\n    /**\n     * Divides a scalar by a three-element vector, returning a new vector.\n     * @method divScalarVec3\n     * @static\n     * @param v vec3\n     * @param s scalar\n     * @param dest vec3 - optional destination\n     * @return [] dest if specified, v otherwise\n     */\n    divScalarVec3(s, v, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = s / v[0];\n        dest[1] = s / v[1];\n        dest[2] = s / v[2];\n        return dest;\n    },\n\n    /**\n     * Divides a three-element vector by a scalar.\n     * @method divVec3Scalar\n     * @static\n     * @param v vec3\n     * @param s scalar\n     * @param dest vec3 - optional destination\n     * @return [] dest if specified, v otherwise\n     */\n    divVec3Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] / s;\n        dest[1] = v[1] / s;\n        dest[2] = v[2] / s;\n        return dest;\n    },\n\n    /**\n     * Divides a four-element vector by a scalar.\n     * @method divVec4Scalar\n     * @static\n     * @param v vec4\n     * @param s scalar\n     * @param dest vec4 - optional destination\n     * @return [] dest if specified, v otherwise\n     */\n    divVec4Scalar(v, s, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = v[0] / s;\n        dest[1] = v[1] / s;\n        dest[2] = v[2] / s;\n        dest[3] = v[3] / s;\n        return dest;\n    },\n\n\n    /**\n     * Divides a scalar by a four-element vector, returning a new vector.\n     * @method divScalarVec4\n     * @static\n     * @param s scalar\n     * @param v vec4\n     * @param dest vec4 - optional destination\n     * @return [] dest if specified, v otherwise\n     */\n    divScalarVec4(s, v, dest) {\n        if (!dest) {\n            dest = v;\n        }\n        dest[0] = s / v[0];\n        dest[1] = s / v[1];\n        dest[2] = s / v[2];\n        dest[3] = s / v[3];\n        return dest;\n    },\n\n    /**\n     * Returns the dot product of two four-element vectors.\n     * @method dotVec4\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @return The dot product\n     */\n    dotVec4(u, v) {\n        return (u[0] * v[0] + u[1] * v[1] + u[2] * v[2] + u[3] * v[3]);\n    },\n\n    /**\n     * Returns the cross product of two four-element vectors.\n     * @method cross3Vec4\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @return The cross product\n     */\n    cross3Vec4(u, v) {\n        const u0 = u[0];\n        const u1 = u[1];\n        const u2 = u[2];\n        const v0 = v[0];\n        const v1 = v[1];\n        const v2 = v[2];\n        return [\n            u1 * v2 - u2 * v1,\n            u2 * v0 - u0 * v2,\n            u0 * v1 - u1 * v0,\n            0.0];\n    },\n\n    /**\n     * Returns the cross product of two three-element vectors.\n     * @method cross3Vec3\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @return The cross product\n     */\n    cross3Vec3(u, v, dest) {\n        if (!dest) {\n            dest = u;\n        }\n        const x = u[0];\n        const y = u[1];\n        const z = u[2];\n        const x2 = v[0];\n        const y2 = v[1];\n        const z2 = v[2];\n        dest[0] = y * z2 - z * y2;\n        dest[1] = z * x2 - x * z2;\n        dest[2] = x * y2 - y * x2;\n        return dest;\n    },\n\n\n    sqLenVec4(v) { // TODO\n        return math.dotVec4(v, v);\n    },\n\n    /**\n     * Returns the length of a four-element vector.\n     * @method lenVec4\n     * @static\n     * @param {Array(Number)} v The vector\n     * @return The length\n     */\n    lenVec4(v) {\n        return Math.sqrt(math.sqLenVec4(v));\n    },\n\n    /**\n     * Returns the dot product of two three-element vectors.\n     * @method dotVec3\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @return The dot product\n     */\n    dotVec3(u, v) {\n        return (u[0] * v[0] + u[1] * v[1] + u[2] * v[2]);\n    },\n\n    /**\n     * Returns the dot product of two two-element vectors.\n     * @method dotVec4\n     * @static\n     * @param {Array(Number)} u First vector\n     * @param {Array(Number)} v Second vector\n     * @return The dot product\n     */\n    dotVec2(u, v) {\n        return (u[0] * v[0] + u[1] * v[1]);\n    },\n\n\n    sqLenVec3(v) {\n        return math.dotVec3(v, v);\n    },\n\n\n    sqLenVec2(v) {\n        return math.dotVec2(v, v);\n    },\n\n    /**\n     * Returns the length of a three-element vector.\n     * @method lenVec3\n     * @static\n     * @param {Array(Number)} v The vector\n     * @return The length\n     */\n    lenVec3(v) {\n        return Math.sqrt(math.sqLenVec3(v));\n    },\n\n    distVec3: ((() => {\n        const vec = new FloatArrayType(3);\n        return (v, w) => math.lenVec3(math.subVec3(v, w, vec));\n    }))(),\n\n    /**\n     * Returns the length of a two-element vector.\n     * @method lenVec2\n     * @static\n     * @param {Array(Number)} v The vector\n     * @return The length\n     */\n    lenVec2(v) {\n        return Math.sqrt(math.sqLenVec2(v));\n    },\n\n    distVec2: ((() => {\n        const vec = new FloatArrayType(2);\n        return (v, w) => math.lenVec2(math.subVec2(v, w, vec));\n    }))(),\n\n    /**\n     * @method rcpVec3\n     * @static\n     * @param v vec3\n     * @param dest vec3 - optional destination\n     * @return [] dest if specified, v otherwise\n     *\n     */\n    rcpVec3(v, dest) {\n        return math.divScalarVec3(1.0, v, dest);\n    },\n\n    /**\n     * Normalizes a four-element vector\n     * @method normalizeVec4\n     * @static\n     * @param v vec4\n     * @param dest vec4 - optional destination\n     * @return [] dest if specified, v otherwise\n     *\n     */\n    normalizeVec4(v, dest) {\n        const f = 1.0 / math.lenVec4(v);\n        return math.mulVec4Scalar(v, f, dest);\n    },\n\n    /**\n     * Normalizes a three-element vector\n     * @method normalizeVec4\n     * @static\n     */\n    normalizeVec3(v, dest) {\n        const f = 1.0 / math.lenVec3(v);\n        return math.mulVec3Scalar(v, f, dest);\n    },\n\n    /**\n     * Normalizes a two-element vector\n     * @method normalizeVec2\n     * @static\n     */\n    normalizeVec2(v, dest) {\n        const f = 1.0 / math.lenVec2(v);\n        return math.mulVec2Scalar(v, f, dest);\n    },\n\n    /**\n     * Gets the angle between two vectors\n     * @method angleVec3\n     * @param v\n     * @param w\n     * @returns {number}\n     */\n    angleVec3(v, w) {\n        let theta = math.dotVec3(v, w) / (Math.sqrt(math.sqLenVec3(v) * math.sqLenVec3(w)));\n        theta = theta < -1 ? -1 : (theta > 1 ? 1 : theta);  // Clamp to handle numerical problems\n        return Math.acos(theta);\n    },\n\n    /**\n     * Creates a three-element vector from the rotation part of a sixteen-element matrix.\n     * @param m\n     * @param dest\n     */\n    vec3FromMat4Scale: ((() => {\n\n        const tempVec3 = new FloatArrayType(3);\n\n        return (m, dest) => {\n\n            tempVec3[0] = m[0];\n            tempVec3[1] = m[1];\n            tempVec3[2] = m[2];\n\n            dest[0] = math.lenVec3(tempVec3);\n\n            tempVec3[0] = m[4];\n            tempVec3[1] = m[5];\n            tempVec3[2] = m[6];\n\n            dest[1] = math.lenVec3(tempVec3);\n\n            tempVec3[0] = m[8];\n            tempVec3[1] = m[9];\n            tempVec3[2] = m[10];\n\n            dest[2] = math.lenVec3(tempVec3);\n\n            return dest;\n        };\n    }))(),\n\n    /**\n     * Converts an n-element vector to a JSON-serializable\n     * array with values rounded to two decimal places.\n     */\n    vecToArray: ((() => {\n        function trunc(v) {\n            return Math.round(v * 100000) / 100000\n        }\n\n        return v => {\n            v = Array.prototype.slice.call(v);\n            for (let i = 0, len = v.length; i < len; i++) {\n                v[i] = trunc(v[i]);\n            }\n            return v;\n        };\n    }))(),\n\n    /**\n     * Converts a 3-element vector from an array to an object of the form ````{x:999, y:999, z:999}````.\n     * @param arr\n     * @returns {{x: *, y: *, z: *}}\n     */\n    xyzArrayToObject(arr) {\n        return {\"x\": arr[0], \"y\": arr[1], \"z\": arr[2]};\n    },\n\n    /**\n     * Converts a 3-element vector object of the form ````{x:999, y:999, z:999}```` to an array.\n     * @param xyz\n     * @param  [arry]\n     * @returns {*[]}\n     */\n    xyzObjectToArray(xyz, arry) {\n        arry = arry || new FloatArrayType(3);\n        arry[0] = xyz.x;\n        arry[1] = xyz.y;\n        arry[2] = xyz.z;\n        return arry;\n    },\n\n    /**\n     * Duplicates a 4x4 identity matrix.\n     * @method dupMat4\n     * @static\n     */\n    dupMat4(m) {\n        return m.slice(0, 16);\n    },\n\n    /**\n     * Extracts a 3x3 matrix from a 4x4 matrix.\n     * @method mat4To3\n     * @static\n     */\n    mat4To3(m) {\n        return [\n            m[0], m[1], m[2],\n            m[4], m[5], m[6],\n            m[8], m[9], m[10]\n        ];\n    },\n\n    /**\n     * Returns a 4x4 matrix with each element set to the given scalar value.\n     * @method m4s\n     * @static\n     */\n    m4s(s) {\n        return [\n            s, s, s, s,\n            s, s, s, s,\n            s, s, s, s,\n            s, s, s, s\n        ];\n    },\n\n    /**\n     * Returns a 4x4 matrix with each element set to zero.\n     * @method setMat4ToZeroes\n     * @static\n     */\n    setMat4ToZeroes() {\n        return math.m4s(0.0);\n    },\n\n    /**\n     * Returns a 4x4 matrix with each element set to 1.0.\n     * @method setMat4ToOnes\n     * @static\n     */\n    setMat4ToOnes() {\n        return math.m4s(1.0);\n    },\n\n    /**\n     * Returns a 4x4 matrix with each element set to 1.0.\n     * @method setMat4ToOnes\n     * @static\n     */\n    diagonalMat4v(v) {\n        return new FloatArrayType([\n            v[0], 0.0, 0.0, 0.0,\n            0.0, v[1], 0.0, 0.0,\n            0.0, 0.0, v[2], 0.0,\n            0.0, 0.0, 0.0, v[3]\n        ]);\n    },\n\n    /**\n     * Returns a 4x4 matrix with diagonal elements set to the given vector.\n     * @method diagonalMat4c\n     * @static\n     */\n    diagonalMat4c(x, y, z, w) {\n        return math.diagonalMat4v([x, y, z, w]);\n    },\n\n    /**\n     * Returns a 4x4 matrix with diagonal elements set to the given scalar.\n     * @method diagonalMat4s\n     * @static\n     */\n    diagonalMat4s(s) {\n        return math.diagonalMat4c(s, s, s, s);\n    },\n\n    /**\n     * Returns a 4x4 identity matrix.\n     * @method identityMat4\n     * @static\n     */\n    identityMat4(mat = new FloatArrayType(16)) {\n        mat[0] = 1.0;\n        mat[1] = 0.0;\n        mat[2] = 0.0;\n        mat[3] = 0.0;\n\n        mat[4] = 0.0;\n        mat[5] = 1.0;\n        mat[6] = 0.0;\n        mat[7] = 0.0;\n\n        mat[8] = 0.0;\n        mat[9] = 0.0;\n        mat[10] = 1.0;\n        mat[11] = 0.0;\n\n        mat[12] = 0.0;\n        mat[13] = 0.0;\n        mat[14] = 0.0;\n        mat[15] = 1.0;\n\n        return mat;\n    },\n\n    /**\n     * Returns a 3x3 identity matrix.\n     * @method identityMat3\n     * @static\n     */\n    identityMat3(mat = new FloatArrayType(9)) {\n        mat[0] = 1.0;\n        mat[1] = 0.0;\n        mat[2] = 0.0;\n\n        mat[3] = 0.0;\n        mat[4] = 1.0;\n        mat[5] = 0.0;\n\n        mat[6] = 0.0;\n        mat[7] = 0.0;\n        mat[8] = 1.0;\n\n        return mat;\n    },\n\n    /**\n     * Tests if the given 4x4 matrix is the identity matrix.\n     * @method isIdentityMat4\n     * @static\n     */\n    isIdentityMat4(m) {\n        if (m[0] !== 1.0 || m[1] !== 0.0 || m[2] !== 0.0 || m[3] !== 0.0 ||\n            m[4] !== 0.0 || m[5] !== 1.0 || m[6] !== 0.0 || m[7] !== 0.0 ||\n            m[8] !== 0.0 || m[9] !== 0.0 || m[10] !== 1.0 || m[11] !== 0.0 ||\n            m[12] !== 0.0 || m[13] !== 0.0 || m[14] !== 0.0 || m[15] !== 1.0) {\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Negates the given 4x4 matrix.\n     * @method negateMat4\n     * @static\n     */\n    negateMat4(m, dest) {\n        if (!dest) {\n            dest = m;\n        }\n        dest[0] = -m[0];\n        dest[1] = -m[1];\n        dest[2] = -m[2];\n        dest[3] = -m[3];\n        dest[4] = -m[4];\n        dest[5] = -m[5];\n        dest[6] = -m[6];\n        dest[7] = -m[7];\n        dest[8] = -m[8];\n        dest[9] = -m[9];\n        dest[10] = -m[10];\n        dest[11] = -m[11];\n        dest[12] = -m[12];\n        dest[13] = -m[13];\n        dest[14] = -m[14];\n        dest[15] = -m[15];\n        return dest;\n    },\n\n    /**\n     * Adds the given 4x4 matrices together.\n     * @method addMat4\n     * @static\n     */\n    addMat4(a, b, dest) {\n        if (!dest) {\n            dest = a;\n        }\n        dest[0] = a[0] + b[0];\n        dest[1] = a[1] + b[1];\n        dest[2] = a[2] + b[2];\n        dest[3] = a[3] + b[3];\n        dest[4] = a[4] + b[4];\n        dest[5] = a[5] + b[5];\n        dest[6] = a[6] + b[6];\n        dest[7] = a[7] + b[7];\n        dest[8] = a[8] + b[8];\n        dest[9] = a[9] + b[9];\n        dest[10] = a[10] + b[10];\n        dest[11] = a[11] + b[11];\n        dest[12] = a[12] + b[12];\n        dest[13] = a[13] + b[13];\n        dest[14] = a[14] + b[14];\n        dest[15] = a[15] + b[15];\n        return dest;\n    },\n\n    /**\n     * Adds the given scalar to each element of the given 4x4 matrix.\n     * @method addMat4Scalar\n     * @static\n     */\n    addMat4Scalar(m, s, dest) {\n        if (!dest) {\n            dest = m;\n        }\n        dest[0] = m[0] + s;\n        dest[1] = m[1] + s;\n        dest[2] = m[2] + s;\n        dest[3] = m[3] + s;\n        dest[4] = m[4] + s;\n        dest[5] = m[5] + s;\n        dest[6] = m[6] + s;\n        dest[7] = m[7] + s;\n        dest[8] = m[8] + s;\n        dest[9] = m[9] + s;\n        dest[10] = m[10] + s;\n        dest[11] = m[11] + s;\n        dest[12] = m[12] + s;\n        dest[13] = m[13] + s;\n        dest[14] = m[14] + s;\n        dest[15] = m[15] + s;\n        return dest;\n    },\n\n    /**\n     * Adds the given scalar to each element of the given 4x4 matrix.\n     * @method addScalarMat4\n     * @static\n     */\n    addScalarMat4(s, m, dest) {\n        return math.addMat4Scalar(m, s, dest);\n    },\n\n    /**\n     * Subtracts the second 4x4 matrix from the first.\n     * @method subMat4\n     * @static\n     */\n    subMat4(a, b, dest) {\n        if (!dest) {\n            dest = a;\n        }\n        dest[0] = a[0] - b[0];\n        dest[1] = a[1] - b[1];\n        dest[2] = a[2] - b[2];\n        dest[3] = a[3] - b[3];\n        dest[4] = a[4] - b[4];\n        dest[5] = a[5] - b[5];\n        dest[6] = a[6] - b[6];\n        dest[7] = a[7] - b[7];\n        dest[8] = a[8] - b[8];\n        dest[9] = a[9] - b[9];\n        dest[10] = a[10] - b[10];\n        dest[11] = a[11] - b[11];\n        dest[12] = a[12] - b[12];\n        dest[13] = a[13] - b[13];\n        dest[14] = a[14] - b[14];\n        dest[15] = a[15] - b[15];\n        return dest;\n    },\n\n    /**\n     * Subtracts the given scalar from each element of the given 4x4 matrix.\n     * @method subMat4Scalar\n     * @static\n     */\n    subMat4Scalar(m, s, dest) {\n        if (!dest) {\n            dest = m;\n        }\n        dest[0] = m[0] - s;\n        dest[1] = m[1] - s;\n        dest[2] = m[2] - s;\n        dest[3] = m[3] - s;\n        dest[4] = m[4] - s;\n        dest[5] = m[5] - s;\n        dest[6] = m[6] - s;\n        dest[7] = m[7] - s;\n        dest[8] = m[8] - s;\n        dest[9] = m[9] - s;\n        dest[10] = m[10] - s;\n        dest[11] = m[11] - s;\n        dest[12] = m[12] - s;\n        dest[13] = m[13] - s;\n        dest[14] = m[14] - s;\n        dest[15] = m[15] - s;\n        return dest;\n    },\n\n    /**\n     * Subtracts the given scalar from each element of the given 4x4 matrix.\n     * @method subScalarMat4\n     * @static\n     */\n    subScalarMat4(s, m, dest) {\n        if (!dest) {\n            dest = m;\n        }\n        dest[0] = s - m[0];\n        dest[1] = s - m[1];\n        dest[2] = s - m[2];\n        dest[3] = s - m[3];\n        dest[4] = s - m[4];\n        dest[5] = s - m[5];\n        dest[6] = s - m[6];\n        dest[7] = s - m[7];\n        dest[8] = s - m[8];\n        dest[9] = s - m[9];\n        dest[10] = s - m[10];\n        dest[11] = s - m[11];\n        dest[12] = s - m[12];\n        dest[13] = s - m[13];\n        dest[14] = s - m[14];\n        dest[15] = s - m[15];\n        return dest;\n    },\n\n    /**\n     * Multiplies the two given 4x4 matrix by each other.\n     * @method mulMat4\n     * @static\n     */\n    mulMat4(a, b, dest) {\n        if (!dest) {\n            dest = a;\n        }\n\n        // Cache the matrix values (makes for huge speed increases!)\n        const a00 = a[0];\n\n        const a01 = a[1];\n        const a02 = a[2];\n        const a03 = a[3];\n        const a10 = a[4];\n        const a11 = a[5];\n        const a12 = a[6];\n        const a13 = a[7];\n        const a20 = a[8];\n        const a21 = a[9];\n        const a22 = a[10];\n        const a23 = a[11];\n        const a30 = a[12];\n        const a31 = a[13];\n        const a32 = a[14];\n        const a33 = a[15];\n        const b00 = b[0];\n        const b01 = b[1];\n        const b02 = b[2];\n        const b03 = b[3];\n        const b10 = b[4];\n        const b11 = b[5];\n        const b12 = b[6];\n        const b13 = b[7];\n        const b20 = b[8];\n        const b21 = b[9];\n        const b22 = b[10];\n        const b23 = b[11];\n        const b30 = b[12];\n        const b31 = b[13];\n        const b32 = b[14];\n        const b33 = b[15];\n\n        dest[0] = b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30;\n        dest[1] = b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31;\n        dest[2] = b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32;\n        dest[3] = b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33;\n        dest[4] = b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30;\n        dest[5] = b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31;\n        dest[6] = b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32;\n        dest[7] = b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33;\n        dest[8] = b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30;\n        dest[9] = b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31;\n        dest[10] = b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32;\n        dest[11] = b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33;\n        dest[12] = b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30;\n        dest[13] = b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31;\n        dest[14] = b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32;\n        dest[15] = b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33;\n\n        return dest;\n    },\n\n    /**\n     * Multiplies the two given 3x3 matrices by each other.\n     * @method mulMat4\n     * @static\n     */\n    mulMat3(a, b, dest) {\n        if (!dest) {\n            dest = new FloatArrayType(9);\n        }\n\n        const a11 = a[0];\n        const a12 = a[3];\n        const a13 = a[6];\n        const a21 = a[1];\n        const a22 = a[4];\n        const a23 = a[7];\n        const a31 = a[2];\n        const a32 = a[5];\n        const a33 = a[8];\n        const b11 = b[0];\n        const b12 = b[3];\n        const b13 = b[6];\n        const b21 = b[1];\n        const b22 = b[4];\n        const b23 = b[7];\n        const b31 = b[2];\n        const b32 = b[5];\n        const b33 = b[8];\n\n        dest[0] = a11 * b11 + a12 * b21 + a13 * b31;\n        dest[3] = a11 * b12 + a12 * b22 + a13 * b32;\n        dest[6] = a11 * b13 + a12 * b23 + a13 * b33;\n\n        dest[1] = a21 * b11 + a22 * b21 + a23 * b31;\n        dest[4] = a21 * b12 + a22 * b22 + a23 * b32;\n        dest[7] = a21 * b13 + a22 * b23 + a23 * b33;\n\n        dest[2] = a31 * b11 + a32 * b21 + a33 * b31;\n        dest[5] = a31 * b12 + a32 * b22 + a33 * b32;\n        dest[8] = a31 * b13 + a32 * b23 + a33 * b33;\n\n        return dest;\n    },\n\n    /**\n     * Multiplies each element of the given 4x4 matrix by the given scalar.\n     * @method mulMat4Scalar\n     * @static\n     */\n    mulMat4Scalar(m, s, dest) {\n        if (!dest) {\n            dest = m;\n        }\n        dest[0] = m[0] * s;\n        dest[1] = m[1] * s;\n        dest[2] = m[2] * s;\n        dest[3] = m[3] * s;\n        dest[4] = m[4] * s;\n        dest[5] = m[5] * s;\n        dest[6] = m[6] * s;\n        dest[7] = m[7] * s;\n        dest[8] = m[8] * s;\n        dest[9] = m[9] * s;\n        dest[10] = m[10] * s;\n        dest[11] = m[11] * s;\n        dest[12] = m[12] * s;\n        dest[13] = m[13] * s;\n        dest[14] = m[14] * s;\n        dest[15] = m[15] * s;\n        return dest;\n    },\n\n    /**\n     * Multiplies the given 4x4 matrix by the given four-element vector.\n     * @method mulMat4v4\n     * @static\n     */\n    mulMat4v4(m, v, dest = math.vec4()) {\n        const v0 = v[0];\n        const v1 = v[1];\n        const v2 = v[2];\n        const v3 = v[3];\n        dest[0] = m[0] * v0 + m[4] * v1 + m[8] * v2 + m[12] * v3;\n        dest[1] = m[1] * v0 + m[5] * v1 + m[9] * v2 + m[13] * v3;\n        dest[2] = m[2] * v0 + m[6] * v1 + m[10] * v2 + m[14] * v3;\n        dest[3] = m[3] * v0 + m[7] * v1 + m[11] * v2 + m[15] * v3;\n        return dest;\n    },\n\n    /**\n     * Transposes the given 4x4 matrix.\n     * @method transposeMat4\n     * @static\n     */\n    transposeMat4(mat, dest) {\n        // If we are transposing ourselves we can skip a few steps but have to cache some values\n        const m4 = mat[4];\n\n        const m14 = mat[14];\n        const m8 = mat[8];\n        const m13 = mat[13];\n        const m12 = mat[12];\n        const m9 = mat[9];\n        if (!dest || mat === dest) {\n            const a01 = mat[1];\n            const a02 = mat[2];\n            const a03 = mat[3];\n            const a12 = mat[6];\n            const a13 = mat[7];\n            const a23 = mat[11];\n            mat[1] = m4;\n            mat[2] = m8;\n            mat[3] = m12;\n            mat[4] = a01;\n            mat[6] = m9;\n            mat[7] = m13;\n            mat[8] = a02;\n            mat[9] = a12;\n            mat[11] = m14;\n            mat[12] = a03;\n            mat[13] = a13;\n            mat[14] = a23;\n            return mat;\n        }\n        dest[0] = mat[0];\n        dest[1] = m4;\n        dest[2] = m8;\n        dest[3] = m12;\n        dest[4] = mat[1];\n        dest[5] = mat[5];\n        dest[6] = m9;\n        dest[7] = m13;\n        dest[8] = mat[2];\n        dest[9] = mat[6];\n        dest[10] = mat[10];\n        dest[11] = m14;\n        dest[12] = mat[3];\n        dest[13] = mat[7];\n        dest[14] = mat[11];\n        dest[15] = mat[15];\n        return dest;\n    },\n\n    /**\n     * Transposes the given 3x3 matrix.\n     *\n     * @method transposeMat3\n     * @static\n     */\n    transposeMat3(mat, dest) {\n        if (dest === mat) {\n            const a01 = mat[1];\n            const a02 = mat[2];\n            const a12 = mat[5];\n            dest[1] = mat[3];\n            dest[2] = mat[6];\n            dest[3] = a01;\n            dest[5] = mat[7];\n            dest[6] = a02;\n            dest[7] = a12;\n        } else {\n            dest[0] = mat[0];\n            dest[1] = mat[3];\n            dest[2] = mat[6];\n            dest[3] = mat[1];\n            dest[4] = mat[4];\n            dest[5] = mat[7];\n            dest[6] = mat[2];\n            dest[7] = mat[5];\n            dest[8] = mat[8];\n        }\n        return dest;\n    },\n\n    /**\n     * Returns the determinant of the given 4x4 matrix.\n     * @method determinantMat4\n     * @static\n     */\n    determinantMat4(mat) {\n        // Cache the matrix values (makes for huge speed increases!)\n        const a00 = mat[0];\n\n        const a01 = mat[1];\n        const a02 = mat[2];\n        const a03 = mat[3];\n        const a10 = mat[4];\n        const a11 = mat[5];\n        const a12 = mat[6];\n        const a13 = mat[7];\n        const a20 = mat[8];\n        const a21 = mat[9];\n        const a22 = mat[10];\n        const a23 = mat[11];\n        const a30 = mat[12];\n        const a31 = mat[13];\n        const a32 = mat[14];\n        const a33 = mat[15];\n        return a30 * a21 * a12 * a03 - a20 * a31 * a12 * a03 - a30 * a11 * a22 * a03 + a10 * a31 * a22 * a03 +\n            a20 * a11 * a32 * a03 - a10 * a21 * a32 * a03 - a30 * a21 * a02 * a13 + a20 * a31 * a02 * a13 +\n            a30 * a01 * a22 * a13 - a00 * a31 * a22 * a13 - a20 * a01 * a32 * a13 + a00 * a21 * a32 * a13 +\n            a30 * a11 * a02 * a23 - a10 * a31 * a02 * a23 - a30 * a01 * a12 * a23 + a00 * a31 * a12 * a23 +\n            a10 * a01 * a32 * a23 - a00 * a11 * a32 * a23 - a20 * a11 * a02 * a33 + a10 * a21 * a02 * a33 +\n            a20 * a01 * a12 * a33 - a00 * a21 * a12 * a33 - a10 * a01 * a22 * a33 + a00 * a11 * a22 * a33;\n    },\n\n    /**\n     * Returns the inverse of the given 4x4 matrix.\n     * @method inverseMat4\n     * @static\n     */\n    inverseMat4(mat, dest) {\n        if (!dest) {\n            dest = mat;\n        }\n\n        // Cache the matrix values (makes for huge speed increases!)\n        const a00 = mat[0];\n\n        const a01 = mat[1];\n        const a02 = mat[2];\n        const a03 = mat[3];\n        const a10 = mat[4];\n        const a11 = mat[5];\n        const a12 = mat[6];\n        const a13 = mat[7];\n        const a20 = mat[8];\n        const a21 = mat[9];\n        const a22 = mat[10];\n        const a23 = mat[11];\n        const a30 = mat[12];\n        const a31 = mat[13];\n        const a32 = mat[14];\n        const a33 = mat[15];\n        const b00 = a00 * a11 - a01 * a10;\n        const b01 = a00 * a12 - a02 * a10;\n        const b02 = a00 * a13 - a03 * a10;\n        const b03 = a01 * a12 - a02 * a11;\n        const b04 = a01 * a13 - a03 * a11;\n        const b05 = a02 * a13 - a03 * a12;\n        const b06 = a20 * a31 - a21 * a30;\n        const b07 = a20 * a32 - a22 * a30;\n        const b08 = a20 * a33 - a23 * a30;\n        const b09 = a21 * a32 - a22 * a31;\n        const b10 = a21 * a33 - a23 * a31;\n        const b11 = a22 * a33 - a23 * a32;\n\n        // Calculate the determinant (inlined to avoid double-caching)\n        const invDet = 1 / (b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06);\n\n        dest[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;\n        dest[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;\n        dest[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;\n        dest[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;\n        dest[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;\n        dest[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;\n        dest[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;\n        dest[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;\n        dest[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;\n        dest[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;\n        dest[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;\n        dest[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;\n        dest[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;\n        dest[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;\n        dest[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;\n        dest[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;\n\n        return dest;\n    },\n\n    /**\n     * Returns the trace of the given 4x4 matrix.\n     * @method traceMat4\n     * @static\n     */\n    traceMat4(m) {\n        return (m[0] + m[5] + m[10] + m[15]);\n    },\n\n    /**\n     * Returns 4x4 translation matrix.\n     * @method translationMat4\n     * @static\n     */\n    translationMat4v(v, dest) {\n        const m = dest || math.identityMat4();\n        m[12] = v[0];\n        m[13] = v[1];\n        m[14] = v[2];\n        return m;\n    },\n\n    /**\n     * Returns 3x3 translation matrix.\n     * @method translationMat3\n     * @static\n     */\n    translationMat3v(v, dest) {\n        const m = dest || math.identityMat3();\n        m[6] = v[0];\n        m[7] = v[1];\n        return m;\n    },\n\n    /**\n     * Returns 4x4 translation matrix.\n     * @method translationMat4c\n     * @static\n     */\n    translationMat4c: ((() => {\n        const xyz = new FloatArrayType(3);\n        return (x, y, z, dest) => {\n            xyz[0] = x;\n            xyz[1] = y;\n            xyz[2] = z;\n            return math.translationMat4v(xyz, dest);\n        };\n    }))(),\n\n    /**\n     * Returns 4x4 translation matrix.\n     * @method translationMat4s\n     * @static\n     */\n    translationMat4s(s, dest) {\n        return math.translationMat4c(s, s, s, dest);\n    },\n\n    /**\n     * Efficiently post-concatenates a translation to the given matrix.\n     * @param v\n     * @param m\n     */\n    translateMat4v(xyz, m) {\n        return math.translateMat4c(xyz[0], xyz[1], xyz[2], m);\n    },\n\n    /**\n     * Efficiently post-concatenates a translation to the given matrix.\n     * @param x\n     * @param y\n     * @param z\n     * @param m\n     */\n    OLDtranslateMat4c(x, y, z, m) {\n\n        const m12 = m[12];\n        m[0] += m12 * x;\n        m[4] += m12 * y;\n        m[8] += m12 * z;\n\n        const m13 = m[13];\n        m[1] += m13 * x;\n        m[5] += m13 * y;\n        m[9] += m13 * z;\n\n        const m14 = m[14];\n        m[2] += m14 * x;\n        m[6] += m14 * y;\n        m[10] += m14 * z;\n\n        const m15 = m[15];\n        m[3] += m15 * x;\n        m[7] += m15 * y;\n        m[11] += m15 * z;\n\n        return m;\n    },\n\n    translateMat4c(x, y, z, m) {\n\n        const m3 = m[3];\n        m[0] += m3 * x;\n        m[1] += m3 * y;\n        m[2] += m3 * z;\n\n        const m7 = m[7];\n        m[4] += m7 * x;\n        m[5] += m7 * y;\n        m[6] += m7 * z;\n\n        const m11 = m[11];\n        m[8] += m11 * x;\n        m[9] += m11 * y;\n        m[10] += m11 * z;\n\n        const m15 = m[15];\n        m[12] += m15 * x;\n        m[13] += m15 * y;\n        m[14] += m15 * z;\n\n        return m;\n    },\n    /**\n     * Returns 4x4 rotation matrix.\n     * @method rotationMat4v\n     * @static\n     */\n    rotationMat4v(anglerad, axis, m) {\n        const ax = math.normalizeVec4([axis[0], axis[1], axis[2], 0.0], []);\n        const s = Math.sin(anglerad);\n        const c = Math.cos(anglerad);\n        const q = 1.0 - c;\n\n        const x = ax[0];\n        const y = ax[1];\n        const z = ax[2];\n\n        let xy;\n        let yz;\n        let zx;\n        let xs;\n        let ys;\n        let zs;\n\n        //xx = x * x; used once\n        //yy = y * y; used once\n        //zz = z * z; used once\n        xy = x * y;\n        yz = y * z;\n        zx = z * x;\n        xs = x * s;\n        ys = y * s;\n        zs = z * s;\n\n        m = m || math.mat4();\n\n        m[0] = (q * x * x) + c;\n        m[1] = (q * xy) + zs;\n        m[2] = (q * zx) - ys;\n        m[3] = 0.0;\n\n        m[4] = (q * xy) - zs;\n        m[5] = (q * y * y) + c;\n        m[6] = (q * yz) + xs;\n        m[7] = 0.0;\n\n        m[8] = (q * zx) + ys;\n        m[9] = (q * yz) - xs;\n        m[10] = (q * z * z) + c;\n        m[11] = 0.0;\n\n        m[12] = 0.0;\n        m[13] = 0.0;\n        m[14] = 0.0;\n        m[15] = 1.0;\n\n        return m;\n    },\n\n    /**\n     * Returns 4x4 rotation matrix.\n     * @method rotationMat4c\n     * @static\n     */\n    rotationMat4c(anglerad, x, y, z, mat) {\n        return math.rotationMat4v(anglerad, [x, y, z], mat);\n    },\n\n    /**\n     * Returns 4x4 scale matrix.\n     * @method scalingMat4v\n     * @static\n     */\n    scalingMat4v(v, m = math.identityMat4()) {\n        m[0] = v[0];\n        m[5] = v[1];\n        m[10] = v[2];\n        return m;\n    },\n\n    /**\n     * Returns 3x3 scale matrix.\n     * @method scalingMat3v\n     * @static\n     */\n    scalingMat3v(v, m = math.identityMat3()) {\n        m[0] = v[0];\n        m[4] = v[1];\n        return m;\n    },\n\n    /**\n     * Returns 4x4 scale matrix.\n     * @method scalingMat4c\n     * @static\n     */\n    scalingMat4c: ((() => {\n        const xyz = new FloatArrayType(3);\n        return (x, y, z, dest) => {\n            xyz[0] = x;\n            xyz[1] = y;\n            xyz[2] = z;\n            return math.scalingMat4v(xyz, dest);\n        };\n    }))(),\n\n    /**\n     * Efficiently post-concatenates a scaling to the given matrix.\n     * @method scaleMat4c\n     * @param x\n     * @param y\n     * @param z\n     * @param m\n     */\n    scaleMat4c(x, y, z, m) {\n\n        m[0] *= x;\n        m[4] *= y;\n        m[8] *= z;\n\n        m[1] *= x;\n        m[5] *= y;\n        m[9] *= z;\n\n        m[2] *= x;\n        m[6] *= y;\n        m[10] *= z;\n\n        m[3] *= x;\n        m[7] *= y;\n        m[11] *= z;\n        return m;\n    },\n\n    /**\n     * Efficiently post-concatenates a scaling to the given matrix.\n     * @method scaleMat4c\n     * @param xyz\n     * @param m\n     */\n    scaleMat4v(xyz, m) {\n\n        const x = xyz[0];\n        const y = xyz[1];\n        const z = xyz[2];\n\n        m[0] *= x;\n        m[4] *= y;\n        m[8] *= z;\n        m[1] *= x;\n        m[5] *= y;\n        m[9] *= z;\n        m[2] *= x;\n        m[6] *= y;\n        m[10] *= z;\n        m[3] *= x;\n        m[7] *= y;\n        m[11] *= z;\n\n        return m;\n    },\n\n    /**\n     * Returns 4x4 scale matrix.\n     * @method scalingMat4s\n     * @static\n     */\n    scalingMat4s(s) {\n        return math.scalingMat4c(s, s, s);\n    },\n\n    /**\n     * Creates a matrix from a quaternion rotation and vector translation\n     *\n     * @param {Number[]} q Rotation quaternion\n     * @param {Number[]} v Translation vector\n     * @param {Number[]} dest Destination matrix\n     * @returns {Number[]} dest\n     */\n    rotationTranslationMat4(q, v, dest = math.mat4()) {\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const xy = x * y2;\n        const xz = x * z2;\n        const yy = y * y2;\n        const yz = y * z2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n\n        dest[0] = 1 - (yy + zz);\n        dest[1] = xy + wz;\n        dest[2] = xz - wy;\n        dest[3] = 0;\n        dest[4] = xy - wz;\n        dest[5] = 1 - (xx + zz);\n        dest[6] = yz + wx;\n        dest[7] = 0;\n        dest[8] = xz + wy;\n        dest[9] = yz - wx;\n        dest[10] = 1 - (xx + yy);\n        dest[11] = 0;\n        dest[12] = v[0];\n        dest[13] = v[1];\n        dest[14] = v[2];\n        dest[15] = 1;\n\n        return dest;\n    },\n\n    /**\n     * Gets Euler angles from a 4x4 matrix.\n     *\n     * @param {Number[]} mat The 4x4 matrix.\n     * @param {String} order Desired Euler angle order: \"XYZ\", \"YXZ\", \"ZXY\" etc.\n     * @param {Number[]} [dest] Destination Euler angles, created by default.\n     * @returns {Number[]} The Euler angles.\n     */\n    mat4ToEuler(mat, order, dest = math.vec4()) {\n        const clamp = math.clamp;\n\n        // Assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n        const m11 = mat[0];\n\n        const m12 = mat[4];\n        const m13 = mat[8];\n        const m21 = mat[1];\n        const m22 = mat[5];\n        const m23 = mat[9];\n        const m31 = mat[2];\n        const m32 = mat[6];\n        const m33 = mat[10];\n\n        if (order === 'XYZ') {\n\n            dest[1] = Math.asin(clamp(m13, -1, 1));\n\n            if (Math.abs(m13) < 0.99999) {\n                dest[0] = Math.atan2(-m23, m33);\n                dest[2] = Math.atan2(-m12, m11);\n            } else {\n                dest[0] = Math.atan2(m32, m22);\n                dest[2] = 0;\n\n            }\n\n        } else if (order === 'YXZ') {\n\n            dest[0] = Math.asin(-clamp(m23, -1, 1));\n\n            if (Math.abs(m23) < 0.99999) {\n                dest[1] = Math.atan2(m13, m33);\n                dest[2] = Math.atan2(m21, m22);\n            } else {\n                dest[1] = Math.atan2(-m31, m11);\n                dest[2] = 0;\n            }\n\n        } else if (order === 'ZXY') {\n\n            dest[0] = Math.asin(clamp(m32, -1, 1));\n\n            if (Math.abs(m32) < 0.99999) {\n                dest[1] = Math.atan2(-m31, m33);\n                dest[2] = Math.atan2(-m12, m22);\n            } else {\n                dest[1] = 0;\n                dest[2] = Math.atan2(m21, m11);\n            }\n\n        } else if (order === 'ZYX') {\n\n            dest[1] = Math.asin(-clamp(m31, -1, 1));\n\n            if (Math.abs(m31) < 0.99999) {\n                dest[0] = Math.atan2(m32, m33);\n                dest[2] = Math.atan2(m21, m11);\n            } else {\n                dest[0] = 0;\n                dest[2] = Math.atan2(-m12, m22);\n            }\n\n        } else if (order === 'YZX') {\n\n            dest[2] = Math.asin(clamp(m21, -1, 1));\n\n            if (Math.abs(m21) < 0.99999) {\n                dest[0] = Math.atan2(-m23, m22);\n                dest[1] = Math.atan2(-m31, m11);\n            } else {\n                dest[0] = 0;\n                dest[1] = Math.atan2(m13, m33);\n            }\n\n        } else if (order === 'XZY') {\n\n            dest[2] = Math.asin(-clamp(m12, -1, 1));\n\n            if (Math.abs(m12) < 0.99999) {\n                dest[0] = Math.atan2(m32, m22);\n                dest[1] = Math.atan2(m13, m11);\n            } else {\n                dest[0] = Math.atan2(-m23, m33);\n                dest[1] = 0;\n            }\n        }\n\n        return dest;\n    },\n\n    composeMat4(position, quaternion, scale, mat = math.mat4()) {\n        math.quaternionToRotationMat4(quaternion, mat);\n        math.scaleMat4v(scale, mat);\n        math.translateMat4v(position, mat);\n\n        return mat;\n    },\n\n    decomposeMat4: (() => {\n\n        const vec = new FloatArrayType(3);\n        const matrix = new FloatArrayType(16);\n\n        return function decompose(mat, position, quaternion, scale) {\n\n            vec[0] = mat[0];\n            vec[1] = mat[1];\n            vec[2] = mat[2];\n\n            let sx = math.lenVec3(vec);\n\n            vec[0] = mat[4];\n            vec[1] = mat[5];\n            vec[2] = mat[6];\n\n            const sy = math.lenVec3(vec);\n\n            vec[8] = mat[8];\n            vec[9] = mat[9];\n            vec[10] = mat[10];\n\n            const sz = math.lenVec3(vec);\n\n            // if determine is negative, we need to invert one scale\n            const det = math.determinantMat4(mat);\n\n            if (det < 0) {\n                sx = -sx;\n            }\n\n            position[0] = mat[12];\n            position[1] = mat[13];\n            position[2] = mat[14];\n\n            // scale the rotation part\n            matrix.set(mat);\n\n            const invSX = 1 / sx;\n            const invSY = 1 / sy;\n            const invSZ = 1 / sz;\n\n            matrix[0] *= invSX;\n            matrix[1] *= invSX;\n            matrix[2] *= invSX;\n\n            matrix[4] *= invSY;\n            matrix[5] *= invSY;\n            matrix[6] *= invSY;\n\n            matrix[8] *= invSZ;\n            matrix[9] *= invSZ;\n            matrix[10] *= invSZ;\n\n            math.mat4ToQuaternion(matrix, quaternion);\n\n            scale[0] = sx;\n            scale[1] = sy;\n            scale[2] = sz;\n\n            return this;\n\n        };\n\n    })(),\n\n    /**\n     * Returns a 4x4 'lookat' viewing transform matrix.\n     * @method lookAtMat4v\n     * @param pos vec3 position of the viewer\n     * @param target vec3 point the viewer is looking at\n     * @param up vec3 pointing \"up\"\n     * @param dest mat4 Optional, mat4 matrix will be written into\n     *\n     * @return {mat4} dest if specified, a new mat4 otherwise\n     */\n    lookAtMat4v(pos, target, up, dest) {\n        if (!dest) {\n            dest = math.mat4();\n        }\n\n        const posx = pos[0];\n        const posy = pos[1];\n        const posz = pos[2];\n        const upx = up[0];\n        const upy = up[1];\n        const upz = up[2];\n        const targetx = target[0];\n        const targety = target[1];\n        const targetz = target[2];\n\n        if (posx === targetx && posy === targety && posz === targetz) {\n            return math.identityMat4();\n        }\n\n        let z0;\n        let z1;\n        let z2;\n        let x0;\n        let x1;\n        let x2;\n        let y0;\n        let y1;\n        let y2;\n        let len;\n\n        //vec3.direction(eye, center, z);\n        z0 = posx - targetx;\n        z1 = posy - targety;\n        z2 = posz - targetz;\n\n        // normalize (no check needed for 0 because of early return)\n        len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n\n        //vec3.normalize(vec3.cross(up, z, x));\n        x0 = upy * z2 - upz * z1;\n        x1 = upz * z0 - upx * z2;\n        x2 = upx * z1 - upy * z0;\n        len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n        if (!len) {\n            x0 = 0;\n            x1 = 0;\n            x2 = 0;\n        } else {\n            len = 1 / len;\n            x0 *= len;\n            x1 *= len;\n            x2 *= len;\n        }\n\n        //vec3.normalize(vec3.cross(z, x, y));\n        y0 = z1 * x2 - z2 * x1;\n        y1 = z2 * x0 - z0 * x2;\n        y2 = z0 * x1 - z1 * x0;\n\n        len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n        if (!len) {\n            y0 = 0;\n            y1 = 0;\n            y2 = 0;\n        } else {\n            len = 1 / len;\n            y0 *= len;\n            y1 *= len;\n            y2 *= len;\n        }\n\n        dest[0] = x0;\n        dest[1] = y0;\n        dest[2] = z0;\n        dest[3] = 0;\n        dest[4] = x1;\n        dest[5] = y1;\n        dest[6] = z1;\n        dest[7] = 0;\n        dest[8] = x2;\n        dest[9] = y2;\n        dest[10] = z2;\n        dest[11] = 0;\n        dest[12] = -(x0 * posx + x1 * posy + x2 * posz);\n        dest[13] = -(y0 * posx + y1 * posy + y2 * posz);\n        dest[14] = -(z0 * posx + z1 * posy + z2 * posz);\n        dest[15] = 1;\n\n        return dest;\n    },\n\n    /**\n     * Returns a 4x4 'lookat' viewing transform matrix.\n     * @method lookAtMat4c\n     * @static\n     */\n    lookAtMat4c(posx, posy, posz, targetx, targety, targetz, upx, upy, upz) {\n        return math.lookAtMat4v([posx, posy, posz], [targetx, targety, targetz], [upx, upy, upz], []);\n    },\n\n    /**\n     * Returns a 4x4 orthographic projection matrix.\n     * @method orthoMat4c\n     * @static\n     */\n    orthoMat4c(left, right, bottom, top, near, far, dest) {\n        if (!dest) {\n            dest = math.mat4();\n        }\n        const rl = (right - left);\n        const tb = (top - bottom);\n        const fn = (far - near);\n\n        dest[0] = 2.0 / rl;\n        dest[1] = 0.0;\n        dest[2] = 0.0;\n        dest[3] = 0.0;\n\n        dest[4] = 0.0;\n        dest[5] = 2.0 / tb;\n        dest[6] = 0.0;\n        dest[7] = 0.0;\n\n        dest[8] = 0.0;\n        dest[9] = 0.0;\n        dest[10] = -2.0 / fn;\n        dest[11] = 0.0;\n\n        dest[12] = -(left + right) / rl;\n        dest[13] = -(top + bottom) / tb;\n        dest[14] = -(far + near) / fn;\n        dest[15] = 1.0;\n\n        return dest;\n    },\n\n    /**\n     * Returns a 4x4 perspective projection matrix.\n     * @method frustumMat4v\n     * @static\n     */\n    frustumMat4v(fmin, fmax, m) {\n        if (!m) {\n            m = math.mat4();\n        }\n\n        const fmin4 = [fmin[0], fmin[1], fmin[2], 0.0];\n        const fmax4 = [fmax[0], fmax[1], fmax[2], 0.0];\n\n        math.addVec4(fmax4, fmin4, tempMat1);\n        math.subVec4(fmax4, fmin4, tempMat2);\n\n        const t = 2.0 * fmin4[2];\n\n        const tempMat20 = tempMat2[0];\n        const tempMat21 = tempMat2[1];\n        const tempMat22 = tempMat2[2];\n\n        m[0] = t / tempMat20;\n        m[1] = 0.0;\n        m[2] = 0.0;\n        m[3] = 0.0;\n\n        m[4] = 0.0;\n        m[5] = t / tempMat21;\n        m[6] = 0.0;\n        m[7] = 0.0;\n\n        m[8] = tempMat1[0] / tempMat20;\n        m[9] = tempMat1[1] / tempMat21;\n        m[10] = -tempMat1[2] / tempMat22;\n        m[11] = -1.0;\n\n        m[12] = 0.0;\n        m[13] = 0.0;\n        m[14] = -t * fmax4[2] / tempMat22;\n        m[15] = 0.0;\n\n        return m;\n    },\n\n    /**\n     * Returns a 4x4 perspective projection matrix.\n     * @method frustumMat4v\n     * @static\n     */\n    frustumMat4(left, right, bottom, top, near, far, dest) {\n        if (!dest) {\n            dest = math.mat4();\n        }\n        const rl = (right - left);\n        const tb = (top - bottom);\n        const fn = (far - near);\n        dest[0] = (near * 2) / rl;\n        dest[1] = 0;\n        dest[2] = 0;\n        dest[3] = 0;\n        dest[4] = 0;\n        dest[5] = (near * 2) / tb;\n        dest[6] = 0;\n        dest[7] = 0;\n        dest[8] = (right + left) / rl;\n        dest[9] = (top + bottom) / tb;\n        dest[10] = -(far + near) / fn;\n        dest[11] = -1;\n        dest[12] = 0;\n        dest[13] = 0;\n        dest[14] = -(far * near * 2) / fn;\n        dest[15] = 0;\n        return dest;\n    },\n\n    /**\n     * Returns a 4x4 perspective projection matrix.\n     * @method perspectiveMat4v\n     * @static\n     */\n    perspectiveMat4(fovyrad, aspectratio, znear, zfar, m) {\n        const pmin = [];\n        const pmax = [];\n\n        pmin[2] = znear;\n        pmax[2] = zfar;\n\n        pmax[1] = pmin[2] * Math.tan(fovyrad / 2.0);\n        pmin[1] = -pmax[1];\n\n        pmax[0] = pmax[1] * aspectratio;\n        pmin[0] = -pmax[0];\n\n        return math.frustumMat4v(pmin, pmax, m);\n    },\n\n    /**\n     * Transforms a three-element position by a 4x4 matrix.\n     * @method transformPoint3\n     * @static\n     */\n    transformPoint3(m, p, dest = math.vec3()) {\n\n        const x = p[0];\n        const y = p[1];\n        const z = p[2];\n\n        dest[0] = (m[0] * x) + (m[4] * y) + (m[8] * z) + m[12];\n        dest[1] = (m[1] * x) + (m[5] * y) + (m[9] * z) + m[13];\n        dest[2] = (m[2] * x) + (m[6] * y) + (m[10] * z) + m[14];\n\n        return dest;\n    },\n\n    /**\n     * Transforms a homogeneous coordinate by a 4x4 matrix.\n     * @method transformPoint3\n     * @static\n     */\n    transformPoint4(m, v, dest = math.vec4()) {\n        dest[0] = m[0] * v[0] + m[4] * v[1] + m[8] * v[2] + m[12] * v[3];\n        dest[1] = m[1] * v[0] + m[5] * v[1] + m[9] * v[2] + m[13] * v[3];\n        dest[2] = m[2] * v[0] + m[6] * v[1] + m[10] * v[2] + m[14] * v[3];\n        dest[3] = m[3] * v[0] + m[7] * v[1] + m[11] * v[2] + m[15] * v[3];\n\n        return dest;\n    },\n\n\n    /**\n     * Transforms an array of three-element positions by a 4x4 matrix.\n     * @method transformPoints3\n     * @static\n     */\n    transformPoints3(m, points, points2) {\n        const result = points2 || [];\n        const len = points.length;\n        let p0;\n        let p1;\n        let p2;\n        let pi;\n\n        // cache values\n        const m0 = m[0];\n\n        const m1 = m[1];\n        const m2 = m[2];\n        const m3 = m[3];\n        const m4 = m[4];\n        const m5 = m[5];\n        const m6 = m[6];\n        const m7 = m[7];\n        const m8 = m[8];\n        const m9 = m[9];\n        const m10 = m[10];\n        const m11 = m[11];\n        const m12 = m[12];\n        const m13 = m[13];\n        const m14 = m[14];\n        const m15 = m[15];\n\n        let r;\n\n        for (let i = 0; i < len; ++i) {\n\n            // cache values\n            pi = points[i];\n\n            p0 = pi[0];\n            p1 = pi[1];\n            p2 = pi[2];\n\n            r = result[i] || (result[i] = [0, 0, 0]);\n\n            r[0] = (m0 * p0) + (m4 * p1) + (m8 * p2) + m12;\n            r[1] = (m1 * p0) + (m5 * p1) + (m9 * p2) + m13;\n            r[2] = (m2 * p0) + (m6 * p1) + (m10 * p2) + m14;\n            r[3] = (m3 * p0) + (m7 * p1) + (m11 * p2) + m15;\n        }\n\n        result.length = len;\n\n        return result;\n    },\n\n    /**\n     * Transforms an array of positions by a 4x4 matrix.\n     * @method transformPositions3\n     * @static\n     */\n    transformPositions3(m, p, p2 = p) {\n        let i;\n        const len = p.length;\n\n        let x;\n        let y;\n        let z;\n\n        const m0 = m[0];\n        const m1 = m[1];\n        const m2 = m[2];\n        const m3 = m[3];\n        const m4 = m[4];\n        const m5 = m[5];\n        const m6 = m[6];\n        const m7 = m[7];\n        const m8 = m[8];\n        const m9 = m[9];\n        const m10 = m[10];\n        const m11 = m[11];\n        const m12 = m[12];\n        const m13 = m[13];\n        const m14 = m[14];\n        const m15 = m[15];\n\n        for (i = 0; i < len; i += 3) {\n\n            x = p[i + 0];\n            y = p[i + 1];\n            z = p[i + 2];\n\n            p2[i + 0] = (m0 * x) + (m4 * y) + (m8 * z) + m12;\n            p2[i + 1] = (m1 * x) + (m5 * y) + (m9 * z) + m13;\n            p2[i + 2] = (m2 * x) + (m6 * y) + (m10 * z) + m14;\n            p2[i + 3] = (m3 * x) + (m7 * y) + (m11 * z) + m15;\n        }\n\n        return p2;\n    },\n\n    /**\n     * Transforms an array of positions by a 4x4 matrix.\n     * @method transformPositions4\n     * @static\n     */\n    transformPositions4(m, p, p2 = p) {\n        let i;\n        const len = p.length;\n\n        let x;\n        let y;\n        let z;\n\n        const m0 = m[0];\n        const m1 = m[1];\n        const m2 = m[2];\n        const m3 = m[3];\n        const m4 = m[4];\n        const m5 = m[5];\n        const m6 = m[6];\n        const m7 = m[7];\n        const m8 = m[8];\n        const m9 = m[9];\n        const m10 = m[10];\n        const m11 = m[11];\n        const m12 = m[12];\n        const m13 = m[13];\n        const m14 = m[14];\n        const m15 = m[15];\n\n        for (i = 0; i < len; i += 4) {\n\n            x = p[i + 0];\n            y = p[i + 1];\n            z = p[i + 2];\n\n            p2[i + 0] = (m0 * x) + (m4 * y) + (m8 * z) + m12;\n            p2[i + 1] = (m1 * x) + (m5 * y) + (m9 * z) + m13;\n            p2[i + 2] = (m2 * x) + (m6 * y) + (m10 * z) + m14;\n            p2[i + 3] = (m3 * x) + (m7 * y) + (m11 * z) + m15;\n        }\n\n        return p2;\n    },\n\n    /**\n     * Transforms a three-element vector by a 4x4 matrix.\n     * @method transformVec3\n     * @static\n     */\n    transformVec3(m, v, dest) {\n        const v0 = v[0];\n        const v1 = v[1];\n        const v2 = v[2];\n        dest = dest || this.vec3();\n        dest[0] = (m[0] * v0) + (m[4] * v1) + (m[8] * v2);\n        dest[1] = (m[1] * v0) + (m[5] * v1) + (m[9] * v2);\n        dest[2] = (m[2] * v0) + (m[6] * v1) + (m[10] * v2);\n        return dest;\n    },\n\n    /**\n     * Transforms a four-element vector by a 4x4 matrix.\n     * @method transformVec4\n     * @static\n     */\n    transformVec4(m, v, dest) {\n        const v0 = v[0];\n        const v1 = v[1];\n        const v2 = v[2];\n        const v3 = v[3];\n        dest = dest || math.vec4();\n        dest[0] = m[0] * v0 + m[4] * v1 + m[8] * v2 + m[12] * v3;\n        dest[1] = m[1] * v0 + m[5] * v1 + m[9] * v2 + m[13] * v3;\n        dest[2] = m[2] * v0 + m[6] * v1 + m[10] * v2 + m[14] * v3;\n        dest[3] = m[3] * v0 + m[7] * v1 + m[11] * v2 + m[15] * v3;\n        return dest;\n    },\n\n    /**\n     * Rotate a 3D vector around the x-axis\n     *\n     * @method rotateVec3X\n     * @param {Number[]} a The vec3 point to rotate\n     * @param {Number[]} b The origin of the rotation\n     * @param {Number} c The angle of rotation\n     * @param {Number[]} dest The receiving vec3\n     * @returns {Number[]} dest\n     * @static\n     */\n    rotateVec3X(a, b, c, dest) {\n        const p = [];\n        const r = [];\n\n        //Translate point to the origin\n        p[0] = a[0] - b[0];\n        p[1] = a[1] - b[1];\n        p[2] = a[2] - b[2];\n\n        //perform rotation\n        r[0] = p[0];\n        r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n        r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\n\n        //translate to correct position\n        dest[0] = r[0] + b[0];\n        dest[1] = r[1] + b[1];\n        dest[2] = r[2] + b[2];\n\n        return dest;\n    },\n\n    /**\n     * Rotate a 3D vector around the y-axis\n     *\n     * @method rotateVec3Y\n     * @param {Number[]} a The vec3 point to rotate\n     * @param {Number[]} b The origin of the rotation\n     * @param {Number} c The angle of rotation\n     * @param {Number[]} dest The receiving vec3\n     * @returns {Number[]} dest\n     * @static\n     */\n    rotateVec3Y(a, b, c, dest) {\n        const p = [];\n        const r = [];\n\n        //Translate point to the origin\n        p[0] = a[0] - b[0];\n        p[1] = a[1] - b[1];\n        p[2] = a[2] - b[2];\n\n        //perform rotation\n        r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n        r[1] = p[1];\n        r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\n\n        //translate to correct position\n        dest[0] = r[0] + b[0];\n        dest[1] = r[1] + b[1];\n        dest[2] = r[2] + b[2];\n\n        return dest;\n    },\n\n    /**\n     * Rotate a 3D vector around the z-axis\n     *\n     * @method rotateVec3Z\n     * @param {Number[]} a The vec3 point to rotate\n     * @param {Number[]} b The origin of the rotation\n     * @param {Number} c The angle of rotation\n     * @param {Number[]} dest The receiving vec3\n     * @returns {Number[]} dest\n     * @static\n     */\n    rotateVec3Z(a, b, c, dest) {\n        const p = [];\n        const r = [];\n\n        //Translate point to the origin\n        p[0] = a[0] - b[0];\n        p[1] = a[1] - b[1];\n        p[2] = a[2] - b[2];\n\n        //perform rotation\n        r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n        r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n        r[2] = p[2];\n\n        //translate to correct position\n        dest[0] = r[0] + b[0];\n        dest[1] = r[1] + b[1];\n        dest[2] = r[2] + b[2];\n\n        return dest;\n    },\n\n    /**\n     * Transforms a four-element vector by a 4x4 projection matrix.\n     *\n     * @method projectVec4\n     * @param {Number[]} p 3D View-space coordinate\n     * @param {Number[]} q 2D Projected coordinate\n     * @returns {Number[]} 2D Projected coordinate\n     * @static\n     */\n    projectVec4(p, q) {\n        const f = 1.0 / p[3];\n        q = q || math.vec2();\n        q[0] = v[0] * f;\n        q[1] = v[1] * f;\n        return q;\n    },\n\n    /**\n     * Unprojects a three-element vector.\n     *\n     * @method unprojectVec3\n     * @param {Number[]} p 3D Projected coordinate\n     * @param {Number[]} viewMat View matrix\n     * @returns {Number[]} projMat Projection matrix\n     * @static\n     */\n    unprojectVec3: ((() => {\n        const mat = new FloatArrayType(16);\n        const mat2 = new FloatArrayType(16);\n        const mat3 = new FloatArrayType(16);\n        return function (p, viewMat, projMat, q) {\n            return this.transformVec3(this.mulMat4(this.inverseMat4(viewMat, mat), this.inverseMat4(projMat, mat2), mat3), p, q)\n        };\n    }))(),\n\n    /**\n     * Linearly interpolates between two 3D vectors.\n     * @method lerpVec3\n     * @static\n     */\n    lerpVec3(t, t1, t2, p1, p2, dest) {\n        const result = dest || math.vec3();\n        const f = (t - t1) / (t2 - t1);\n        result[0] = p1[0] + (f * (p2[0] - p1[0]));\n        result[1] = p1[1] + (f * (p2[1] - p1[1]));\n        result[2] = p1[2] + (f * (p2[2] - p1[2]));\n        return result;\n    },\n\n\n    /**\n     * Flattens a two-dimensional array into a one-dimensional array.\n     *\n     * @method flatten\n     * @static\n     * @param {Array of Arrays} a A 2D array\n     * @returns Flattened 1D array\n     */\n    flatten(a) {\n\n        const result = [];\n\n        let i;\n        let leni;\n        let j;\n        let lenj;\n        let item;\n\n        for (i = 0, leni = a.length; i < leni; i++) {\n            item = a[i];\n            for (j = 0, lenj = item.length; j < lenj; j++) {\n                result.push(item[j]);\n            }\n        }\n\n        return result;\n    },\n\n\n    identityQuaternion(dest = math.vec4()) {\n        dest[0] = 0.0;\n        dest[1] = 0.0;\n        dest[2] = 0.0;\n        dest[3] = 1.0;\n        return dest;\n    },\n\n    /**\n     * Initializes a quaternion from Euler angles.\n     *\n     * @param {Number[]} euler The Euler angles.\n     * @param {String} order Euler angle order: \"XYZ\", \"YXZ\", \"ZXY\" etc.\n     * @param {Number[]} [dest] Destination quaternion, created by default.\n     * @returns {Number[]} The quaternion.\n     */\n    eulerToQuaternion(euler, order, dest = math.vec4()) {\n        // http://www.mathworks.com/matlabcentral/fileexchange/\n        // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n        //\tcontent/SpinCalc.m\n\n        const a = (euler[0] * math.DEGTORAD) / 2;\n        const b = (euler[1] * math.DEGTORAD) / 2;\n        const c = (euler[2] * math.DEGTORAD) / 2;\n\n        const c1 = Math.cos(a);\n        const c2 = Math.cos(b);\n        const c3 = Math.cos(c);\n        const s1 = Math.sin(a);\n        const s2 = Math.sin(b);\n        const s3 = Math.sin(c);\n\n        if (order === 'XYZ') {\n\n            dest[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            dest[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            dest[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            dest[3] = c1 * c2 * c3 - s1 * s2 * s3;\n\n        } else if (order === 'YXZ') {\n\n            dest[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            dest[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            dest[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            dest[3] = c1 * c2 * c3 + s1 * s2 * s3;\n\n        } else if (order === 'ZXY') {\n\n            dest[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            dest[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            dest[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            dest[3] = c1 * c2 * c3 - s1 * s2 * s3;\n\n        } else if (order === 'ZYX') {\n\n            dest[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            dest[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            dest[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            dest[3] = c1 * c2 * c3 + s1 * s2 * s3;\n\n        } else if (order === 'YZX') {\n\n            dest[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            dest[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            dest[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            dest[3] = c1 * c2 * c3 - s1 * s2 * s3;\n\n        } else if (order === 'XZY') {\n\n            dest[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            dest[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            dest[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            dest[3] = c1 * c2 * c3 + s1 * s2 * s3;\n        }\n\n        return dest;\n    },\n\n    mat4ToQuaternion(m, dest = math.vec4()) {\n        // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n        // Assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n        const m11 = m[0];\n        const m12 = m[4];\n        const m13 = m[8];\n        const m21 = m[1];\n        const m22 = m[5];\n        const m23 = m[9];\n        const m31 = m[2];\n        const m32 = m[6];\n        const m33 = m[10];\n        let s;\n\n        const trace = m11 + m22 + m33;\n\n        if (trace > 0) {\n\n            s = 0.5 / Math.sqrt(trace + 1.0);\n\n            dest[3] = 0.25 / s;\n            dest[0] = (m32 - m23) * s;\n            dest[1] = (m13 - m31) * s;\n            dest[2] = (m21 - m12) * s;\n\n        } else if (m11 > m22 && m11 > m33) {\n\n            s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n\n            dest[3] = (m32 - m23) / s;\n            dest[0] = 0.25 * s;\n            dest[1] = (m12 + m21) / s;\n            dest[2] = (m13 + m31) / s;\n\n        } else if (m22 > m33) {\n\n            s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n\n            dest[3] = (m13 - m31) / s;\n            dest[0] = (m12 + m21) / s;\n            dest[1] = 0.25 * s;\n            dest[2] = (m23 + m32) / s;\n\n        } else {\n\n            s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n\n            dest[3] = (m21 - m12) / s;\n            dest[0] = (m13 + m31) / s;\n            dest[1] = (m23 + m32) / s;\n            dest[2] = 0.25 * s;\n        }\n\n        return dest;\n    },\n\n    vec3PairToQuaternion(u, v, dest = math.vec4()) {\n        const norm_u_norm_v = Math.sqrt(math.dotVec3(u, u) * math.dotVec3(v, v));\n        let real_part = norm_u_norm_v + math.dotVec3(u, v);\n\n        if (real_part < 0.00000001 * norm_u_norm_v) {\n\n            // If u and v are exactly opposite, rotate 180 degrees\n            // around an arbitrary orthogonal axis. Axis normalisation\n            // can happen later, when we normalise the quaternion.\n\n            real_part = 0.0;\n\n            if (Math.abs(u[0]) > Math.abs(u[2])) {\n\n                dest[0] = -u[1];\n                dest[1] = u[0];\n                dest[2] = 0;\n\n            } else {\n                dest[0] = 0;\n                dest[1] = -u[2];\n                dest[2] = u[1]\n            }\n\n        } else {\n\n            // Otherwise, build quaternion the standard way.\n            math.cross3Vec3(u, v, dest);\n        }\n\n        dest[3] = real_part;\n\n        return math.normalizeQuaternion(dest);\n    },\n\n    angleAxisToQuaternion(angleAxis, dest = math.vec4()) {\n        const halfAngle = angleAxis[3] / 2.0;\n        const fsin = Math.sin(halfAngle);\n        dest[0] = fsin * angleAxis[0];\n        dest[1] = fsin * angleAxis[1];\n        dest[2] = fsin * angleAxis[2];\n        dest[3] = Math.cos(halfAngle);\n        return dest;\n    },\n\n    quaternionToEuler: ((() => {\n        const mat = new FloatArrayType(16);\n        return (q, order, dest) => {\n            dest = dest || math.vec3();\n            math.quaternionToRotationMat4(q, mat);\n            math.mat4ToEuler(mat, order, dest);\n            return dest;\n        };\n    }))(),\n\n    mulQuaternions(p, q, dest = math.vec4()) {\n        const p0 = p[0];\n        const p1 = p[1];\n        const p2 = p[2];\n        const p3 = p[3];\n        const q0 = q[0];\n        const q1 = q[1];\n        const q2 = q[2];\n        const q3 = q[3];\n        dest[0] = p3 * q0 + p0 * q3 + p1 * q2 - p2 * q1;\n        dest[1] = p3 * q1 + p1 * q3 + p2 * q0 - p0 * q2;\n        dest[2] = p3 * q2 + p2 * q3 + p0 * q1 - p1 * q0;\n        dest[3] = p3 * q3 - p0 * q0 - p1 * q1 - p2 * q2;\n        return dest;\n    },\n\n    vec3ApplyQuaternion(q, vec, dest = math.vec3()) {\n        const x = vec[0];\n        const y = vec[1];\n        const z = vec[2];\n\n        const qx = q[0];\n        const qy = q[1];\n        const qz = q[2];\n        const qw = q[3];\n\n        // calculate quat * vector\n\n        const ix = qw * x + qy * z - qz * y;\n        const iy = qw * y + qz * x - qx * z;\n        const iz = qw * z + qx * y - qy * x;\n        const iw = -qx * x - qy * y - qz * z;\n\n        // calculate result * inverse quat\n\n        dest[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n        dest[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n        dest[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n\n        return dest;\n    },\n\n    quaternionToMat4(q, dest) {\n\n        dest = math.identityMat4(dest);\n\n        const q0 = q[0];  //x\n        const q1 = q[1];  //y\n        const q2 = q[2];  //z\n        const q3 = q[3];  //w\n\n        const tx = 2.0 * q0;\n        const ty = 2.0 * q1;\n        const tz = 2.0 * q2;\n\n        const twx = tx * q3;\n        const twy = ty * q3;\n        const twz = tz * q3;\n\n        const txx = tx * q0;\n        const txy = ty * q0;\n        const txz = tz * q0;\n\n        const tyy = ty * q1;\n        const tyz = tz * q1;\n        const tzz = tz * q2;\n\n        dest[0] = 1.0 - (tyy + tzz);\n        dest[1] = txy + twz;\n        dest[2] = txz - twy;\n\n        dest[4] = txy - twz;\n        dest[5] = 1.0 - (txx + tzz);\n        dest[6] = tyz + twx;\n\n        dest[8] = txz + twy;\n        dest[9] = tyz - twx;\n\n        dest[10] = 1.0 - (txx + tyy);\n\n        return dest;\n    },\n\n    quaternionToRotationMat4(q, m) {\n        const x = q[0];\n        const y = q[1];\n        const z = q[2];\n        const w = q[3];\n\n        const x2 = x + x;\n        const y2 = y + y;\n        const z2 = z + z;\n        const xx = x * x2;\n        const xy = x * y2;\n        const xz = x * z2;\n        const yy = y * y2;\n        const yz = y * z2;\n        const zz = z * z2;\n        const wx = w * x2;\n        const wy = w * y2;\n        const wz = w * z2;\n\n        m[0] = 1 - (yy + zz);\n        m[4] = xy - wz;\n        m[8] = xz + wy;\n\n        m[1] = xy + wz;\n        m[5] = 1 - (xx + zz);\n        m[9] = yz - wx;\n\n        m[2] = xz - wy;\n        m[6] = yz + wx;\n        m[10] = 1 - (xx + yy);\n\n        // last column\n        m[3] = 0;\n        m[7] = 0;\n        m[11] = 0;\n\n        // bottom row\n        m[12] = 0;\n        m[13] = 0;\n        m[14] = 0;\n        m[15] = 1;\n\n        return m;\n    },\n\n    normalizeQuaternion(q, dest = q) {\n        const len = math.lenVec4([q[0], q[1], q[2], q[3]]);\n        dest[0] = q[0] / len;\n        dest[1] = q[1] / len;\n        dest[2] = q[2] / len;\n        dest[3] = q[3] / len;\n        return dest;\n    },\n\n    conjugateQuaternion(q, dest = q) {\n        dest[0] = -q[0];\n        dest[1] = -q[1];\n        dest[2] = -q[2];\n        dest[3] = q[3];\n        return dest;\n    },\n\n    inverseQuaternion(q, dest) {\n        return math.normalizeQuaternion(math.conjugateQuaternion(q, dest));\n    },\n\n    quaternionToAngleAxis(q, angleAxis = math.vec4()) {\n        q = math.normalizeQuaternion(q, tempVec4);\n        const q3 = q[3];\n        const angle = 2 * Math.acos(q3);\n        const s = Math.sqrt(1 - q3 * q3);\n        if (s < 0.001) { // test to avoid divide by zero, s is always positive due to sqrt\n            angleAxis[0] = q[0];\n            angleAxis[1] = q[1];\n            angleAxis[2] = q[2];\n        } else {\n            angleAxis[0] = q[0] / s;\n            angleAxis[1] = q[1] / s;\n            angleAxis[2] = q[2] / s;\n        }\n        angleAxis[3] = angle; // * 57.295779579;\n        return angleAxis;\n    },\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Boundaries\n    //------------------------------------------------------------------------------------------------------------------\n\n    /**\n     * Returns a new, uninitialized 3D axis-aligned bounding box.\n     *\n     * @private\n     */\n    AABB3(values) {\n        return new FloatArrayType(values || 6);\n    },\n\n    /**\n     * Returns a new, uninitialized 2D axis-aligned bounding box.\n     *\n     * @private\n     */\n    AABB2(values) {\n        return new FloatArrayType(values || 4);\n    },\n\n    /**\n     * Returns a new, uninitialized 3D oriented bounding box (OBB).\n     *\n     * @private\n     */\n    OBB3(values) {\n        return new FloatArrayType(values || 32);\n    },\n\n    /**\n     * Returns a new, uninitialized 2D oriented bounding box (OBB).\n     *\n     * @private\n     */\n    OBB2(values) {\n        return new FloatArrayType(values || 16);\n    },\n\n    /** Returns a new 3D bounding sphere */\n    Sphere3(x, y, z, r) {\n        return new FloatArrayType([x, y, z, r]);\n    },\n\n    /**\n     * Transforms an OBB3 by a 4x4 matrix.\n     *\n     * @private\n     */\n    transformOBB3(m, p, p2 = p) {\n        let i;\n        const len = p.length;\n\n        let x;\n        let y;\n        let z;\n\n        const m0 = m[0];\n        const m1 = m[1];\n        const m2 = m[2];\n        const m3 = m[3];\n        const m4 = m[4];\n        const m5 = m[5];\n        const m6 = m[6];\n        const m7 = m[7];\n        const m8 = m[8];\n        const m9 = m[9];\n        const m10 = m[10];\n        const m11 = m[11];\n        const m12 = m[12];\n        const m13 = m[13];\n        const m14 = m[14];\n        const m15 = m[15];\n\n        for (i = 0; i < len; i += 4) {\n\n            x = p[i + 0];\n            y = p[i + 1];\n            z = p[i + 2];\n\n            p2[i + 0] = (m0 * x) + (m4 * y) + (m8 * z) + m12;\n            p2[i + 1] = (m1 * x) + (m5 * y) + (m9 * z) + m13;\n            p2[i + 2] = (m2 * x) + (m6 * y) + (m10 * z) + m14;\n            p2[i + 3] = (m3 * x) + (m7 * y) + (m11 * z) + m15;\n        }\n\n        return p2;\n    },\n\n    /** Returns true if the first AABB contains the second AABB.\n     * @param aabb1\n     * @param aabb2\n     * @returns {boolean}\n     */\n    containsAABB3: function (aabb1, aabb2) {\n        const result = (\n            aabb1[0] <= aabb2[0] && aabb2[3] <= aabb1[3] &&\n            aabb1[1] <= aabb2[1] && aabb2[4] <= aabb1[4] &&\n            aabb1[2] <= aabb2[2] && aabb2[5] <= aabb1[5]);\n        return result;\n    },\n\n    /**\n     * Gets the diagonal size of an AABB3 given as minima and maxima.\n     *\n     * @private\n     */\n    getAABB3Diag: ((() => {\n\n        const min = new FloatArrayType(3);\n        const max = new FloatArrayType(3);\n        const tempVec3 = new FloatArrayType(3);\n\n        return aabb => {\n\n            min[0] = aabb[0];\n            min[1] = aabb[1];\n            min[2] = aabb[2];\n\n            max[0] = aabb[3];\n            max[1] = aabb[4];\n            max[2] = aabb[5];\n\n            math.subVec3(max, min, tempVec3);\n\n            return Math.abs(math.lenVec3(tempVec3));\n        };\n    }))(),\n\n    /**\n     * Get a diagonal boundary size that is symmetrical about the given point.\n     *\n     * @private\n     */\n    getAABB3DiagPoint: ((() => {\n\n        const min = new FloatArrayType(3);\n        const max = new FloatArrayType(3);\n        const tempVec3 = new FloatArrayType(3);\n\n        return (aabb, p) => {\n\n            min[0] = aabb[0];\n            min[1] = aabb[1];\n            min[2] = aabb[2];\n\n            max[0] = aabb[3];\n            max[1] = aabb[4];\n            max[2] = aabb[5];\n\n            const diagVec = math.subVec3(max, min, tempVec3);\n\n            const xneg = p[0] - aabb[0];\n            const xpos = aabb[3] - p[0];\n            const yneg = p[1] - aabb[1];\n            const ypos = aabb[4] - p[1];\n            const zneg = p[2] - aabb[2];\n            const zpos = aabb[5] - p[2];\n\n            diagVec[0] += (xneg > xpos) ? xneg : xpos;\n            diagVec[1] += (yneg > ypos) ? yneg : ypos;\n            diagVec[2] += (zneg > zpos) ? zneg : zpos;\n\n            return Math.abs(math.lenVec3(diagVec));\n        };\n    }))(),\n\n    /**\n     * Gets the center of an AABB.\n     *\n     * @private\n     */\n    getAABB3Center(aabb, dest) {\n        const r = dest || math.vec3();\n\n        r[0] = (aabb[0] + aabb[3]) / 2;\n        r[1] = (aabb[1] + aabb[4]) / 2;\n        r[2] = (aabb[2] + aabb[5]) / 2;\n\n        return r;\n    },\n\n    /**\n     * Gets the center of a 2D AABB.\n     *\n     * @private\n     */\n    getAABB2Center(aabb, dest) {\n        const r = dest || math.vec2();\n\n        r[0] = (aabb[2] + aabb[0]) / 2;\n        r[1] = (aabb[3] + aabb[1]) / 2;\n\n        return r;\n    },\n\n    /**\n     * Collapses a 3D axis-aligned boundary, ready to expand to fit 3D points.\n     * Creates new AABB if none supplied.\n     *\n     * @private\n     */\n    collapseAABB3(aabb = math.AABB3()) {\n        aabb[0] = math.MAX_DOUBLE;\n        aabb[1] = math.MAX_DOUBLE;\n        aabb[2] = math.MAX_DOUBLE;\n        aabb[3] = -math.MAX_DOUBLE;\n        aabb[4] = -math.MAX_DOUBLE;\n        aabb[5] = -math.MAX_DOUBLE;\n\n        return aabb;\n    },\n\n    /**\n     * Converts an axis-aligned 3D boundary into an oriented boundary consisting of\n     * an array of eight 3D positions, one for each corner of the boundary.\n     *\n     * @private\n     */\n    AABB3ToOBB3(aabb, obb = math.OBB3()) {\n        obb[0] = aabb[0];\n        obb[1] = aabb[1];\n        obb[2] = aabb[2];\n        obb[3] = 1;\n\n        obb[4] = aabb[3];\n        obb[5] = aabb[1];\n        obb[6] = aabb[2];\n        obb[7] = 1;\n\n        obb[8] = aabb[3];\n        obb[9] = aabb[4];\n        obb[10] = aabb[2];\n        obb[11] = 1;\n\n        obb[12] = aabb[0];\n        obb[13] = aabb[4];\n        obb[14] = aabb[2];\n        obb[15] = 1;\n\n        obb[16] = aabb[0];\n        obb[17] = aabb[1];\n        obb[18] = aabb[5];\n        obb[19] = 1;\n\n        obb[20] = aabb[3];\n        obb[21] = aabb[1];\n        obb[22] = aabb[5];\n        obb[23] = 1;\n\n        obb[24] = aabb[3];\n        obb[25] = aabb[4];\n        obb[26] = aabb[5];\n        obb[27] = 1;\n\n        obb[28] = aabb[0];\n        obb[29] = aabb[4];\n        obb[30] = aabb[5];\n        obb[31] = 1;\n\n        return obb;\n    },\n\n    /**\n     * Finds the minimum axis-aligned 3D boundary enclosing the homogeneous 3D points (x,y,z,w) given in a flattened array.\n     *\n     * @private\n     */\n    positions3ToAABB3: ((() => {\n\n        const p = new FloatArrayType(3);\n\n        return (positions, aabb, positionsDecodeMatrix) => {\n            aabb = aabb || math.AABB3();\n\n            let xmin = math.MAX_DOUBLE;\n            let ymin = math.MAX_DOUBLE;\n            let zmin = math.MAX_DOUBLE;\n            let xmax = -math.MAX_DOUBLE;\n            let ymax = -math.MAX_DOUBLE;\n            let zmax = -math.MAX_DOUBLE;\n\n            let x;\n            let y;\n            let z;\n\n            for (let i = 0, len = positions.length; i < len; i += 3) {\n\n                if (positionsDecodeMatrix) {\n\n                    p[0] = positions[i + 0];\n                    p[1] = positions[i + 1];\n                    p[2] = positions[i + 2];\n\n                    math.decompressPosition(p, positionsDecodeMatrix, p);\n\n                    x = p[0];\n                    y = p[1];\n                    z = p[2];\n\n                } else {\n                    x = positions[i + 0];\n                    y = positions[i + 1];\n                    z = positions[i + 2];\n                }\n\n                if (x < xmin) {\n                    xmin = x;\n                }\n\n                if (y < ymin) {\n                    ymin = y;\n                }\n\n                if (z < zmin) {\n                    zmin = z;\n                }\n\n                if (x > xmax) {\n                    xmax = x;\n                }\n\n                if (y > ymax) {\n                    ymax = y;\n                }\n\n                if (z > zmax) {\n                    zmax = z;\n                }\n            }\n\n            aabb[0] = xmin;\n            aabb[1] = ymin;\n            aabb[2] = zmin;\n            aabb[3] = xmax;\n            aabb[4] = ymax;\n            aabb[5] = zmax;\n\n            return aabb;\n        };\n    }))(),\n\n    /**\n     * Finds the minimum axis-aligned 3D boundary enclosing the homogeneous 3D points (x,y,z,w) given in a flattened array.\n     *\n     * @private\n     */\n    OBB3ToAABB3(obb, aabb = math.AABB3()) {\n        let xmin = math.MAX_DOUBLE;\n        let ymin = math.MAX_DOUBLE;\n        let zmin = math.MAX_DOUBLE;\n        let xmax = -math.MAX_DOUBLE;\n        let ymax = -math.MAX_DOUBLE;\n        let zmax = -math.MAX_DOUBLE;\n\n        let x;\n        let y;\n        let z;\n\n        for (let i = 0, len = obb.length; i < len; i += 4) {\n\n            x = obb[i + 0];\n            y = obb[i + 1];\n            z = obb[i + 2];\n\n            if (x < xmin) {\n                xmin = x;\n            }\n\n            if (y < ymin) {\n                ymin = y;\n            }\n\n            if (z < zmin) {\n                zmin = z;\n            }\n\n            if (x > xmax) {\n                xmax = x;\n            }\n\n            if (y > ymax) {\n                ymax = y;\n            }\n\n            if (z > zmax) {\n                zmax = z;\n            }\n        }\n\n        aabb[0] = xmin;\n        aabb[1] = ymin;\n        aabb[2] = zmin;\n        aabb[3] = xmax;\n        aabb[4] = ymax;\n        aabb[5] = zmax;\n\n        return aabb;\n    },\n\n    /**\n     * Finds the minimum axis-aligned 3D boundary enclosing the given 3D points.\n     *\n     * @private\n     */\n    points3ToAABB3(points, aabb = math.AABB3()) {\n        let xmin = math.MAX_DOUBLE;\n        let ymin = math.MAX_DOUBLE;\n        let zmin = math.MAX_DOUBLE;\n        let xmax = -math.MAX_DOUBLE;\n        let ymax = -math.MAX_DOUBLE;\n        let zmax = -math.MAX_DOUBLE;\n\n        let x;\n        let y;\n        let z;\n\n        for (let i = 0, len = points.length; i < len; i++) {\n\n            x = points[i][0];\n            y = points[i][1];\n            z = points[i][2];\n\n            if (x < xmin) {\n                xmin = x;\n            }\n\n            if (y < ymin) {\n                ymin = y;\n            }\n\n            if (z < zmin) {\n                zmin = z;\n            }\n\n            if (x > xmax) {\n                xmax = x;\n            }\n\n            if (y > ymax) {\n                ymax = y;\n            }\n\n            if (z > zmax) {\n                zmax = z;\n            }\n        }\n\n        aabb[0] = xmin;\n        aabb[1] = ymin;\n        aabb[2] = zmin;\n        aabb[3] = xmax;\n        aabb[4] = ymax;\n        aabb[5] = zmax;\n\n        return aabb;\n    },\n\n    /**\n     * Finds the minimum boundary sphere enclosing the given 3D points.\n     *\n     * @private\n     */\n    points3ToSphere3: ((() => {\n\n        const tempVec3 = new FloatArrayType(3);\n\n        return (points, sphere) => {\n\n            sphere = sphere || math.vec4();\n\n            let x = 0;\n            let y = 0;\n            let z = 0;\n\n            let i;\n            const numPoints = points.length;\n\n            for (i = 0; i < numPoints; i++) {\n                x += points[i][0];\n                y += points[i][1];\n                z += points[i][2];\n            }\n\n            sphere[0] = x / numPoints;\n            sphere[1] = y / numPoints;\n            sphere[2] = z / numPoints;\n\n            let radius = 0;\n            let dist;\n\n            for (i = 0; i < numPoints; i++) {\n\n                dist = Math.abs(math.lenVec3(math.subVec3(points[i], sphere, tempVec3)));\n\n                if (dist > radius) {\n                    radius = dist;\n                }\n            }\n\n            sphere[3] = radius;\n\n            return sphere;\n        };\n    }))(),\n\n    /**\n     * Finds the minimum boundary sphere enclosing the given 3D positions.\n     *\n     * @private\n     */\n    positions3ToSphere3: ((() => {\n\n        const tempVec3a = new FloatArrayType(3);\n        const tempVec3b = new FloatArrayType(3);\n\n        return (positions, sphere) => {\n\n            sphere = sphere || math.vec4();\n\n            let x = 0;\n            let y = 0;\n            let z = 0;\n\n            let i;\n            const lenPositions = positions.length;\n            let radius = 0;\n\n            for (i = 0; i < lenPositions; i += 3) {\n                x += positions[i];\n                y += positions[i + 1];\n                z += positions[i + 2];\n            }\n\n            const numPositions = lenPositions / 3;\n\n            sphere[0] = x / numPositions;\n            sphere[1] = y / numPositions;\n            sphere[2] = z / numPositions;\n\n            let dist;\n\n            for (i = 0; i < lenPositions; i += 3) {\n\n                tempVec3a[0] = positions[i];\n                tempVec3a[1] = positions[i + 1];\n                tempVec3a[2] = positions[i + 2];\n\n                dist = Math.abs(math.lenVec3(math.subVec3(tempVec3a, sphere, tempVec3b)));\n\n                if (dist > radius) {\n                    radius = dist;\n                }\n            }\n\n            sphere[3] = radius;\n\n            return sphere;\n        };\n    }))(),\n\n    /**\n     * Finds the minimum boundary sphere enclosing the given 3D points.\n     *\n     * @private\n     */\n    OBB3ToSphere3: ((() => {\n\n        const point = new FloatArrayType(3);\n        const tempVec3 = new FloatArrayType(3);\n\n        return (points, sphere) => {\n\n            sphere = sphere || math.vec4();\n\n            let x = 0;\n            let y = 0;\n            let z = 0;\n\n            let i;\n            const lenPoints = points.length;\n            const numPoints = lenPoints / 4;\n\n            for (i = 0; i < lenPoints; i += 4) {\n                x += points[i + 0];\n                y += points[i + 1];\n                z += points[i + 2];\n            }\n\n            sphere[0] = x / numPoints;\n            sphere[1] = y / numPoints;\n            sphere[2] = z / numPoints;\n\n            let radius = 0;\n            let dist;\n\n            for (i = 0; i < lenPoints; i += 4) {\n\n                point[0] = points[i + 0];\n                point[1] = points[i + 1];\n                point[2] = points[i + 2];\n\n                dist = Math.abs(math.lenVec3(math.subVec3(point, sphere, tempVec3)));\n\n                if (dist > radius) {\n                    radius = dist;\n                }\n            }\n\n            sphere[3] = radius;\n\n            return sphere;\n        };\n    }))(),\n\n    /**\n     * Gets the center of a bounding sphere.\n     *\n     * @private\n     */\n    getSphere3Center(sphere, dest = math.vec3()) {\n        dest[0] = sphere[0];\n        dest[1] = sphere[1];\n        dest[2] = sphere[2];\n\n        return dest;\n    },\n\n    /**\n     * Expands the first axis-aligned 3D boundary to enclose the second, if required.\n     *\n     * @private\n     */\n    expandAABB3(aabb1, aabb2) {\n\n        if (aabb1[0] > aabb2[0]) {\n            aabb1[0] = aabb2[0];\n        }\n\n        if (aabb1[1] > aabb2[1]) {\n            aabb1[1] = aabb2[1];\n        }\n\n        if (aabb1[2] > aabb2[2]) {\n            aabb1[2] = aabb2[2];\n        }\n\n        if (aabb1[3] < aabb2[3]) {\n            aabb1[3] = aabb2[3];\n        }\n\n        if (aabb1[4] < aabb2[4]) {\n            aabb1[4] = aabb2[4];\n        }\n\n        if (aabb1[5] < aabb2[5]) {\n            aabb1[5] = aabb2[5];\n        }\n\n        return aabb1;\n    },\n\n    /**\n     * Expands an axis-aligned 3D boundary to enclose the given point, if needed.\n     *\n     * @private\n     */\n    expandAABB3Point3(aabb, p) {\n\n        if (aabb[0] > p[0]) {\n            aabb[0] = p[0];\n        }\n\n        if (aabb[1] > p[1]) {\n            aabb[1] = p[1];\n        }\n\n        if (aabb[2] > p[2]) {\n            aabb[2] = p[2];\n        }\n\n        if (aabb[3] < p[0]) {\n            aabb[3] = p[0];\n        }\n\n        if (aabb[4] < p[1]) {\n            aabb[4] = p[1];\n        }\n\n        if (aabb[5] < p[2]) {\n            aabb[5] = p[2];\n        }\n\n        return aabb;\n    },\n\n    /**\n     * Calculates the normal vector of a triangle.\n     *\n     * @private\n     */\n    triangleNormal(a, b, c, normal = math.vec3()) {\n        const p1x = b[0] - a[0];\n        const p1y = b[1] - a[1];\n        const p1z = b[2] - a[2];\n\n        const p2x = c[0] - a[0];\n        const p2y = c[1] - a[1];\n        const p2z = c[2] - a[2];\n\n        const p3x = p1y * p2z - p1z * p2y;\n        const p3y = p1z * p2x - p1x * p2z;\n        const p3z = p1x * p2y - p1y * p2x;\n\n        const mag = Math.sqrt(p3x * p3x + p3y * p3y + p3z * p3z);\n        if (mag === 0) {\n            normal[0] = 0;\n            normal[1] = 0;\n            normal[2] = 0;\n        } else {\n            normal[0] = p3x / mag;\n            normal[1] = p3y / mag;\n            normal[2] = p3z / mag;\n        }\n\n        return normal\n    }\n};\n\nexport {math};","import {math} from \"../../lib/math.js\";\n\nfunction quantizePositions (positions, lenPositions, aabb, quantizedPositions) {\n    const xmin = aabb[0];\n    const ymin = aabb[1];\n    const zmin = aabb[2];\n    const xwid = aabb[3] - xmin;\n    const ywid = aabb[4] - ymin;\n    const zwid = aabb[5] - zmin;\n    const maxInt = 65535;\n    const xMultiplier = maxInt / xwid;\n    const yMultiplier = maxInt / ywid;\n    const zMultiplier = maxInt / zwid;\n    const verify = (num) => num >= 0 ? num : 0;\n    for (let i = 0; i < lenPositions; i += 3) {\n        quantizedPositions[i + 0] = Math.max(0, Math.min(65535,Math.floor(verify(positions[i + 0] - xmin) * xMultiplier)));\n        quantizedPositions[i + 1] = Math.max(0, Math.min(65535,Math.floor(verify(positions[i + 1] - ymin) * yMultiplier)));\n        quantizedPositions[i + 2] = Math.max(0, Math.min(65535,Math.floor(verify(positions[i + 2] - zmin) * zMultiplier)));\n    }\n}\n\nfunction compressPosition(p, aabb, q) {\n    const multiplier = new Float32Array([\n        aabb[3] !== aabb[0] ? 65535 / (aabb[3] - aabb[0]) : 0,\n        aabb[4] !== aabb[1] ? 65535 / (aabb[4] - aabb[1]) : 0,\n        aabb[5] !== aabb[2] ? 65535 / (aabb[5] - aabb[2]) : 0\n    ]);\n    q[0] = Math.max(0, Math.min(65535, Math.floor((p[0] - aabb[0]) * multiplier[0])));\n    q[1] = Math.max(0, Math.min(65535, Math.floor((p[1] - aabb[1]) * multiplier[1])));\n    q[2] = Math.max(0, Math.min(65535, Math.floor((p[2] - aabb[2]) * multiplier[2])));\n}\n\nvar createPositionsDecodeMatrix = (function () {\n    const translate = math.mat4();\n    const scale = math.mat4();\n    return function (aabb, positionsDecodeMatrix) {\n        positionsDecodeMatrix = positionsDecodeMatrix || math.mat4();\n        const xmin = aabb[0];\n        const ymin = aabb[1];\n        const zmin = aabb[2];\n        const xwid = aabb[3] - xmin;\n        const ywid = aabb[4] - ymin;\n        const zwid = aabb[5] - zmin;\n        const maxInt = 65535;\n        math.identityMat4(translate);\n        math.translationMat4v(aabb, translate);\n        math.identityMat4(scale);\n        math.scalingMat4v([xwid / maxInt, ywid / maxInt, zwid / maxInt], scale);\n        math.mulMat4(translate, scale, positionsDecodeMatrix);\n        return positionsDecodeMatrix;\n    };\n})();\n\nfunction transformAndOctEncodeNormals(modelNormalMatrix, normals, lenNormals, compressedNormals, lenCompressedNormals) {\n    // http://jcgt.org/published/0003/02/01/\n    let oct, dec, best, currentCos, bestCos;\n    let i, ei;\n    let localNormal = math.vec3();\n    let worldNormal =  math.vec3();\n    for (i = 0; i < lenNormals; i += 3) {\n        localNormal[0] = normals[i];\n        localNormal[1] = normals[i + 1];\n        localNormal[2] = normals[i + 2];\n\n        math.transformVec3(modelNormalMatrix, localNormal, worldNormal);\n        math.normalizeVec3(worldNormal, worldNormal);\n\n        // Test various combinations of ceil and floor to minimize rounding errors\n        best = oct = octEncodeVec3(worldNormal, 0, \"floor\", \"floor\");\n        dec = octDecodeVec2(oct);\n        currentCos = bestCos = dot(worldNormal, 0, dec);\n        oct = octEncodeVec3(worldNormal, 0, \"ceil\", \"floor\");\n        dec = octDecodeVec2(oct);\n        currentCos = dot(worldNormal, 0, dec);\n        if (currentCos > bestCos) {\n            best = oct;\n            bestCos = currentCos;\n        }\n        oct = octEncodeVec3(worldNormal, 0, \"floor\", \"ceil\");\n        dec = octDecodeVec2(oct);\n        currentCos = dot(worldNormal, 0, dec);\n        if (currentCos > bestCos) {\n            best = oct;\n            bestCos = currentCos;\n        }\n        oct = octEncodeVec3(worldNormal, 0, \"ceil\", \"ceil\");\n        dec = octDecodeVec2(oct);\n        currentCos = dot(worldNormal, 0, dec);\n        if (currentCos > bestCos) {\n            best = oct;\n            bestCos = currentCos;\n        }\n        compressedNormals[lenCompressedNormals + i + 0] = best[0];\n        compressedNormals[lenCompressedNormals + i + 1] = best[1];\n        compressedNormals[lenCompressedNormals + i + 2] = 0.0; // Unused\n    }\n    lenCompressedNormals += lenNormals;\n    return lenCompressedNormals;\n}\n\nfunction octEncodeNormals(normals, lenNormals, compressedNormals, lenCompressedNormals) { // http://jcgt.org/published/0003/02/01/\n    let oct, dec, best, currentCos, bestCos;\n    for (let i = 0; i < lenNormals; i += 3) {\n        // Test various combinations of ceil and floor to minimize rounding errors\n        best = oct = octEncodeVec3(normals, i, \"floor\", \"floor\");\n        dec = octDecodeVec2(oct);\n        currentCos = bestCos = dot(normals, i, dec);\n        oct = octEncodeVec3(normals, i, \"ceil\", \"floor\");\n        dec = octDecodeVec2(oct);\n        currentCos = dot(normals, i, dec);\n        if (currentCos > bestCos) {\n            best = oct;\n            bestCos = currentCos;\n        }\n        oct = octEncodeVec3(normals, i, \"floor\", \"ceil\");\n        dec = octDecodeVec2(oct);\n        currentCos = dot(normals, i, dec);\n        if (currentCos > bestCos) {\n            best = oct;\n            bestCos = currentCos;\n        }\n        oct = octEncodeVec3(normals, i, \"ceil\", \"ceil\");\n        dec = octDecodeVec2(oct);\n        currentCos = dot(normals, i, dec);\n        if (currentCos > bestCos) {\n            best = oct;\n            bestCos = currentCos;\n        }\n        compressedNormals[lenCompressedNormals + i + 0] = best[0];\n        compressedNormals[lenCompressedNormals + i + 1] = best[1];\n        compressedNormals[lenCompressedNormals + i + 2] = 0.0; // Unused\n    }\n    lenCompressedNormals += lenNormals;\n    return lenCompressedNormals;\n}\n\n/**\n * @private\n */\nfunction octEncodeVec3(array, i, xfunc, yfunc) { // Oct-encode single normal vector in 2 bytes\n    let x = array[i] / (Math.abs(array[i]) + Math.abs(array[i + 1]) + Math.abs(array[i + 2]));\n    let y = array[i + 1] / (Math.abs(array[i]) + Math.abs(array[i + 1]) + Math.abs(array[i + 2]));\n    if (array[i + 2] < 0) {\n        let tempx = (1 - Math.abs(y)) * (x >= 0 ? 1 : -1);\n        let tempy = (1 - Math.abs(x)) * (y >= 0 ? 1 : -1);\n        x = tempx;\n        y = tempy;\n    }\n    return new Int8Array([\n        Math[xfunc](x * 127.5 + (x < 0 ? -1 : 0)),\n        Math[yfunc](y * 127.5 + (y < 0 ? -1 : 0))\n    ]);\n}\n\n/**\n * Decode an oct-encoded normal\n */\nfunction octDecodeVec2(oct) {\n    let x = oct[0];\n    let y = oct[1];\n    x /= x < 0 ? 127 : 128;\n    y /= y < 0 ? 127 : 128;\n    const z = 1 - Math.abs(x) - Math.abs(y);\n    if (z < 0) {\n        x = (1 - Math.abs(y)) * (x >= 0 ? 1 : -1);\n        y = (1 - Math.abs(x)) * (y >= 0 ? 1 : -1);\n    }\n    const length = Math.sqrt(x * x + y * y + z * z);\n    return [\n        x / length,\n        y / length,\n        z / length\n    ];\n}\n\n/**\n * Dot product of a normal in an array against a candidate decoding\n * @private\n */\nfunction dot(array, i, vec3) {\n    return array[i] * vec3[0] + array[i + 1] * vec3[1] + array[i + 2] * vec3[2];\n}\n\n/**\n * @private\n */\nconst geometryCompression = {\n    quantizePositions,\n    compressPosition,\n    createPositionsDecodeMatrix,\n    transformAndOctEncodeNormals,\n    octEncodeNormals,\n};\n\nexport {geometryCompression}","/*----------------------------------------------------------------------------------------------------------------------\n * NOTE: The values of these constants must match those within xeokit-sdk\n *--------------------------------------------------------------------------------------------------------------------*/\n\n/**\n * Texture wrapping mode in which the texture repeats to infinity.\n */\nexport const RepeatWrapping = 1000;\n\n/**\n * Texture wrapping mode in which the last pixel of the texture stretches to the edge of the mesh.\n */\nexport const ClampToEdgeWrapping = 1001;\n\n/**\n * Texture wrapping mode in which the texture repeats to infinity, mirroring on each repeat.\n */\nexport const MirroredRepeatWrapping = 1002;\n\n/**\n * Texture magnification and minification filter that returns the nearest texel to the given sample coordinates.\n */\nexport const NearestFilter = 1003;\n\n/**\n * Texture minification filter that chooses the mipmap that most closely matches the size of the pixel being textured and returns the nearest texel to the given sample coordinates.\n */\nexport const NearestMipMapNearestFilter = 1004;\n\n/**\n * Texture minification filter that chooses the mipmap that most closely matches the size of the pixel being textured\n * and returns the nearest texel to the given sample coordinates.\n */\nexport const NearestMipmapNearestFilter = 1004;\n\n/**\n * Texture minification filter that chooses two mipmaps that most closely match the size of the pixel being textured\n * and returns the nearest texel to the center of the pixel at the given sample coordinates.\n */\nexport const NearestMipmapLinearFilter = 1005;\n\n/**\n * Texture minification filter that chooses two mipmaps that most closely match the size of the pixel being textured\n * and returns the nearest texel to the center of the pixel at the given sample coordinates.\n */\nexport const NearestMipMapLinearFilter = 1005;\n\n/**\n * Texture magnification and minification filter that returns the weighted average of the four nearest texels to the given sample coordinates.\n */\nexport const LinearFilter = 1006;\n\n/**\n * Texture minification filter that chooses the mipmap that most closely matches the size of the pixel being textured and\n * returns the weighted average of the four nearest texels to the given sample coordinates.\n */\nexport const LinearMipmapNearestFilter = 1007;\n\n/**\n * Texture minification filter that chooses the mipmap that most closely matches the size of the pixel being textured and\n * returns the weighted average of the four nearest texels to the given sample coordinates.\n */\nexport const LinearMipMapNearestFilter = 1007;\n\n/**\n * Texture minification filter that chooses two mipmaps that most closely match the size of the pixel being textured,\n * finds within each mipmap the weighted average of the nearest texel to the center of the pixel, then returns the\n * weighted average of those two values.\n */\nexport const LinearMipmapLinearFilter = 1008;\n\n/**\n * Texture minification filter that chooses two mipmaps that most closely match the size of the pixel being textured,\n * finds within each mipmap the weighted average of the nearest texel to the center of the pixel, then returns the\n * weighted average of those two values.\n */\nexport const LinearMipMapLinearFilter = 1008;\n\n/**\n * Media type for GIF images.\n */\nexport const GIFMediaType = 10000;\n\n/**\n * Media type for JPEG images.\n */\nexport const JPEGMediaType = 10001;\n\n/**\n * Media type for PNG images.\n */\nexport const PNGMediaType = 10002;","import {math} from \"../../lib/math.js\";\n\n/**\n * @private\n */\nconst buildEdgeIndices = (function () {\n\n    const uniquePositions = [];\n    const indicesLookup = [];\n    const indicesReverseLookup = [];\n    const weldedIndices = [];\n\n// TODO: Optimize with caching, but need to cater to both compressed and uncompressed positions\n\n    const faces = [];\n    let numFaces = 0;\n    const compa = new Uint16Array(3);\n    const compb = new Uint16Array(3);\n    const compc = new Uint16Array(3);\n    const a = math.vec3();\n    const b = math.vec3();\n    const c = math.vec3();\n    const cb = math.vec3();\n    const ab = math.vec3();\n    const cross = math.vec3();\n    const normal = math.vec3();\n    const inverseNormal = math.vec3();\n\n    function weldVertices(positions, indices) {\n        const positionsMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n        let vx;\n        let vy;\n        let vz;\n        let key;\n        const precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n        const precision = Math.pow(10, precisionPoints);\n        let i;\n        let len;\n        let lenUniquePositions = 0;\n        for (i = 0, len = positions.length; i < len; i += 3) {\n            vx = positions[i];\n            vy = positions[i + 1];\n            vz = positions[i + 2];\n            key = Math.round(vx * precision) + '_' + Math.round(vy * precision) + '_' + Math.round(vz * precision);\n            if (positionsMap[key] === undefined) {\n                positionsMap[key] = lenUniquePositions / 3;\n                uniquePositions[lenUniquePositions++] = vx;\n                uniquePositions[lenUniquePositions++] = vy;\n                uniquePositions[lenUniquePositions++] = vz;\n            }\n            indicesLookup[i / 3] = positionsMap[key];\n        }\n        for (i = 0, len = indices.length; i < len; i++) {\n            weldedIndices[i] = indicesLookup[indices[i]];\n            indicesReverseLookup[weldedIndices[i]] = indices[i];\n        }\n    }\n\n    function buildFaces(numIndices, positionsDecodeMatrix) {\n        numFaces = 0;\n        for (let i = 0, len = numIndices; i < len; i += 3) {\n            const ia = ((weldedIndices[i]) * 3);\n            const ib = ((weldedIndices[i + 1]) * 3);\n            const ic = ((weldedIndices[i + 2]) * 3);\n            if (positionsDecodeMatrix) {\n                compa[0] = uniquePositions[ia];\n                compa[1] = uniquePositions[ia + 1];\n                compa[2] = uniquePositions[ia + 2];\n                compb[0] = uniquePositions[ib];\n                compb[1] = uniquePositions[ib + 1];\n                compb[2] = uniquePositions[ib + 2];\n                compc[0] = uniquePositions[ic];\n                compc[1] = uniquePositions[ic + 1];\n                compc[2] = uniquePositions[ic + 2];\n                // Decode\n                math.decompressPosition(compa, positionsDecodeMatrix, a);\n                math.decompressPosition(compb, positionsDecodeMatrix, b);\n                math.decompressPosition(compc, positionsDecodeMatrix, c);\n            } else {\n                a[0] = uniquePositions[ia];\n                a[1] = uniquePositions[ia + 1];\n                a[2] = uniquePositions[ia + 2];\n                b[0] = uniquePositions[ib];\n                b[1] = uniquePositions[ib + 1];\n                b[2] = uniquePositions[ib + 2];\n                c[0] = uniquePositions[ic];\n                c[1] = uniquePositions[ic + 1];\n                c[2] = uniquePositions[ic + 2];\n            }\n            math.subVec3(c, b, cb);\n            math.subVec3(a, b, ab);\n            math.cross3Vec3(cb, ab, cross);\n            math.normalizeVec3(cross, normal);\n            const face = faces[numFaces] || (faces[numFaces] = {normal: math.vec3()});\n            face.normal[0] = normal[0];\n            face.normal[1] = normal[1];\n            face.normal[2] = normal[2];\n            numFaces++;\n        }\n    }\n\n    return function (positions, indices, positionsDecodeMatrix, edgeThreshold) {\n        weldVertices(positions, indices);\n        buildFaces(indices.length, positionsDecodeMatrix);\n        const edgeIndices = [];\n        const thresholdDot = Math.cos(math.DEGTORAD * edgeThreshold);\n        const edges = {};\n        let edge1;\n        let edge2;\n        let index1;\n        let index2;\n        let key;\n        let largeIndex = false;\n        let edge;\n        let normal1;\n        let normal2;\n        let dot;\n        let ia;\n        let ib;\n        for (let i = 0, len = indices.length; i < len; i += 3) {\n            const faceIndex = i / 3;\n            for (let j = 0; j < 3; j++) {\n                edge1 = weldedIndices[i + j];\n                edge2 = weldedIndices[i + ((j + 1) % 3)];\n                index1 = Math.min(edge1, edge2);\n                index2 = Math.max(edge1, edge2);\n                key = index1 + ',' + index2;\n                if (edges[key] === undefined) {\n                    edges[key] = {\n                        index1: index1,\n                        index2: index2,\n                        face1: faceIndex,\n                        face2: undefined,\n                    };\n                } else {\n                    edges[key].face2 = faceIndex;\n                }\n            }\n        }\n        for (key in edges) {\n            edge = edges[key];\n            // an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n            if (edge.face2 !== undefined) {\n                normal1 = faces[edge.face1].normal;\n                normal2 = faces[edge.face2].normal;\n                inverseNormal[0] = -normal2[0];\n                inverseNormal[1] = -normal2[1];\n                inverseNormal[2] = -normal2[2];\n                dot = Math.abs(math.dotVec3(normal1, normal2));\n                const dot2 = Math.abs(math.dotVec3(normal1, inverseNormal));\n                if (dot > thresholdDot && dot2 > thresholdDot) {\n                    continue;\n                }\n            }\n            ia = indicesReverseLookup[edge.index1];\n            ib = indicesReverseLookup[edge.index2];\n            if (!largeIndex && ia > 65535 || ib > 65535) {\n                largeIndex = true;\n            }\n            edgeIndices.push(ia);\n            edgeIndices.push(ib);\n        }\n        return (largeIndex) ? new Uint32Array(edgeIndices) : new Uint16Array(edgeIndices);\n    };\n})();\n\n\nexport {buildEdgeIndices};","/**\n * Uses edge adjacency counts to identify if the given triangle mesh can be rendered with backface culling enabled.\n *\n * If all edges are connected to exactly two triangles, then the mesh will likely be a closed solid, and we can safely\n * render it with backface culling enabled.\n *\n * Otherwise, the mesh is a surface, and we must render it with backface culling disabled.\n *\n * @private\n */\nconst isTriangleMeshSolid = (indices, positions, vertexIndexMapping, edges) => {\n\n    function compareIndexPositions(a, b)\n    {\n        let posA, posB;\n\n        for (let i = 0; i < 3; i++) {\n            posA = positions [a*3+i];\n            posB = positions [b*3+i];\n\n            if (posA !== posB) {\n                return posB - posA;\n            }\n        }\n\n        return 0;\n    };\n\n    // Group together indices corresponding to same position coordinates\n    let newIndices = indices.slice ().sort (compareIndexPositions);\n\n    // Calculate the mapping:\n    // - from original index in indices array\n    // - to indices-for-unique-positions\n    let uniqueVertexIndex = null;\n\n    for (let i = 0, len = newIndices.length; i < len; i++) {\n        if (i == 0 || 0 != compareIndexPositions (\n            newIndices[i],\n            newIndices[i-1],\n        )) {\n            // different position\n            uniqueVertexIndex = newIndices [i];\n        }\n\n        vertexIndexMapping [\n            newIndices[i]\n            ] = uniqueVertexIndex;\n    }\n\n    // Generate the list of edges\n    for (let i = 0, len = indices.length; i < len; i += 3) {\n\n        const a = vertexIndexMapping[indices[i]];\n        const b = vertexIndexMapping[indices[i+1]];\n        const c = vertexIndexMapping[indices[i+2]];\n\n        let a2 = a;\n        let b2 = b;\n        let c2 = c;\n\n        if (a > b && a > c) {\n            if (b > c) {\n                a2 = a;\n                b2 = b;\n                c2 = c;\n            } else {\n                a2 = a;\n                b2 = c;\n                c2 = b;\n            }\n        } else if (b > a && b > c) {\n            if (a > c) {\n                a2 = b;\n                b2 = a;\n                c2 = c;\n            } else {\n                a2 = b;\n                b2 = c;\n                c2 = a;\n            }\n        } else if (c > a && c > b) {\n            if (a > b) {\n                a2 = c;\n                b2 = a;\n                c2 = b;\n            } else {\n                a2 = c;\n                b2 = b;\n                c2 = a;\n            }\n        }\n\n        edges[i+0] = [\n            a2, b2\n        ];\n        edges[i+1] = [\n            b2, c2\n        ];\n\n        if (a2 > c2) {\n            const temp = c2;\n            c2 = a2;\n            a2 = temp;\n        }\n\n        edges[i+2] = [\n            c2, a2\n        ];\n    }\n\n    // Group semantically equivalent edgdes together\n    function compareEdges (e1, e2) {\n        let a, b;\n\n        for (let i = 0; i < 2; i++) {\n            a = e1[i];\n            b = e2[i];\n\n            if (b !== a) {\n                return b - a;\n            }\n        }\n\n        return 0;\n    }\n\n    edges = edges.slice(0, indices.length);\n\n    edges.sort (compareEdges);\n\n    // Make sure each edge is used exactly twice\n    let sameEdgeCount = 0;\n\n    for (let i = 0; i < edges.length; i++)\n    {\n        if (i === 0 || 0 !== compareEdges (\n            edges[i], edges[i-1]\n        )) {\n            // different edge\n            if (0 !== i && sameEdgeCount !== 2)\n            {\n                return false;\n            }\n\n            sameEdgeCount = 1;\n        }\n        else\n        {\n            // same edge\n            sameEdgeCount++;\n        }\n    }\n\n    if (edges.length > 0 && sameEdgeCount !== 2)\n    {\n        return false;\n    }\n\n    // Each edge is used exactly twice, this is a\n    // watertight surface and hence a solid geometry.\n    return true;\n};\n\nexport {isTriangleMeshSolid};","/**\n * Represents the usage of a {@link XKTGeometry} by an {@link XKTEntity}.\n *\n * * Created by {@link XKTModel#createEntity}\n * * Stored in {@link XKTEntity#meshes} and {@link XKTModel#meshesList}\n * * Has an {@link XKTGeometry}, and an optional {@link XKTTextureSet}, both of which it can share with other {@link XKTMesh}es\n * * Has {@link XKTMesh#color}, {@link XKTMesh#opacity}, {@link XKTMesh#metallic} and {@link XKTMesh#roughness} PBR attributes\n * @class XKTMesh\n */\nclass XKTMesh {\n\n    /**\n     * @private\n     */\n    constructor(cfg) {\n\n        /**\n         * Unique ID of this XKTMesh in {@link XKTModel#meshes}.\n         *\n         * @type {Number}\n         */\n        this.meshId = cfg.meshId;\n\n        /**\n         * Index of this XKTMesh in {@link XKTModel#meshesList};\n         *\n         * @type {Number}\n         */\n        this.meshIndex = cfg.meshIndex;\n\n        /**\n         * The 4x4 modeling transform matrix.\n         *\n         * Transform is relative to the center of the {@link XKTTile} that contains this XKTMesh's {@link XKTEntity},\n         * which is given in {@link XKTMesh#entity}.\n         *\n         * When the ````XKTEntity```` shares its {@link XKTGeometry}s with other ````XKTEntity````s, this matrix is used\n         * to transform this XKTMesh's XKTGeometry into World-space. When this XKTMesh does not share its ````XKTGeometry````,\n         * then this matrix is ignored.\n         *\n         * @type {Number[]}\n         */\n        this.matrix = cfg.matrix;\n\n        /**\n         * The instanced {@link XKTGeometry}.\n         *\n         * @type {XKTGeometry}\n         */\n        this.geometry = cfg.geometry;\n\n        /**\n         * RGB color of this XKTMesh.\n         *\n         * @type {Float32Array}\n         */\n        this.color = cfg.color || new Float32Array([1, 1, 1]);\n\n        /**\n         * PBR metallness of this XKTMesh.\n         *\n         * @type {Number}\n         */\n        this.metallic = (cfg.metallic !== null && cfg.metallic !== undefined) ? cfg.metallic : 0;\n\n        /**\n         * PBR roughness of this XKTMesh.\n         * The {@link XKTTextureSet} that defines the appearance of this XKTMesh.\n         *\n         * @type {Number}\n         * @type {XKTTextureSet}\n         */\n        this.roughness = (cfg.roughness !== null && cfg.roughness !== undefined) ? cfg.roughness : 1;\n\n        /**\n         * Opacity of this XKTMesh.\n         *\n         * @type {Number}\n         */\n        this.opacity = (cfg.opacity !== undefined && cfg.opacity !== null) ? cfg.opacity : 1.0;\n\n        /**\n         * The {@link XKTTextureSet} that defines the appearance of this XKTMesh.\n         *\n         * @type {XKTTextureSet}\n         */\n        this.textureSet = cfg.textureSet;\n\n        /**\n         * The owner {@link XKTEntity}.\n         *\n         * Set by {@link XKTModel#createEntity}.\n         *\n         * @type {XKTEntity}\n         */\n        this.entity = null; // Set after instantiation, when the Entity is known\n    }\n}\n\nexport {XKTMesh};","/**\n * An element of reusable geometry within an {@link XKTModel}.\n *\n * * Created by {@link XKTModel#createGeometry}\n * * Stored in {@link XKTModel#geometries} and {@link XKTModel#geometriesList}\n * * Referenced by {@link XKTMesh}s, which belong to {@link XKTEntity}s\n *\n * @class XKTGeometry\n */\nclass XKTGeometry {\n\n    /**\n     * @private\n     * @param {*} cfg Configuration for the XKTGeometry.\n     * @param {Number} cfg.geometryId Unique ID of the geometry in {@link XKTModel#geometries}.\n     * @param {String} cfg.primitiveType Type of this geometry - \"triangles\", \"points\" or \"lines\" so far.\n     * @param {Number} cfg.geometryIndex Index of this XKTGeometry in {@link XKTModel#geometriesList}.\n     * @param {Float64Array} cfg.positions Non-quantized 3D vertex positions.\n     * @param {Float32Array} cfg.normals Non-compressed vertex normals.\n     * @param {Uint8Array} cfg.colorsCompressed Unsigned 8-bit integer RGBA vertex colors.\n     * @param {Float32Array} cfg.uvs Non-compressed vertex UV coordinates.\n     * @param {Uint32Array} cfg.indices Indices to organize the vertex positions and normals into triangles.\n     * @param {Uint32Array} cfg.edgeIndices Indices to organize the vertex positions into edges.\n     */\n    constructor(cfg) {\n\n        /**\n         * Unique ID of this XKTGeometry in {@link XKTModel#geometries}.\n         *\n         * @type {Number}\n         */\n        this.geometryId = cfg.geometryId;\n\n        /**\n         * The type of primitive - \"triangles\" | \"points\" | \"lines\".\n         *\n         * @type {String}\n         */\n        this.primitiveType = cfg.primitiveType;\n\n        /**\n         * Index of this XKTGeometry in {@link XKTModel#geometriesList}.\n         *\n         * @type {Number}\n         */\n        this.geometryIndex = cfg.geometryIndex;\n\n        /**\n         * The number of {@link XKTMesh}s that reference this XKTGeometry.\n         *\n         * @type {Number}\n         */\n        this.numInstances = 0;\n\n        /**\n         * Non-quantized 3D vertex positions.\n         *\n         * Defined for all primitive types.\n         *\n         * @type {Float64Array}\n         */\n        this.positions = cfg.positions;\n\n        /**\n         * Quantized vertex positions.\n         *\n         * Defined for all primitive types.\n         *\n         * This array is later created from {@link XKTGeometry#positions} by {@link XKTModel#finalize}.\n         *\n         * @type {Uint16Array}\n         */\n        this.positionsQuantized = new Uint16Array(cfg.positions.length);\n\n        /**\n         * Non-compressed 3D vertex normals.\n         *\n         * Defined only for triangle primitives. Can be null if we want xeokit to auto-generate them. Ignored for points and lines.\n         *\n         * @type {Float32Array}\n         */\n        this.normals = cfg.normals;\n\n        /**\n         * Compressed vertex normals.\n         *\n         * Defined only for triangle primitives. Ignored for points and lines.\n         *\n         * This array is later created from {@link XKTGeometry#normals} by {@link XKTModel#finalize}.\n         *\n         * Will be null if {@link XKTGeometry#normals} is also null.\n         *\n         * @type {Int8Array}\n         */\n        this.normalsOctEncoded = null;\n\n        /**\n         * Compressed RGBA vertex colors.\n         *\n         * Defined only for point primitives. Ignored for triangles and lines.\n         *\n         * @type {Uint8Array}\n         */\n        this.colorsCompressed = cfg.colorsCompressed;\n\n        /**\n         * Non-compressed vertex UVs.\n         *\n         * @type {Float32Array}\n         */\n        this.uvs = cfg.uvs;\n\n        /**\n         * Compressed vertex UVs.\n         *\n         * @type {Uint16Array}\n         */\n        this.uvsCompressed = cfg.uvsCompressed;\n\n        /**\n         * Indices that organize the vertex positions and normals as triangles.\n         *\n         * Defined only for triangle and lines primitives. Ignored for points.\n         *\n         * @type {Uint32Array}\n         */\n        this.indices = cfg.indices;\n\n        /**\n         * Indices that organize the vertex positions as edges.\n         *\n         * Defined only for triangle primitives. Ignored for points and lines.\n         *\n         * @type {Uint32Array}\n         */\n        this.edgeIndices = cfg.edgeIndices;\n\n        /**\n         * When {@link XKTGeometry#primitiveType} is \"triangles\", this is ````true```` when this geometry is a watertight mesh.\n         *\n         * Defined only for triangle primitives. Ignored for points and lines.\n         *\n         * Set by {@link XKTModel#finalize}.\n         *\n         * @type {boolean}\n         */\n        this.solid = false;\n    }\n\n    /**\n     * Convenience property that is ````true```` when {@link XKTGeometry#numInstances} is greater that one.\n     * @returns {boolean}\n     */\n    get reused() {\n        return (this.numInstances > 1);\n    }\n}\n\nexport {XKTGeometry};","import {math} from \"../lib/math.js\";\n\n/**\n * An object within an {@link XKTModel}.\n *\n * * Created by {@link XKTModel#createEntity}\n * * Stored in {@link XKTModel#entities} and {@link XKTModel#entitiesList}\n * * Has one or more {@link XKTMesh}s, each having an {@link XKTGeometry}\n *\n * @class XKTEntity\n */\nclass XKTEntity {\n\n    /**\n     * @private\n     * @param entityId\n     * @param meshes\n     */\n    constructor(entityId,  meshes) {\n\n        /**\n         * Unique ID of this ````XKTEntity```` in {@link XKTModel#entities}.\n         *\n         * For a BIM model, this will be an IFC product ID.\n         *\n         * We can also use {@link XKTModel#createMetaObject} to create an {@link XKTMetaObject} to specify metadata for\n         * this ````XKTEntity````. To associate the {@link XKTMetaObject} with our {@link XKTEntity}, we give\n         * {@link XKTMetaObject#metaObjectId} the same value as {@link XKTEntity#entityId}.\n         *\n         * @type {String}\n         */\n        this.entityId = entityId;\n\n        /**\n         * Index of this ````XKTEntity```` in {@link XKTModel#entitiesList}.\n         *\n         * Set by {@link XKTModel#finalize}.\n         *\n         * @type {Number}\n         */\n        this.entityIndex = null;\n\n        /**\n         * A list of {@link XKTMesh}s that indicate which {@link XKTGeometry}s are used by this Entity.\n         *\n         * @type {XKTMesh[]}\n         */\n        this.meshes = meshes;\n\n        /**\n         * World-space axis-aligned bounding box (AABB) that encloses the {@link XKTGeometry#positions} of\n         * the {@link XKTGeometry}s that are used by this ````XKTEntity````.\n         *\n         * Set by {@link XKTModel#finalize}.\n         *\n         * @type {Float32Array}\n         */\n        this.aabb = math.AABB3();\n\n        /**\n         * Indicates if this ````XKTEntity```` shares {@link XKTGeometry}s with other {@link XKTEntity}'s.\n         *\n         * Set by {@link XKTModel#finalize}.\n         *\n         * Note that when an ````XKTEntity```` shares ````XKTGeometrys````, it shares **all** of its ````XKTGeometrys````. An ````XKTEntity````\n         * never shares only some of its ````XKTGeometrys```` - it always shares either the whole set or none at all.\n         *\n         * @type {Boolean}\n         */\n        this.hasReusedGeometries = false;\n    }\n}\n\nexport {XKTEntity};","/**\n * @desc A box-shaped 3D region within an {@link XKTModel} that contains {@link XKTEntity}s.\n *\n * * Created by {@link XKTModel#finalize}\n * * Stored in {@link XKTModel#tilesList}\n *\n * @class XKTTile\n */\nclass XKTTile {\n\n    /**\n     * Creates a new XKTTile.\n     *\n     * @private\n     * @param aabb\n     * @param entities\n     */\n    constructor(aabb, entities) {\n\n        /**\n         * Axis-aligned World-space bounding box that encloses the {@link XKTEntity}'s within this Tile.\n         *\n         * @type {Float64Array}\n         */\n        this.aabb = aabb;\n\n        /**\n         * The {@link XKTEntity}'s within this XKTTile.\n         *\n         * @type {XKTEntity[]}\n         */\n        this.entities = entities;\n    }\n}\n\nexport {XKTTile};","/**\n * A kd-Tree node, used internally by {@link XKTModel}.\n *\n * @private\n */\nclass KDNode {\n\n    /**\n     * Create a KDNode with an axis-aligned 3D World-space boundary.\n     */\n    constructor(aabb) {\n\n        /**\n         * The axis-aligned 3D World-space boundary of this KDNode.\n         *\n         * @type {Float64Array}\n         */\n        this.aabb = aabb;\n\n        /**\n         * The {@link XKTEntity}s within this KDNode.\n         */\n        this.entities = null;\n\n        /**\n         * The left child KDNode.\n         */\n        this.left = null;\n\n        /**\n         * The right child KDNode.\n         */\n        this.right = null;\n    }\n}\n\nexport {KDNode};","/**\n * A meta object within an {@link XKTModel}.\n *\n * These are plugged together into a parent-child hierarchy to represent structural\n * metadata for the {@link XKTModel}.\n *\n * The leaf XKTMetaObjects are usually associated with\n * an {@link XKTEntity}, which they do so by sharing the same ID,\n * ie. where {@link XKTMetaObject#metaObjectId} == {@link XKTEntity#entityId}.\n *\n * * Created by {@link XKTModel#createMetaObject}\n * * Stored in {@link XKTModel#metaObjects} and {@link XKTModel#metaObjectsList}\n * * Has an ID, a type, and a human-readable name\n * * May have a parent {@link XKTMetaObject}\n * * When no children, is usually associated with an {@link XKTEntity}\n *\n * @class XKTMetaObject\n */\nclass XKTMetaObject {\n\n    /**\n     * @private\n     * @param metaObjectId\n     * @param propertySetIds\n     * @param metaObjectType\n     * @param metaObjectName\n     * @param parentMetaObjectId\n     */\n    constructor(metaObjectId, propertySetIds, metaObjectType, metaObjectName, parentMetaObjectId) {\n\n        /**\n         * Unique ID of this ````XKTMetaObject```` in {@link XKTModel#metaObjects}.\n         *\n         * For a BIM model, this will be an IFC product ID.\n         *\n         * If this is a leaf XKTMetaObject, where it is not a parent to any other XKTMetaObject,\n         * then this will be equal to the ID of an {@link XKTEntity} in {@link XKTModel#entities},\n         * ie. where {@link XKTMetaObject#metaObjectId} == {@link XKTEntity#entityId}.\n         *\n         * @type {String}\n         */\n        this.metaObjectId = metaObjectId;\n\n        /**\n         * Unique ID of one or more property sets that contains additional metadata about this\n         * {@link XKTMetaObject}. The property sets can be stored in an external system, or\n         * within the {@link XKTModel}, as {@link XKTPropertySet}s within {@link XKTModel#propertySets}.\n         *\n         * @type {String[]}\n         */\n        this.propertySetIds = propertySetIds;\n\n        /**\n         * Indicates the XKTMetaObject meta object type.\n         *\n         * This defaults to \"default\".\n         *\n         * @type {string}\n         */\n        this.metaObjectType = metaObjectType;\n\n        /**\n         * Indicates the XKTMetaObject meta object name.\n         *\n         * This defaults to {@link XKTMetaObject#metaObjectId}.\n         *\n         * @type {string}\n         */\n        this.metaObjectName = metaObjectName;\n\n        /**\n         * The parent XKTMetaObject, if any.\n         *\n         * Will be null if there is no parent.\n         *\n         * @type {String}\n         */\n        this.parentMetaObjectId = parentMetaObjectId;\n    }\n}\n\nexport {XKTMetaObject};","/**\n * A property set within an {@link XKTModel}.\n *\n * These are shared among {@link XKTMetaObject}s.\n *\n * * Created by {@link XKTModel#createPropertySet}\n * * Stored in {@link XKTModel#propertySets} and {@link XKTModel#propertySetsList}\n * * Has an ID, a type, and a human-readable name\n *\n * @class XKTPropertySet\n */\nclass XKTPropertySet {\n\n    /**\n     * @private\n     */\n    constructor(propertySetId, propertySetType, propertySetName, properties) {\n\n        /**\n         * Unique ID of this ````XKTPropertySet```` in {@link XKTModel#propertySets}.\n         *\n         * @type {String}\n         */\n        this.propertySetId = propertySetId;\n\n        /**\n         * Indicates the ````XKTPropertySet````'s type.\n         *\n         * This defaults to \"default\".\n         *\n         * @type {string}\n         */\n        this.propertySetType = propertySetType;\n\n        /**\n         * Indicates the XKTPropertySet meta object name.\n         *\n         * This defaults to {@link XKTPropertySet#propertySetId}.\n         *\n         * @type {string}\n         */\n        this.propertySetName = propertySetName;\n\n        /**\n         * The properties within this ````XKTPropertySet````.\n         *\n         * @type {*[]}\n         */\n        this.properties = properties;\n    }\n}\n\nexport {XKTPropertySet};","/**\n * A texture shared by {@link XKTTextureSet}s.\n *\n * * Created by {@link XKTModel#createTexture}\n * * Stored in {@link XKTTextureSet#textures}, {@link XKTModel#textures} and {@link XKTModel#texturesList}\n *\n * @class XKTTexture\n */\nimport {RepeatWrapping, LinearMipMapNearestFilter} from \"../constants\";\n\nclass XKTTexture {\n\n    /**\n     * @private\n     */\n    constructor(cfg) {\n\n        /**\n         * Unique ID of this XKTTexture in {@link XKTModel#textures}.\n         *\n         * @type {Number}\n         */\n        this.textureId = cfg.textureId;\n\n        /**\n         * Index of this XKTTexture in {@link XKTModel#texturesList};\n         *\n         * @type {Number}\n         */\n        this.textureIndex = cfg.textureIndex;\n\n        /**\n         * Texture image data.\n         *\n         * @type {Buffer}\n         */\n        this.imageData = cfg.imageData;\n\n        /**\n         * Which material channel this texture is applied to, as determined by its {@link XKTTextureSet}s.\n         *\n         * @type {Number}\n         */\n        this.channel = null;\n\n        /**\n         * Width of this XKTTexture.\n         *\n         * @type {Number}\n         */\n        this.width = cfg.width;\n\n        /**\n         * Height of this XKTTexture.\n         *\n         * @type {Number}\n         */\n        this.height = cfg.height;\n\n        /**\n         * Texture file source.\n         *\n         * @type {String}\n         */\n        this.src = cfg.src;\n\n        /**\n         * Whether this XKTTexture is to be compressed.\n         *\n         * @type {Boolean}\n         */\n        this.compressed = (!!cfg.compressed);\n\n        /**\n         * Media type of this XKTTexture.\n         *\n         * Supported values are {@link GIFMediaType}, {@link PNGMediaType} and {@link JPEGMediaType}.\n         *\n         * Ignored for compressed textures.\n         *\n         * @type {Number}\n         */\n        this.mediaType = cfg.mediaType;\n\n        /**\n         * How the texture is sampled when a texel covers less than one pixel. Supported values\n         * are {@link LinearMipmapLinearFilter}, {@link LinearMipMapNearestFilter},\n         * {@link NearestMipMapNearestFilter}, {@link NearestMipMapLinearFilter}\n         * and {@link LinearMipMapLinearFilter}.\n         *\n         * Ignored for compressed textures.\n         *\n         * @type {Number}\n         */\n        this.minFilter = cfg.minFilter || LinearMipMapNearestFilter;\n\n        /**\n         * How the texture is sampled when a texel covers more than one pixel. Supported values\n         * are {@link LinearFilter} and {@link NearestFilter}.\n         *\n         * Ignored for compressed textures.\n         *\n         * @type {Number}\n         */\n        this.magFilter = cfg.magFilter || LinearMipMapNearestFilter;\n\n        /**\n         * S wrapping mode.\n         *\n         * Supported values are {@link ClampToEdgeWrapping},\n         * {@link MirroredRepeatWrapping} and {@link RepeatWrapping}.\n         *\n         * Ignored for compressed textures.\n         *\n         * @type {Number}\n         */\n        this.wrapS = cfg.wrapS || RepeatWrapping;\n\n        /**\n         * T wrapping mode.\n         *\n         * Supported values are {@link ClampToEdgeWrapping},\n         * {@link MirroredRepeatWrapping} and {@link RepeatWrapping}.\n         *\n         * Ignored for compressed textures.\n         *\n         * @type {Number}\n         */\n        this.wrapT = cfg.wrapT || RepeatWrapping;\n\n        /**\n         * R wrapping mode.\n         *\n         * Ignored for compressed textures.\n         *\n         * Supported values are {@link ClampToEdgeWrapping},\n         * {@link MirroredRepeatWrapping} and {@link RepeatWrapping}.\n         *\n         * @type {*|number}\n         */\n        this.wrapR = cfg.wrapR || RepeatWrapping\n    }\n}\n\nexport {XKTTexture};","/**\n * A set of textures shared by {@link XKTMesh}es.\n *\n * * Created by {@link XKTModel#createTextureSet}\n * * Registered in {@link XKTMesh#material}, {@link XKTModel#materials} and {@link XKTModel#.textureSetsList}\n *\n * @class XKTMetalRoughMaterial\n */\nclass XKTTextureSet {\n\n    /**\n     * @private\n     */\n    constructor(cfg) {\n\n        /**\n         * Unique ID of this XKTTextureSet in {@link XKTModel#materials}.\n         *\n         * @type {Number}\n         */\n        this.textureSetId = cfg.textureSetId;\n\n        /**\n         * Index of this XKTTexture in {@link XKTModel#texturesList};\n         *\n         * @type {Number}\n         */\n        this.textureSetIndex = cfg.textureSetIndex;\n\n        /**\n         * Identifies the material type.\n         *\n         * @type {Number}\n         */\n        this.materialType = cfg.materialType;\n\n        /**\n         * Index of this XKTTextureSet in {@link XKTModel#meshesList};\n         *\n         * @type {Number}\n         */\n        this.materialIndex = cfg.materialIndex;\n\n        /**\n         * The number of {@link XKTMesh}s that reference this XKTTextureSet.\n         *\n         * @type {Number}\n         */\n        this.numInstances = 0;\n\n        /**\n         * RGBA {@link XKTTexture} containing base color in RGB and opacity in A.\n         *\n         * @type {XKTTexture}\n         */\n        this.colorTexture = cfg.colorTexture;\n\n        /**\n         * RGBA {@link XKTTexture} containing metallic and roughness factors in R and G.\n         *\n         * @type {XKTTexture}\n         */\n        this.metallicRoughnessTexture = cfg.metallicRoughnessTexture;\n\n        /**\n         * RGBA {@link XKTTexture} with surface normals in RGB.\n         *\n         * @type {XKTTexture}\n         */\n        this.normalsTexture = cfg.normalsTexture;\n\n        /**\n         * RGBA {@link XKTTexture} with emissive color in RGB.\n         *\n         * @type {XKTTexture}\n         */\n        this.emissiveTexture = cfg.emissiveTexture;\n\n        /**\n         * RGBA {@link XKTTexture} with ambient occlusion factors in RGB.\n         *\n         * @type {XKTTexture}\n         */\n        this.occlusionTexture = cfg.occlusionTexture;\n    }\n}\n\nexport {XKTTextureSet};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/core\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/textures\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/images\");","import {math} from \"../lib/math.js\";\nimport {geometryCompression} from \"./lib/geometryCompression.js\";\nimport {buildEdgeIndices} from \"./lib/buildEdgeIndices.js\";\nimport {isTriangleMeshSolid} from \"./lib/isTriangleMeshSolid.js\";\n\nimport {XKTMesh} from './XKTMesh.js';\nimport {XKTGeometry} from './XKTGeometry.js';\nimport {XKTEntity} from './XKTEntity.js';\nimport {XKTTile} from './XKTTile.js';\nimport {KDNode} from \"./KDNode.js\";\nimport {XKTMetaObject} from \"./XKTMetaObject.js\";\nimport {XKTPropertySet} from \"./XKTPropertySet.js\";\nimport {mergeVertices} from \"../lib/mergeVertices.js\";\nimport {XKT_INFO} from \"../XKT_INFO.js\";\nimport {XKTTexture} from \"./XKTTexture\";\nimport {XKTTextureSet} from \"./XKTTextureSet\";\nimport {encode, load} from \"@loaders.gl/core\";\nimport {KTX2BasisWriter} from \"@loaders.gl/textures\";\nimport {ImageLoader} from '@loaders.gl/images';\n\nconst tempVec4a = math.vec4([0, 0, 0, 1]);\nconst tempVec4b = math.vec4([0, 0, 0, 1]);\n\nconst tempMat4 = math.mat4();\nconst tempMat4b = math.mat4();\n\nconst kdTreeDimLength = new Float64Array(3);\n\n// XKT texture types\n\nconst COLOR_TEXTURE = 0;\nconst METALLIC_ROUGHNESS_TEXTURE = 1;\nconst NORMALS_TEXTURE = 2;\nconst EMISSIVE_TEXTURE = 3;\nconst OCCLUSION_TEXTURE = 4;\n\n// KTX2 encoding options for each texture type\n\nconst TEXTURE_ENCODING_OPTIONS = {}\nTEXTURE_ENCODING_OPTIONS[COLOR_TEXTURE] = {\n    useSRGB: true,\n    qualityLevel: 50,\n    encodeUASTC: true,\n    mipmaps: true\n};\nTEXTURE_ENCODING_OPTIONS[EMISSIVE_TEXTURE] = {\n    useSRGB: true,\n    encodeUASTC: true,\n    qualityLevel: 10,\n    mipmaps: false\n};\nTEXTURE_ENCODING_OPTIONS[METALLIC_ROUGHNESS_TEXTURE] = {\n    useSRGB: false,\n    encodeUASTC: true,\n    qualityLevel: 50,\n    mipmaps: true // Needed for GGX roughness shading\n};\nTEXTURE_ENCODING_OPTIONS[NORMALS_TEXTURE] = {\n    useSRGB: false,\n    encodeUASTC: true,\n    qualityLevel: 10,\n    mipmaps: false\n};\nTEXTURE_ENCODING_OPTIONS[OCCLUSION_TEXTURE] = {\n    useSRGB: false,\n    encodeUASTC: true,\n    qualityLevel: 10,\n    mipmaps: false\n};\n\n/**\n * A document model that represents the contents of an .XKT file.\n *\n * * An XKTModel contains {@link XKTTile}s, which spatially subdivide the model into axis-aligned, box-shaped regions.\n * * Each {@link XKTTile} contains {@link XKTEntity}s, which represent the objects within its region.\n * * Each {@link XKTEntity} has {@link XKTMesh}s, which each have a {@link XKTGeometry}. Each {@link XKTGeometry} can be shared by multiple {@link XKTMesh}s.\n * * Import models into an XKTModel using {@link parseGLTFJSONIntoXKTModel}, {@link parseIFCIntoXKTModel}, {@link parseCityJSONIntoXKTModel} etc.\n * * Build an XKTModel programmatically using {@link XKTModel#createGeometry}, {@link XKTModel#createMesh} and {@link XKTModel#createEntity}.\n * * Serialize an XKTModel to an ArrayBuffer using {@link writeXKTModelToArrayBuffer}.\n *\n * ## Usage\n *\n * See [main docs page](/docs/#javascript-api) for usage examples.\n *\n * @class XKTModel\n */\nclass XKTModel {\n\n    /**\n     * Constructs a new XKTModel.\n     *\n     * @param {*} [cfg] Configuration\n     * @param {Number} [cfg.edgeThreshold=10]\n     * @param {Number} [cfg.minTileSize=500]\n     */\n    constructor(cfg = {}) {\n\n        /**\n         * The model's ID, if available.\n         *\n         * Will be \"default\" by default.\n         *\n         * @type {String}\n         */\n        this.modelId = cfg.modelId || \"default\";\n\n        /**\n         * The project ID, if available.\n         *\n         * Will be an empty string by default.\n         *\n         * @type {String}\n         */\n        this.projectId = cfg.projectId || \"\";\n\n        /**\n         * The revision ID, if available.\n         *\n         * Will be an empty string by default.\n         *\n         * @type {String}\n         */\n        this.revisionId = cfg.revisionId || \"\";\n\n        /**\n         * The model author, if available.\n         *\n         * Will be an empty string by default.\n         *\n         * @property author\n         * @type {String}\n         */\n        this.author = cfg.author || \"\";\n\n        /**\n         * The date the model was created, if available.\n         *\n         * Will be an empty string by default.\n         *\n         * @property createdAt\n         * @type {String}\n         */\n        this.createdAt = cfg.createdAt || \"\";\n\n        /**\n         * The application that created the model, if available.\n         *\n         * Will be an empty string by default.\n         *\n         * @property creatingApplication\n         * @type {String}\n         */\n        this.creatingApplication = cfg.creatingApplication || \"\";\n\n        /**\n         * The model schema version, if available.\n         *\n         * In the case of IFC, this could be \"IFC2x3\" or \"IFC4\", for example.\n         *\n         * Will be an empty string by default.\n         *\n         * @property schema\n         * @type {String}\n         */\n        this.schema = cfg.schema || \"\";\n\n        /**\n         * The XKT format version.\n         *\n         * @property xktVersion;\n         * @type {number}\n         */\n        this.xktVersion = XKT_INFO.xktVersion;\n\n        /**\n         *\n         * @type {Number|number}\n         */\n        this.edgeThreshold = cfg.edgeThreshold || 10;\n\n        /**\n         * Minimum diagonal size of the boundary of an {@link XKTTile}.\n         *\n         * @type {Number|number}\n         */\n        this.minTileSize = cfg.minTileSize || 500;\n\n        /**\n         * Optional overall AABB that contains all the {@link XKTEntity}s we'll create in this model, if previously known.\n         *\n         * This is the AABB of a complete set of input files that are provided as a split-model set for conversion.\n         *\n         * This is used to help the {@link XKTTile.aabb}s within split models align neatly with each other, as we\n         * build them with a k-d tree in {@link XKTModel#finalize}.  Without this, the AABBs of the different parts\n         * tend to misalign slightly, resulting in excess number of {@link XKTTile}s, which degrades memory and rendering\n         * performance when the XKT is viewer in the xeokit Viewer.\n         */\n        this.modelAABB = cfg.modelAABB;\n\n        /**\n         * Map of {@link XKTPropertySet}s within this XKTModel, each mapped to {@link XKTPropertySet#propertySetId}.\n         *\n         * Created by {@link XKTModel#createPropertySet}.\n         *\n         * @type {{String:XKTPropertySet}}\n         */\n        this.propertySets = {};\n\n        /**\n         * {@link XKTPropertySet}s within this XKTModel.\n         *\n         * Each XKTPropertySet holds its position in this list in {@link XKTPropertySet#propertySetIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTPropertySet[]}\n         */\n        this.propertySetsList = [];\n\n        /**\n         * Map of {@link XKTMetaObject}s within this XKTModel, each mapped to {@link XKTMetaObject#metaObjectId}.\n         *\n         * Created by {@link XKTModel#createMetaObject}.\n         *\n         * @type {{String:XKTMetaObject}}\n         */\n        this.metaObjects = {};\n\n        /**\n         * {@link XKTMetaObject}s within this XKTModel.\n         *\n         * Each XKTMetaObject holds its position in this list in {@link XKTMetaObject#metaObjectIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTMetaObject[]}\n         */\n        this.metaObjectsList = [];\n\n        /**\n         * The positions of all shared {@link XKTGeometry}s are de-quantized using this singular\n         * de-quantization matrix.\n         *\n         * This de-quantization matrix is generated from the collective Local-space boundary of the\n         * positions of all shared {@link XKTGeometry}s.\n         *\n         * @type {Float32Array}\n         */\n        this.reusedGeometriesDecodeMatrix = new Float32Array(16);\n\n        /**\n         * Map of {@link XKTGeometry}s within this XKTModel, each mapped to {@link XKTGeometry#geometryId}.\n         *\n         * Created by {@link XKTModel#createGeometry}.\n         *\n         * @type {{Number:XKTGeometry}}\n         */\n        this.geometries = {};\n\n        /**\n         * List of {@link XKTGeometry}s within this XKTModel, in the order they were created.\n         *\n         * Each XKTGeometry holds its position in this list in {@link XKTGeometry#geometryIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTGeometry[]}\n         */\n        this.geometriesList = [];\n\n        /**\n         * Map of {@link XKTTexture}s within this XKTModel, each mapped to {@link XKTTexture#textureId}.\n         *\n         * Created by {@link XKTModel#createTexture}.\n         *\n         * @type {{Number:XKTTexture}}\n         */\n        this.textures = {};\n\n        /**\n         * List of {@link XKTTexture}s within this XKTModel, in the order they were created.\n         *\n         * Each XKTTexture holds its position in this list in {@link XKTTexture#textureIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTTexture[]}\n         */\n        this.texturesList = [];\n\n        /**\n         * Map of {@link XKTTextureSet}s within this XKTModel, each mapped to {@link XKTTextureSet#textureSetId}.\n         *\n         * Created by {@link XKTModel#createTextureSet}.\n         *\n         * @type {{Number:XKTTextureSet}}\n         */\n        this.textureSets = {};\n\n        /**\n         * List of {@link XKTTextureSet}s within this XKTModel, in the order they were created.\n         *\n         * Each XKTTextureSet holds its position in this list in {@link XKTTextureSet#textureSetIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTTextureSet[]}\n         */\n        this.textureSetsList = [];\n\n        /**\n         * Map of {@link XKTMesh}s within this XKTModel, each mapped to {@link XKTMesh#meshId}.\n         *\n         * Created by {@link XKTModel#createMesh}.\n         *\n         * @type {{Number:XKTMesh}}\n         */\n        this.meshes = {};\n\n        /**\n         * List of {@link XKTMesh}s within this XKTModel, in the order they were created.\n         *\n         * Each XKTMesh holds its position in this list in {@link XKTMesh#meshIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTMesh[]}\n         */\n        this.meshesList = [];\n\n        /**\n         * Map of {@link XKTEntity}s within this XKTModel, each mapped to {@link XKTEntity#entityId}.\n         *\n         * Created by {@link XKTModel#createEntity}.\n         *\n         * @type {{String:XKTEntity}}\n         */\n        this.entities = {};\n\n        /**\n         * {@link XKTEntity}s within this XKTModel.\n         *\n         * Each XKTEntity holds its position in this list in {@link XKTEntity#entityIndex}.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTEntity[]}\n         */\n        this.entitiesList = [];\n\n        /**\n         * {@link XKTTile}s within this XKTModel.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {XKTTile[]}\n         */\n        this.tilesList = [];\n\n        /**\n         * The axis-aligned 3D World-space boundary of this XKTModel.\n         *\n         * Created by {@link XKTModel#finalize}.\n         *\n         * @type {Float64Array}\n         */\n        this.aabb = math.AABB3();\n\n        /**\n         * Indicates if this XKTModel has been finalized.\n         *\n         * Set ````true```` by {@link XKTModel#finalize}.\n         *\n         * @type {boolean}\n         */\n        this.finalized = false;\n    }\n\n    /**\n     * Creates an {@link XKTPropertySet} within this XKTModel.\n     *\n     * Logs error and does nothing if this XKTModel has been finalized (see {@link XKTModel#finalized}).\n     *\n     * @param {*} params Method parameters.\n     * @param {String} params.propertySetId Unique ID for the {@link XKTPropertySet}.\n     * @param {String} [params.propertySetType=\"default\"] A meta type for the {@link XKTPropertySet}.\n     * @param {String} [params.propertySetName] Human-readable name for the {@link XKTPropertySet}. Defaults to the ````propertySetId```` parameter.\n     * @param {String[]} params.properties Properties for the {@link XKTPropertySet}.\n     * @returns {XKTPropertySet} The new {@link XKTPropertySet}.\n     */\n    createPropertySet(params) {\n\n        if (!params) {\n            throw \"Parameters expected: params\";\n        }\n\n        if (params.propertySetId === null || params.propertySetId === undefined) {\n            throw \"Parameter expected: params.propertySetId\";\n        }\n\n        if (params.properties === null || params.properties === undefined) {\n            throw \"Parameter expected: params.properties\";\n        }\n\n        if (this.finalized) {\n            console.error(\"XKTModel has been finalized, can't add more property sets\");\n            return;\n        }\n\n        if (this.propertySets[params.propertySetId]) {\n            //          console.error(\"XKTPropertySet already exists with this ID: \" + params.propertySetId);\n            return;\n        }\n\n        const propertySetId = params.propertySetId;\n        const propertySetType = params.propertySetType || \"Default\";\n        const propertySetName = params.propertySetName || params.propertySetId;\n        const properties = params.properties || [];\n\n        const propertySet = new XKTPropertySet(propertySetId, propertySetType, propertySetName, properties);\n\n        this.propertySets[propertySetId] = propertySet;\n        this.propertySetsList.push(propertySet);\n\n        return propertySet;\n    }\n\n    /**\n     * Creates an {@link XKTMetaObject} within this XKTModel.\n     *\n     * Logs error and does nothing if this XKTModel has been finalized (see {@link XKTModel#finalized}).\n     *\n     * @param {*} params Method parameters.\n     * @param {String} params.metaObjectId Unique ID for the {@link XKTMetaObject}.\n     * @param {String} params.propertySetIds ID of one or more property sets that contains additional metadata about\n     * this {@link XKTMetaObject}. The property sets could be stored externally (ie not managed at all by the XKT file),\n     * or could be {@link XKTPropertySet}s within {@link XKTModel#propertySets}.\n     * @param {String} [params.metaObjectType=\"default\"] A meta type for the {@link XKTMetaObject}. Can be anything,\n     * but is usually an IFC type, such as \"IfcSite\" or \"IfcWall\".\n     * @param {String} [params.metaObjectName] Human-readable name for the {@link XKTMetaObject}. Defaults to the ````metaObjectId```` parameter.\n     * @param {String} [params.parentMetaObjectId] ID of the parent {@link XKTMetaObject}, if any. Defaults to the ````metaObjectId```` parameter.\n     * @returns {XKTMetaObject} The new {@link XKTMetaObject}.\n     */\n    createMetaObject(params) {\n\n        if (!params) {\n            throw \"Parameters expected: params\";\n        }\n\n        if (params.metaObjectId === null || params.metaObjectId === undefined) {\n            throw \"Parameter expected: params.metaObjectId\";\n        }\n\n        if (this.finalized) {\n            console.error(\"XKTModel has been finalized, can't add more meta objects\");\n            return;\n        }\n\n        if (this.metaObjects[params.metaObjectId]) {\n            //          console.error(\"XKTMetaObject already exists with this ID: \" + params.metaObjectId);\n            return;\n        }\n\n        const metaObjectId = params.metaObjectId;\n        const propertySetIds = params.propertySetIds;\n        const metaObjectType = params.metaObjectType || \"Default\";\n        const metaObjectName = params.metaObjectName || params.metaObjectId;\n        const parentMetaObjectId = params.parentMetaObjectId;\n\n        const metaObject = new XKTMetaObject(metaObjectId, propertySetIds, metaObjectType, metaObjectName, parentMetaObjectId);\n\n        this.metaObjects[metaObjectId] = metaObject;\n        this.metaObjectsList.push(metaObject);\n\n        if (!parentMetaObjectId) {\n            if (!this._rootMetaObject) {\n                this._rootMetaObject = metaObject;\n            }\n        }\n\n        return metaObject;\n    }\n\n    /**\n     * Creates an {@link XKTTexture} within this XKTModel.\n     *\n     * Registers the new {@link XKTTexture} in {@link XKTModel#textures} and {@link XKTModel#texturesList}.\n     *\n     * Logs error and does nothing if this XKTModel has been finalized (see {@link XKTModel#finalized}).\n     *\n     * @param {*} params Method parameters.\n     * @param {Number} params.textureId Unique ID for the {@link XKTTexture}.\n     * @param {String} [params.src] Source of an image file for the texture.\n     * @param {Buffer} [params.imageData] Image data for the texture.\n     * @param {Number} [params.mediaType] Media type (ie. MIME type) of ````imageData````. Supported values are {@link GIFMediaType}, {@link PNGMediaType} and {@link JPEGMediaType}.\n     * @param {Number} [params.width] Texture width, used with ````imageData````. Ignored for compressed textures.\n     * @param {Number} [params.height] Texture height, used with ````imageData````. Ignored for compressed textures.\n     * @param {Boolean} [params.compressed=true] Whether to compress the texture.\n     * @param {Number} [params.minFilter=LinearMipMapNearestFilter] How the texture is sampled when a texel covers less than one pixel. Supported\n     * values are {@link LinearMipmapLinearFilter}, {@link LinearMipMapNearestFilter}, {@link NearestMipMapNearestFilter},\n     * {@link NearestMipMapLinearFilter} and {@link LinearMipMapLinearFilter}. Ignored for compressed textures.\n     * @param {Number} [params.magFilter=LinearMipMapNearestFilter] How the texture is sampled when a texel covers more than one pixel. Supported values\n     * are {@link LinearFilter} and {@link NearestFilter}. Ignored for compressed textures.\n     * @param {Number} [params.wrapS=RepeatWrapping] Wrap parameter for texture coordinate *S*. Supported values are {@link ClampToEdgeWrapping},\n     * {@link MirroredRepeatWrapping} and {@link RepeatWrapping}. Ignored for compressed textures.\n     * @param {Number} [params.wrapT=RepeatWrapping] Wrap parameter for texture coordinate *T*. Supported values are {@link ClampToEdgeWrapping},\n     * {@link MirroredRepeatWrapping} and {@link RepeatWrapping}. Ignored for compressed textures.\n     * {@param {Number} [params.wrapR=RepeatWrapping] Wrap parameter for texture coordinate *R*. Supported values are {@link ClampToEdgeWrapping},\n     * {@link MirroredRepeatWrapping} and {@link RepeatWrapping}. Ignored for compressed textures.\n     * @returns {XKTTexture} The new {@link XKTTexture}.\n     */\n    createTexture(params) {\n\n        if (!params) {\n            throw \"Parameters expected: params\";\n        }\n\n        if (params.textureId === null || params.textureId === undefined) {\n            throw \"Parameter expected: params.textureId\";\n        }\n\n        if (!params.imageData && !params.src) {\n            throw \"Parameter expected: params.imageData or params.src\";\n        }\n\n        if (this.finalized) {\n            console.error(\"XKTModel has been finalized, can't add more textures\");\n            return;\n        }\n\n        if (this.textures[params.textureId]) {\n            console.error(\"XKTTexture already exists with this ID: \" + params.textureId);\n            return;\n        }\n\n        if (params.src) {\n            const fileExt = params.src.split('.').pop();\n            if (fileExt !== \"jpg\" && fileExt !== \"jpeg\" && fileExt !== \"png\") {\n                console.error(`XKTModel does not support image files with extension '${fileExt}' - won't create texture '${params.textureId}`);\n                return;\n            }\n        }\n\n        const textureId = params.textureId;\n\n        const texture = new XKTTexture({\n            textureId,\n            imageData: params.imageData,\n            mediaType: params.mediaType,\n            minFilter: params.minFilter,\n            magFilter: params.magFilter,\n            wrapS: params.wrapS,\n            wrapT: params.wrapT,\n            wrapR: params.wrapR,\n            width: params.width,\n            height: params.height,\n            compressed: (params.compressed !== false),\n            src: params.src\n        });\n\n        this.textures[textureId] = texture;\n        this.texturesList.push(texture);\n\n        return texture;\n    }\n\n    /**\n     * Creates an {@link XKTTextureSet} within this XKTModel.\n     *\n     * Registers the new {@link XKTTextureSet} in {@link XKTModel#textureSets} and {@link XKTModel#.textureSetsList}.\n     *\n     * Logs error and does nothing if this XKTModel has been finalized (see {@link XKTModel#finalized}).\n     *\n     * @param {*} params Method parameters.\n     * @param {Number} params.textureSetId Unique ID for the {@link XKTTextureSet}.\n     * @param {*} [params.colorTextureId] ID of *RGBA* base color {@link XKTTexture}, with color in *RGB* and alpha in *A*.\n     * @param {*} [params.metallicRoughnessTextureId] ID of *RGBA* metal-roughness {@link XKTTexture}, with the metallic factor in *R*, and roughness factor in *G*.\n     * @param {*} [params.normalsTextureId] ID of *RGBA* normal {@link XKTTexture}, with normal map vectors in *RGB*.\n     * @param {*} [params.emissiveTextureId] ID of *RGBA* emissive {@link XKTTexture}, with emissive color in *RGB*.\n     * @param {*} [params.occlusionTextureId] ID of *RGBA* occlusion {@link XKTTexture}, with occlusion factor in *R*.\n     * @returns {XKTTextureSet} The new {@link XKTTextureSet}.\n     */\n    createTextureSet(params) {\n\n        if (!params) {\n            throw \"Parameters expected: params\";\n        }\n\n        if (params.textureSetId === null || params.textureSetId === undefined) {\n            throw \"Parameter expected: params.textureSetId\";\n        }\n\n        if (this.finalized) {\n            console.error(\"XKTModel has been finalized, can't add more textureSets\");\n            return;\n        }\n\n        if (this.textureSets[params.textureSetId]) {\n            console.error(\"XKTTextureSet already exists with this ID: \" + params.textureSetId);\n            return;\n        }\n\n        let colorTexture;\n        if (params.colorTextureId !== undefined && params.colorTextureId !== null) {\n            colorTexture = this.textures[params.colorTextureId];\n            if (!colorTexture) {\n                console.error(`Texture not found: ${params.colorTextureId} - ensure that you create it first with createTexture()`);\n                return;\n            }\n            colorTexture.channel = COLOR_TEXTURE;\n        }\n\n        let metallicRoughnessTexture;\n        if (params.metallicRoughnessTextureId !== undefined && params.metallicRoughnessTextureId !== null) {\n            metallicRoughnessTexture = this.textures[params.metallicRoughnessTextureId];\n            if (!metallicRoughnessTexture) {\n                console.error(`Texture not found: ${params.metallicRoughnessTextureId} - ensure that you create it first with createTexture()`);\n                return;\n            }\n            metallicRoughnessTexture.channel = METALLIC_ROUGHNESS_TEXTURE;\n        }\n\n        let normalsTexture;\n        if (params.normalsTextureId !== undefined && params.normalsTextureId !== null) {\n            normalsTexture = this.textures[params.normalsTextureId];\n            if (!normalsTexture) {\n                console.error(`Texture not found: ${params.normalsTextureId} - ensure that you create it first with createTexture()`);\n                return;\n            }\n            normalsTexture.channel = NORMALS_TEXTURE;\n        }\n\n        let emissiveTexture;\n        if (params.emissiveTextureId !== undefined && params.emissiveTextureId !== null) {\n            emissiveTexture = this.textures[params.emissiveTextureId];\n            if (!emissiveTexture) {\n                console.error(`Texture not found: ${params.emissiveTextureId} - ensure that you create it first with createTexture()`);\n                return;\n            }\n            emissiveTexture.channel = EMISSIVE_TEXTURE;\n        }\n\n        let occlusionTexture;\n        if (params.occlusionTextureId !== undefined && params.occlusionTextureId !== null) {\n            occlusionTexture = this.textures[params.occlusionTextureId];\n            if (!occlusionTexture) {\n                console.error(`Texture not found: ${params.occlusionTextureId} - ensure that you create it first with createTexture()`);\n                return;\n            }\n            occlusionTexture.channel = OCCLUSION_TEXTURE;\n        }\n\n        const textureSet = new XKTTextureSet({\n            textureSetId: params.textureSetId,\n            textureSetIndex: this.textureSetsList.length,\n            colorTexture,\n            metallicRoughnessTexture,\n            normalsTexture,\n            emissiveTexture,\n            occlusionTexture\n        });\n\n        this.textureSets[params.textureSetId] = textureSet;\n        this.textureSetsList.push(textureSet);\n\n        return textureSet;\n    }\n\n    /**\n     * Creates an {@link XKTGeometry} within this XKTModel.\n     *\n     * Registers the new {@link XKTGeometry} in {@link XKTModel#geometries} and {@link XKTModel#geometriesList}.\n     *\n     * Logs error and does nothing if this XKTModel has been finalized (see {@link XKTModel#finalized}).\n     *\n     * @param {*} params Method parameters.\n     * @param {Number} params.geometryId Unique ID for the {@link XKTGeometry}.\n     * @param {String} params.primitiveType The type of {@link XKTGeometry}: \"triangles\", \"lines\" or \"points\".\n     * @param {Float64Array} params.positions Floating-point Local-space vertex positions for the {@link XKTGeometry}. Required for all primitive types.\n     * @param {Number[]} [params.normals] Floating-point vertex normals for the {@link XKTGeometry}. Only used with triangles primitives. Ignored for points and lines.\n     * @param {Number[]} [params.colors] Floating-point RGBA vertex colors for the {@link XKTGeometry}. Required for points primitives. Ignored for lines and triangles.\n     * @param {Number[]} [params.colorsCompressed] Integer RGBA vertex colors for the {@link XKTGeometry}. Required for points primitives. Ignored for lines and triangles.\n     * @param {Number[]} [params.uvs] Floating-point vertex UV coordinates for the {@link XKTGeometry}. Alias for ````uv````.\n     * @param {Number[]} [params.uv] Floating-point vertex UV coordinates for the {@link XKTGeometry}. Alias for ````uvs````.\n     * @param {Number[]} [params.colorsCompressed] Integer RGBA vertex colors for the {@link XKTGeometry}. Required for points primitives. Ignored for lines and triangles.\n     * @param {Uint32Array} [params.indices] Indices for the {@link XKTGeometry}. Required for triangles and lines primitives. Ignored for points.\n     * @param {Number} [params.edgeThreshold=10]\n     * @returns {XKTGeometry} The new {@link XKTGeometry}.\n     */\n    createGeometry(params) {\n\n        if (!params) {\n            throw \"Parameters expected: params\";\n        }\n\n        if (params.geometryId === null || params.geometryId === undefined) {\n            throw \"Parameter expected: params.geometryId\";\n        }\n\n        if (!params.primitiveType) {\n            throw \"Parameter expected: params.primitiveType\";\n        }\n\n        if (!params.positions) {\n            throw \"Parameter expected: params.positions\";\n        }\n\n        const triangles = params.primitiveType === \"triangles\";\n        const points = params.primitiveType === \"points\";\n        const lines = params.primitiveType === \"lines\";\n        const line_strip = params.primitiveType === \"line-strip\";\n        const line_loop = params.primitiveType === \"line-loop\";\n        const triangle_strip = params.primitiveType === \"triangle-strip\";\n        const triangle_fan = params.primitiveType === \"triangle-fan\";\n\n        if (!triangles && !points && !lines && !line_strip && !line_loop) {\n            throw \"Unsupported value for params.primitiveType: \"\n            + params.primitiveType\n            + \"' - supported values are 'triangles', 'points', 'lines', 'line-strip', 'triangle-strip' and 'triangle-fan\";\n        }\n\n        if (triangles) {\n            if (!params.indices) {\n                params.indices = this._createDefaultIndices()\n                throw \"Parameter expected for 'triangles' primitive: params.indices\";\n            }\n        }\n\n        if (points) {\n            if (!params.colors && !params.colorsCompressed) {\n                throw \"Parameter expected for 'points' primitive: params.colors or params.colorsCompressed\";\n            }\n        }\n\n        if (lines) {\n            if (!params.indices) {\n                throw \"Parameter expected for 'lines' primitive: params.indices\";\n            }\n        }\n\n        if (this.finalized) {\n            console.error(\"XKTModel has been finalized, can't add more geometries\");\n            return;\n        }\n\n        if (this.geometries[params.geometryId]) {\n            console.error(\"XKTGeometry already exists with this ID: \" + params.geometryId);\n            return;\n        }\n\n        const geometryId = params.geometryId;\n        const primitiveType = params.primitiveType;\n        const positions = new Float64Array(params.positions); // May modify in #finalize\n\n        const xktGeometryCfg = {\n            geometryId: geometryId,\n            geometryIndex: this.geometriesList.length,\n            primitiveType: primitiveType,\n            positions: positions,\n            uvs: params.uvs || params.uv\n        }\n\n        if (triangles) {\n            if (params.normals) {\n                xktGeometryCfg.normals = new Float32Array(params.normals);\n            }\n            if (params.indices) {\n                xktGeometryCfg.indices = params.indices;\n            } else {\n                xktGeometryCfg.indices = this._createDefaultIndices(positions.length / 3);\n            }\n        }\n\n        if (points) {\n            if (params.colorsCompressed) {\n                xktGeometryCfg.colorsCompressed = new Uint8Array(params.colorsCompressed);\n\n            } else {\n                const colors = params.colors;\n                const colorsCompressed = new Uint8Array(colors.length);\n                for (let i = 0, len = colors.length; i < len; i++) {\n                    colorsCompressed[i] = Math.floor(colors[i] * 255);\n                }\n                xktGeometryCfg.colorsCompressed = colorsCompressed;\n            }\n        }\n\n        if (lines) {\n            xktGeometryCfg.indices = params.indices;\n        }\n\n        if (triangles) {\n\n            if (!params.normals && !params.uv && !params.uvs) {\n\n                // Building models often duplicate positions to allow face-aligned vertex normals; when we're not\n                // providing normals for a geometry, it becomes possible to merge duplicate vertex positions within it.\n\n                // TODO: Make vertex merging also merge normals?\n\n                const mergedPositions = [];\n                const mergedIndices = [];\n                mergeVertices(xktGeometryCfg.positions, xktGeometryCfg.indices, mergedPositions, mergedIndices);\n                xktGeometryCfg.positions = new Float64Array(mergedPositions);\n                xktGeometryCfg.indices = mergedIndices;\n            }\n\n            xktGeometryCfg.edgeIndices = buildEdgeIndices(xktGeometryCfg.positions, xktGeometryCfg.indices, null, params.edgeThreshold || this.edgeThreshold || 10);\n        }\n\n        const geometry = new XKTGeometry(xktGeometryCfg);\n\n        this.geometries[geometryId] = geometry;\n        this.geometriesList.push(geometry);\n\n        return geometry;\n    }\n\n    _createDefaultIndices(numIndices) {\n        const indices = [];\n        for (let i = 0; i < numIndices; i++) {\n            indices.push(i);\n        }\n        return indices;\n    }\n\n    /**\n     * Creates an {@link XKTMesh} within this XKTModel.\n     *\n     * An {@link XKTMesh} can be owned by one {@link XKTEntity}, which can own multiple {@link XKTMesh}es.\n     *\n     * Registers the new {@link XKTMesh} in {@link XKTModel#meshes} and {@link XKTModel#meshesList}.\n     *\n     * @param {*} params Method parameters.\n     * @param {Number} params.meshId Unique ID for the {@link XKTMesh}.\n     * @param {Number} params.geometryId ID of an existing {@link XKTGeometry} in {@link XKTModel#geometries}.\n     * @param {Number} [params.textureSetId] Unique ID of an {@link XKTTextureSet} in {@link XKTModel#textureSets}.\n     * @param {Float32Array} params.color RGB color for the {@link XKTMesh}, with each color component in range [0..1].\n     * @param {Number} [params.metallic=0] How metallic the {@link XKTMesh} is, in range [0..1]. A value of ````0```` indicates fully dielectric material, while ````1```` indicates fully metallic.\n     * @param {Number} [params.roughness=1] How rough the {@link XKTMesh} is, in range [0..1]. A value of ````0```` indicates fully smooth, while ````1```` indicates fully rough.\n     * @param {Number} params.opacity Opacity factor for the {@link XKTMesh}, in range [0..1].\n     * @param {Float64Array} [params.matrix] Modeling matrix for the {@link XKTMesh}. Overrides ````position````, ````scale```` and ````rotation```` parameters.\n     * @param {Number[]} [params.position=[0,0,0]] Position of the {@link XKTMesh}. Overridden by the ````matrix```` parameter.\n     * @param {Number[]} [params.scale=[1,1,1]] Scale of the {@link XKTMesh}. Overridden by the ````matrix```` parameter.\n     * @param {Number[]} [params.rotation=[0,0,0]] Rotation of the {@link XKTMesh} as Euler angles given in degrees, for each of the X, Y and Z axis. Overridden by the ````matrix```` parameter.\n     * @returns {XKTMesh} The new {@link XKTMesh}.\n     */\n    createMesh(params) {\n\n        if (params.meshId === null || params.meshId === undefined) {\n            throw \"Parameter expected: params.meshId\";\n        }\n\n        if (params.geometryId === null || params.geometryId === undefined) {\n            throw \"Parameter expected: params.geometryId\";\n        }\n\n        if (this.finalized) {\n            throw \"XKTModel has been finalized, can't add more meshes\";\n        }\n\n        if (this.meshes[params.meshId]) {\n            console.error(\"XKTMesh already exists with this ID: \" + params.meshId);\n            return;\n        }\n\n        const geometry = this.geometries[params.geometryId];\n\n        if (!geometry) {\n            console.error(\"XKTGeometry not found: \" + params.geometryId);\n            return;\n        }\n\n        geometry.numInstances++;\n\n        let textureSet = null;\n        if (params.textureSetId) {\n            textureSet = this.textureSets[params.textureSetId];\n            if (!textureSet) {\n                console.error(\"XKTTextureSet not found: \" + params.textureSetId);\n                return;\n            }\n            textureSet.numInstances++;\n        }\n\n        let matrix = params.matrix;\n\n        if (!matrix) {\n\n            const position = params.position;\n            const scale = params.scale;\n            const rotation = params.rotation;\n\n            if (position || scale || rotation) {\n                matrix = math.identityMat4();\n                const quaternion = math.eulerToQuaternion(rotation || [0, 0, 0], \"XYZ\", math.identityQuaternion());\n                math.composeMat4(position || [0, 0, 0], quaternion, scale || [1, 1, 1], matrix)\n\n            } else {\n                matrix = math.identityMat4();\n            }\n        }\n\n        const meshIndex = this.meshesList.length;\n\n        const mesh = new XKTMesh({\n            meshId: params.meshId,\n            meshIndex,\n            matrix,\n            geometry,\n            color: params.color,\n            metallic: params.metallic,\n            roughness: params.roughness,\n            opacity: params.opacity,\n            textureSet\n        });\n\n        this.meshes[mesh.meshId] = mesh;\n        this.meshesList.push(mesh);\n\n        return mesh;\n    }\n\n    /**\n     * Creates an {@link XKTEntity} within this XKTModel.\n     *\n     * Registers the new {@link XKTEntity} in {@link XKTModel#entities} and {@link XKTModel#entitiesList}.\n     *\n     * Logs error and does nothing if this XKTModel has been finalized (see {@link XKTModel#finalized}).\n     *\n     * @param {*} params Method parameters.\n     * @param {String} params.entityId Unique ID for the {@link XKTEntity}.\n     * @param {String[]} params.meshIds IDs of {@link XKTMesh}es used by the {@link XKTEntity}. Note that each {@link XKTMesh} can only be used by one {@link XKTEntity}.\n     * @returns {XKTEntity} The new {@link XKTEntity}.\n     */\n    createEntity(params) {\n\n        if (!params) {\n            throw \"Parameters expected: params\";\n        }\n\n        if (params.entityId === null || params.entityId === undefined) {\n            throw \"Parameter expected: params.entityId\";\n        }\n\n        if (!params.meshIds) {\n            throw \"Parameter expected: params.meshIds\";\n        }\n\n        if (this.finalized) {\n            console.error(\"XKTModel has been finalized, can't add more entities\");\n            return;\n        }\n\n        if (params.meshIds.length === 0) {\n            console.warn(\"XKTEntity has no meshes - won't create: \" + params.entityId);\n            return;\n        }\n\n        let entityId = params.entityId;\n\n        if (this.entities[entityId]) {\n            while (this.entities[entityId]) {\n                entityId = math.createUUID();\n            }\n            console.error(\"XKTEntity already exists with this ID: \" + params.entityId + \" - substituting random ID instead: \" + entityId);\n        }\n\n        const meshIds = params.meshIds;\n        const meshes = [];\n\n        for (let meshIdIdx = 0, meshIdLen = meshIds.length; meshIdIdx < meshIdLen; meshIdIdx++) {\n\n            const meshId = meshIds[meshIdIdx];\n            const mesh = this.meshes[meshId];\n\n            if (!mesh) {\n                console.error(\"XKTMesh found: \" + meshId);\n                continue;\n            }\n\n            if (mesh.entity) {\n                console.error(\"XKTMesh \" + meshId + \" already used by XKTEntity \" + mesh.entity.entityId);\n                continue;\n            }\n\n            meshes.push(mesh);\n        }\n\n        const entity = new XKTEntity(entityId, meshes);\n\n        for (let i = 0, len = meshes.length; i < len; i++) {\n            const mesh = meshes[i];\n            mesh.entity = entity;\n        }\n\n        this.entities[entityId] = entity;\n        this.entitiesList.push(entity);\n\n        return entity;\n    }\n\n    /**\n     * Creates a default {@link XKTMetaObject} for each {@link XKTEntity} that does not already have one.\n     */\n    createDefaultMetaObjects() {\n\n        for (let i = 0, len = this.entitiesList.length; i < len; i++) {\n\n            const entity = this.entitiesList[i];\n            const metaObjectId = entity.entityId;\n            const metaObject = this.metaObjects[metaObjectId];\n\n            if (!metaObject) {\n\n                if (!this._rootMetaObject) {\n                    this._rootMetaObject = this.createMetaObject({\n                        metaObjectId: this.modelId,\n                        metaObjectType: \"Default\",\n                        metaObjectName: this.modelId\n                    });\n                }\n\n                this.createMetaObject({\n                    metaObjectId: metaObjectId,\n                    metaObjectType: \"Default\",\n                    metaObjectName: \"\" + metaObjectId,\n                    parentMetaObjectId: this._rootMetaObject.metaObjectId\n                });\n            }\n        }\n    }\n\n    /**\n     * Finalizes this XKTModel.\n     *\n     * After finalizing, we may then serialize the model to an array buffer using {@link writeXKTModelToArrayBuffer}.\n     *\n     * Logs error and does nothing if this XKTModel has already been finalized.\n     *\n     * Internally, this method:\n     *\n     * * for each {@link XKTEntity} that doesn't already have a {@link XKTMetaObject}, creates one with {@link XKTMetaObject#metaObjectType} set to \"default\"\n     * * sets each {@link XKTEntity}'s {@link XKTEntity#hasReusedGeometries} true if it shares its {@link XKTGeometry}s with other {@link XKTEntity}s,\n     * * creates each {@link XKTEntity}'s {@link XKTEntity#aabb},\n     * * creates {@link XKTTile}s in {@link XKTModel#tilesList}, and\n     * * sets {@link XKTModel#finalized} ````true````.\n     */\n    async finalize() {\n\n        if (this.finalized) {\n            console.log(\"XKTModel already finalized\");\n            return;\n        }\n\n        this._removeUnusedTextures();\n\n        await this._compressTextures();\n\n        this._bakeSingleUseGeometryPositions();\n\n        this._bakeAndOctEncodeNormals();\n\n        this._createEntityAABBs();\n\n        const rootKDNode = this._createKDTree();\n\n        this.entitiesList = [];\n\n        this._createTilesFromKDTree(rootKDNode);\n\n        this._createReusedGeometriesDecodeMatrix();\n\n        this._flagSolidGeometries();\n\n        this.aabb.set(rootKDNode.aabb);\n\n        this.finalized = true;\n    }\n\n    _removeUnusedTextures() {\n        let texturesList = [];\n        const textures = {};\n        for (let i = 0, leni = this.texturesList.length; i < leni; i++) {\n            const texture = this.texturesList[i];\n            if (texture.channel !== null) {\n                texture.textureIndex = texturesList.length;\n                texturesList.push(texture);\n                textures[texture.textureId] = texture;\n            }\n        }\n        this.texturesList = texturesList;\n        this.textures = textures;\n    }\n\n    _compressTextures() {\n        let countTextures = this.texturesList.length;\n        return new Promise((resolve) => {\n            if (countTextures === 0) {\n                resolve();\n                return;\n            }\n            for (let i = 0, leni = this.texturesList.length; i < leni; i++) {\n                const texture = this.texturesList[i];\n                const encodingOptions = TEXTURE_ENCODING_OPTIONS[texture.channel] || {};\n\n                if (texture.src) {\n\n                    // XKTTexture created with XKTModel#createTexture({ src: ... })\n\n                    const src = texture.src;\n                    const fileExt = src.split('.').pop();\n                    switch (fileExt) {\n                        case \"jpeg\":\n                        case \"jpg\":\n                        case \"png\":\n                            load(src, ImageLoader, {\n                                image: {\n                                    type: \"data\"\n                                }\n                            }).then((imageData) => {\n                                if (texture.compressed) {\n                                    encode(imageData, KTX2BasisWriter, encodingOptions).then((encodedData) => {\n                                        const encodedImageData = new Uint8Array(encodedData);\n                                        texture.imageData = encodedImageData;\n                                        if (--countTextures <= 0) {\n                                            resolve();\n                                        }\n                                    }).catch((err) => {\n                                        console.error(\"[XKTModel.finalize] Failed to encode image: \" + err);\n                                        if (--countTextures <= 0) {\n                                            resolve();\n                                        }\n                                    });\n                                } else {\n                                    texture.imageData = new Uint8Array(1);\n                                    if (--countTextures <= 0) {\n                                        resolve();\n                                    }\n                                }\n                            }).catch((err) => {\n                                console.error(\"[XKTModel.finalize] Failed to load image: \" + err);\n                                if (--countTextures <= 0) {\n                                    resolve();\n                                }\n                            });\n                            break;\n                        default:\n                            if (--countTextures <= 0) {\n                                resolve();\n                            }\n                            break;\n                    }\n                }\n\n                if (texture.imageData) {\n\n                    // XKTTexture created with XKTModel#createTexture({ imageData: ... })\n\n                    if (texture.compressed) {\n                        encode(texture.imageData, KTX2BasisWriter, encodingOptions)\n                            .then((encodedImageData) => {\n                                texture.imageData = new Uint8Array(encodedImageData);\n                                if (--countTextures <= 0) {\n                                    resolve();\n                                }\n                            }).catch((err) => {\n                            console.error(\"[XKTModel.finalize] Failed to encode image: \" + err);\n                            if (--countTextures <= 0) {\n                                resolve();\n                            }\n                        });\n                    } else {\n                        texture.imageData = new Uint8Array(1);\n                        if (--countTextures <= 0) {\n                            resolve();\n                        }\n                    }\n                }\n            }\n        });\n    }\n\n    _bakeSingleUseGeometryPositions() {\n\n        for (let j = 0, lenj = this.meshesList.length; j < lenj; j++) {\n\n            const mesh = this.meshesList[j];\n\n            const geometry = mesh.geometry;\n\n            if (geometry.numInstances === 1) {\n\n                const matrix = mesh.matrix;\n\n                if (matrix && (!math.isIdentityMat4(matrix))) {\n\n                    const positions = geometry.positions;\n\n                    for (let i = 0, len = positions.length; i < len; i += 3) {\n\n                        tempVec4a[0] = positions[i + 0];\n                        tempVec4a[1] = positions[i + 1];\n                        tempVec4a[2] = positions[i + 2];\n                        tempVec4a[3] = 1;\n\n                        math.transformPoint4(matrix, tempVec4a, tempVec4b);\n\n                        positions[i + 0] = tempVec4b[0];\n                        positions[i + 1] = tempVec4b[1];\n                        positions[i + 2] = tempVec4b[2];\n                    }\n                }\n            }\n        }\n    }\n\n    _bakeAndOctEncodeNormals() {\n\n        for (let i = 0, len = this.meshesList.length; i < len; i++) {\n\n            const mesh = this.meshesList[i];\n            const geometry = mesh.geometry;\n\n            if (geometry.normals && !geometry.normalsOctEncoded) {\n\n                geometry.normalsOctEncoded = new Int8Array(geometry.normals.length);\n\n                if (geometry.numInstances > 1) {\n                    geometryCompression.octEncodeNormals(geometry.normals, geometry.normals.length, geometry.normalsOctEncoded, 0);\n\n                } else {\n                    const modelNormalMatrix = math.inverseMat4(math.transposeMat4(mesh.matrix, tempMat4), tempMat4b);\n                    geometryCompression.transformAndOctEncodeNormals(modelNormalMatrix, geometry.normals, geometry.normals.length, geometry.normalsOctEncoded, 0);\n                }\n            }\n        }\n    }\n\n    _createEntityAABBs() {\n\n        for (let i = 0, len = this.entitiesList.length; i < len; i++) {\n\n            const entity = this.entitiesList[i];\n            const entityAABB = entity.aabb;\n            const meshes = entity.meshes;\n\n            math.collapseAABB3(entityAABB);\n\n            for (let j = 0, lenj = meshes.length; j < lenj; j++) {\n\n                const mesh = meshes[j];\n                const geometry = mesh.geometry;\n                const matrix = mesh.matrix;\n\n                if (geometry.numInstances > 1) {\n\n                    const positions = geometry.positions;\n                    for (let i = 0, len = positions.length; i < len; i += 3) {\n                        tempVec4a[0] = positions[i + 0];\n                        tempVec4a[1] = positions[i + 1];\n                        tempVec4a[2] = positions[i + 2];\n                        tempVec4a[3] = 1;\n                        math.transformPoint4(matrix, tempVec4a, tempVec4b);\n                        math.expandAABB3Point3(entityAABB, tempVec4b);\n                    }\n\n                } else {\n\n                    const positions = geometry.positions;\n                    for (let i = 0, len = positions.length; i < len; i += 3) {\n                        tempVec4a[0] = positions[i + 0];\n                        tempVec4a[1] = positions[i + 1];\n                        tempVec4a[2] = positions[i + 2];\n                        math.expandAABB3Point3(entityAABB, tempVec4a);\n                    }\n                }\n            }\n        }\n    }\n\n    _createKDTree() {\n\n        let aabb;\n        if (this.modelAABB) {\n            aabb = this.modelAABB; // Pre-known uber AABB\n        } else {\n            aabb = math.collapseAABB3();\n            for (let i = 0, len = this.entitiesList.length; i < len; i++) {\n                const entity = this.entitiesList[i];\n                math.expandAABB3(aabb, entity.aabb);\n            }\n        }\n\n        const rootKDNode = new KDNode(aabb);\n\n        for (let i = 0, len = this.entitiesList.length; i < len; i++) {\n            const entity = this.entitiesList[i];\n            this._insertEntityIntoKDTree(rootKDNode, entity);\n        }\n\n        return rootKDNode;\n    }\n\n    _insertEntityIntoKDTree(kdNode, entity) {\n\n        const nodeAABB = kdNode.aabb;\n        const entityAABB = entity.aabb;\n\n        const nodeAABBDiag = math.getAABB3Diag(nodeAABB);\n\n        if (nodeAABBDiag < this.minTileSize) {\n            kdNode.entities = kdNode.entities || [];\n            kdNode.entities.push(entity);\n            math.expandAABB3(nodeAABB, entityAABB);\n            return;\n        }\n\n        if (kdNode.left) {\n            if (math.containsAABB3(kdNode.left.aabb, entityAABB)) {\n                this._insertEntityIntoKDTree(kdNode.left, entity);\n                return;\n            }\n        }\n\n        if (kdNode.right) {\n            if (math.containsAABB3(kdNode.right.aabb, entityAABB)) {\n                this._insertEntityIntoKDTree(kdNode.right, entity);\n                return;\n            }\n        }\n\n        kdTreeDimLength[0] = nodeAABB[3] - nodeAABB[0];\n        kdTreeDimLength[1] = nodeAABB[4] - nodeAABB[1];\n        kdTreeDimLength[2] = nodeAABB[5] - nodeAABB[2];\n\n        let dim = 0;\n\n        if (kdTreeDimLength[1] > kdTreeDimLength[dim]) {\n            dim = 1;\n        }\n\n        if (kdTreeDimLength[2] > kdTreeDimLength[dim]) {\n            dim = 2;\n        }\n\n        if (!kdNode.left) {\n            const aabbLeft = nodeAABB.slice();\n            aabbLeft[dim + 3] = ((nodeAABB[dim] + nodeAABB[dim + 3]) / 2.0);\n            kdNode.left = new KDNode(aabbLeft);\n            if (math.containsAABB3(aabbLeft, entityAABB)) {\n                this._insertEntityIntoKDTree(kdNode.left, entity);\n                return;\n            }\n        }\n\n        if (!kdNode.right) {\n            const aabbRight = nodeAABB.slice();\n            aabbRight[dim] = ((nodeAABB[dim] + nodeAABB[dim + 3]) / 2.0);\n            kdNode.right = new KDNode(aabbRight);\n            if (math.containsAABB3(aabbRight, entityAABB)) {\n                this._insertEntityIntoKDTree(kdNode.right, entity);\n                return;\n            }\n        }\n\n        kdNode.entities = kdNode.entities || [];\n        kdNode.entities.push(entity);\n\n        math.expandAABB3(nodeAABB, entityAABB);\n    }\n\n    _createTilesFromKDTree(rootKDNode) {\n        this._createTilesFromKDNode(rootKDNode);\n    }\n\n    _createTilesFromKDNode(kdNode) {\n        if (kdNode.entities && kdNode.entities.length > 0) {\n            this._createTileFromEntities(kdNode);\n        }\n        if (kdNode.left) {\n            this._createTilesFromKDNode(kdNode.left);\n        }\n        if (kdNode.right) {\n            this._createTilesFromKDNode(kdNode.right);\n        }\n    }\n\n    /**\n     * Creates a tile from the given entities.\n     *\n     * For each single-use {@link XKTGeometry}, this method centers {@link XKTGeometry#positions} to make them relative to the\n     * tile's center, then quantizes the positions to unsigned 16-bit integers, relative to the tile's boundary.\n     *\n     * @param kdNode\n     */\n    _createTileFromEntities(kdNode) {\n\n        const tileAABB = kdNode.aabb;\n        const entities = kdNode.entities;\n\n        const tileCenter = math.getAABB3Center(tileAABB);\n        const tileCenterNeg = math.mulVec3Scalar(tileCenter, -1, math.vec3());\n\n        const rtcAABB = math.AABB3(); // AABB centered at the RTC origin\n\n        rtcAABB[0] = tileAABB[0] - tileCenter[0];\n        rtcAABB[1] = tileAABB[1] - tileCenter[1];\n        rtcAABB[2] = tileAABB[2] - tileCenter[2];\n        rtcAABB[3] = tileAABB[3] - tileCenter[0];\n        rtcAABB[4] = tileAABB[4] - tileCenter[1];\n        rtcAABB[5] = tileAABB[5] - tileCenter[2];\n\n        for (let i = 0; i < entities.length; i++) {\n\n            const entity = entities [i];\n\n            const meshes = entity.meshes;\n\n            for (let j = 0, lenj = meshes.length; j < lenj; j++) {\n\n                const mesh = meshes[j];\n                const geometry = mesh.geometry;\n\n                if (!geometry.reused) { // Batched geometry\n\n                    const positions = geometry.positions;\n\n                    // Center positions relative to their tile's World-space center\n\n                    for (let k = 0, lenk = positions.length; k < lenk; k += 3) {\n\n                        positions[k + 0] -= tileCenter[0];\n                        positions[k + 1] -= tileCenter[1];\n                        positions[k + 2] -= tileCenter[2];\n                    }\n\n                    // Quantize positions relative to tile's RTC-space boundary\n\n                    geometryCompression.quantizePositions(positions, positions.length, rtcAABB, geometry.positionsQuantized);\n\n                } else { // Instanced geometry\n\n                    // Post-multiply a translation to the mesh's modeling matrix\n                    // to center the entity's geometry instances to the tile RTC center\n\n                    //////////////////////////////\n                    // Why do we do this?\n                    // Seems to break various models\n                    /////////////////////////////////\n\n                    math.translateMat4v(tileCenterNeg, mesh.matrix);\n                }\n            }\n\n            entity.entityIndex = this.entitiesList.length;\n\n            this.entitiesList.push(entity);\n        }\n\n        const tile = new XKTTile(tileAABB, entities);\n\n        this.tilesList.push(tile);\n    }\n\n    _createReusedGeometriesDecodeMatrix() {\n\n        const tempVec3a = math.vec3();\n        const reusedGeometriesAABB = math.collapseAABB3(math.AABB3());\n        let countReusedGeometries = 0;\n\n        for (let geometryIndex = 0, numGeometries = this.geometriesList.length; geometryIndex < numGeometries; geometryIndex++) {\n\n            const geometry = this.geometriesList [geometryIndex];\n\n            if (geometry.reused) { // Instanced geometry\n\n                const positions = geometry.positions;\n\n                for (let i = 0, len = positions.length; i < len; i += 3) {\n\n                    tempVec3a[0] = positions[i];\n                    tempVec3a[1] = positions[i + 1];\n                    tempVec3a[2] = positions[i + 2];\n\n                    math.expandAABB3Point3(reusedGeometriesAABB, tempVec3a);\n                }\n\n                countReusedGeometries++;\n            }\n        }\n\n        if (countReusedGeometries > 0) {\n\n            geometryCompression.createPositionsDecodeMatrix(reusedGeometriesAABB, this.reusedGeometriesDecodeMatrix);\n\n            for (let geometryIndex = 0, numGeometries = this.geometriesList.length; geometryIndex < numGeometries; geometryIndex++) {\n\n                const geometry = this.geometriesList [geometryIndex];\n\n                if (geometry.reused) {\n                    geometryCompression.quantizePositions(geometry.positions, geometry.positions.length, reusedGeometriesAABB, geometry.positionsQuantized);\n                }\n            }\n\n        } else {\n            math.identityMat4(this.reusedGeometriesDecodeMatrix); // No need for this matrix, but we'll be tidy and set it to identity\n        }\n    }\n\n    _flagSolidGeometries() {\n        let maxNumPositions = 0;\n        let maxNumIndices = 0;\n        for (let i = 0, len = this.geometriesList.length; i < len; i++) {\n            const geometry = this.geometriesList[i];\n            if (geometry.primitiveType === \"triangles\") {\n                if (geometry.positionsQuantized.length > maxNumPositions) {\n                    maxNumPositions = geometry.positionsQuantized.length;\n                }\n                if (geometry.indices.length > maxNumIndices) {\n                    maxNumIndices = geometry.indices.length;\n                }\n            }\n        }\n        let vertexIndexMapping = new Array(maxNumPositions / 3);\n        let edges = new Array(maxNumIndices);\n        for (let i = 0, len = this.geometriesList.length; i < len; i++) {\n            const geometry = this.geometriesList[i];\n            if (geometry.primitiveType === \"triangles\") {\n                geometry.solid = isTriangleMeshSolid(geometry.indices, geometry.positionsQuantized, vertexIndexMapping, edges);\n            }\n        }\n    }\n}\n\nexport {\n    XKTModel\n}","/**\n * Given geometry defined as an array of positions, optional normals, option uv and an array of indices, returns\n * modified arrays that have duplicate vertices removed.\n *\n * @private\n */\nfunction mergeVertices(positions, indices, mergedPositions, mergedIndices) {\n    const positionsMap = {};\n    const indicesLookup = [];\n    const precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n    const precision = 10 ** precisionPoints;\n    let uvi = 0;\n    for (let i = 0, len = positions.length; i < len; i += 3) {\n        const vx = positions[i];\n        const vy = positions[i + 1];\n        const vz = positions[i + 2];\n        const key = `${Math.round(vx * precision)}_${Math.round(vy * precision)}_${Math.round(vz * precision)}`;\n        if (positionsMap[key] === undefined) {\n            positionsMap[key] = mergedPositions.length / 3;\n            mergedPositions.push(vx);\n            mergedPositions.push(vy);\n            mergedPositions.push(vz);\n        }\n        indicesLookup[i / 3] = positionsMap[key];\n        uvi += 2;\n    }\n    for (let i = 0, len = indices.length; i < len; i++) {\n        mergedIndices[i] = indicesLookup[indices[i]];\n    }\n}\n\nexport {mergeVertices};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"pako\");","import {XKT_INFO} from \"../XKT_INFO.js\";\nimport * as pako from 'pako';\n\nconst XKT_VERSION = XKT_INFO.xktVersion;\nconst NUM_TEXTURE_ATTRIBUTES = 9;\nconst NUM_MATERIAL_ATTRIBUTES = 6;\n\n/**\n * Writes an {@link XKTModel} to an {@link ArrayBuffer}.\n *\n * @param {XKTModel} xktModel The {@link XKTModel}.\n * @param {String} metaModelJSON The metamodel JSON in a string.\n * @param {Object} [stats] Collects statistics.\n * @param {Object} options Options for how the XKT is written.\n * @param {Boolean} [options.zip=true] ZIP the contents?\n * @returns {ArrayBuffer} The {@link ArrayBuffer}.\n */\nfunction writeXKTModelToArrayBuffer(xktModel, metaModelJSON, stats, options) {\n    const data = getModelData(xktModel, metaModelJSON, stats);\n    const deflatedData = deflateData(data, metaModelJSON, options);\n    stats.texturesSize += deflatedData.textureData.byteLength;\n    const arrayBuffer = createArrayBuffer(deflatedData);\n    return arrayBuffer;\n}\n\nfunction getModelData(xktModel, metaModelDataStr, stats) {\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Allocate data\n    //------------------------------------------------------------------------------------------------------------------\n\n    const propertySetsList = xktModel.propertySetsList;\n    const metaObjectsList = xktModel.metaObjectsList;\n    const geometriesList = xktModel.geometriesList;\n    const texturesList = xktModel.texturesList;\n    const textureSetsList = xktModel.textureSetsList;\n    const meshesList = xktModel.meshesList;\n    const entitiesList = xktModel.entitiesList;\n    const tilesList = xktModel.tilesList;\n\n    const numPropertySets = propertySetsList.length;\n    const numMetaObjects = metaObjectsList.length;\n    const numGeometries = geometriesList.length;\n    const numTextures = texturesList.length;\n    const numTextureSets = textureSetsList.length;\n    const numMeshes = meshesList.length;\n    const numEntities = entitiesList.length;\n    const numTiles = tilesList.length;\n\n    let lenPositions = 0;\n    let lenNormals = 0;\n    let lenColors = 0;\n    let lenUVs = 0;\n    let lenIndices = 0;\n    let lenEdgeIndices = 0;\n    let lenMatrices = 0;\n    let lenTextures = 0;\n\n    for (let geometryIndex = 0; geometryIndex < numGeometries; geometryIndex++) {\n        const geometry = geometriesList [geometryIndex];\n        if (geometry.positionsQuantized) {\n            lenPositions += geometry.positionsQuantized.length;\n        }\n        if (geometry.normalsOctEncoded) {\n            lenNormals += geometry.normalsOctEncoded.length;\n        }\n        if (geometry.colorsCompressed) {\n            lenColors += geometry.colorsCompressed.length;\n        }\n        if (geometry.uvs) {\n            lenUVs += geometry.uvs.length;\n        }\n        if (geometry.indices) {\n            lenIndices += geometry.indices.length;\n        }\n        if (geometry.edgeIndices) {\n            lenEdgeIndices += geometry.edgeIndices.length;\n        }\n    }\n\n    for (let textureIndex = 0; textureIndex < numTextures; textureIndex++) {\n        const xktTexture = texturesList[textureIndex];\n        const imageData = xktTexture.imageData;\n        lenTextures += imageData.byteLength;\n\n        if (xktTexture.compressed) {\n            stats.numCompressedTextures++;\n        }\n    }\n\n    for (let meshIndex = 0; meshIndex < numMeshes; meshIndex++) {\n        const mesh = meshesList[meshIndex];\n        if (mesh.geometry.numInstances > 1) {\n            lenMatrices += 16;\n        }\n    }\n\n    const data = {\n        metadata: {},\n        textureData: new Uint8Array(lenTextures), // All textures\n        eachTextureDataPortion: new Uint32Array(numTextures), // For each texture, an index to its first element in textureData\n        eachTextureAttributes: new Uint16Array(numTextures * NUM_TEXTURE_ATTRIBUTES),\n        positions: new Uint16Array(lenPositions), // All geometry arrays\n        normals: new Int8Array(lenNormals),\n        colors: new Uint8Array(lenColors),\n        uvs: new Float32Array(lenUVs),\n        indices: new Uint32Array(lenIndices),\n        edgeIndices: new Uint32Array(lenEdgeIndices),\n        eachTextureSetTextures: new Int32Array(numTextureSets * 5), // For each texture set, a set of five Texture indices [color, metal/roughness,normals,emissive,occlusion]; each index has value -1 if no texture\n        matrices: new Float32Array(lenMatrices), // Modeling matrices for entities that share geometries. Each entity either shares all it's geometries, or owns all its geometries exclusively. Exclusively-owned geometries are pre-transformed into World-space, and so their entities don't have modeling matrices in this array.\n        reusedGeometriesDecodeMatrix: new Float32Array(xktModel.reusedGeometriesDecodeMatrix), // A single, global vertex position de-quantization matrix for all reused geometries. Reused geometries are quantized to their collective Local-space AABB, and this matrix is derived from that AABB.\n        eachGeometryPrimitiveType: new Uint8Array(numGeometries), // Primitive type for each geometry (0=solid triangles, 1=surface triangles, 2=lines, 3=points, 4=line-strip)\n        eachGeometryPositionsPortion: new Uint32Array(numGeometries), // For each geometry, an index to its first element in data.positions. Every primitive type has positions.\n        eachGeometryNormalsPortion: new Uint32Array(numGeometries), // For each geometry, an index to its first element in data.normals. If the next geometry has the same index, then this geometry has no normals.\n        eachGeometryColorsPortion: new Uint32Array(numGeometries), // For each geometry, an index to its first element in data.colors. If the next geometry has the same index, then this geometry has no colors.\n        eachGeometryUVsPortion: new Uint32Array(numGeometries), // For each geometry, an index to its first element in data.uvs. If the next geometry has the same index, then this geometry has no UVs.\n        eachGeometryIndicesPortion: new Uint32Array(numGeometries), // For each geometry, an index to its first element in data.indices. If the next geometry has the same index, then this geometry has no indices.\n        eachGeometryEdgeIndicesPortion: new Uint32Array(numGeometries), // For each geometry, an index to its first element in data.edgeIndices. If the next geometry has the same index, then this geometry has no edge indices.\n        eachMeshGeometriesPortion: new Uint32Array(numMeshes), // For each mesh, an index into the eachGeometry* arrays\n        eachMeshMatricesPortion: new Uint32Array(numMeshes), // For each mesh that shares its geometry, an index to its first element in data.matrices, to indicate the modeling matrix that transforms the shared geometry Local-space vertex positions. This is ignored for meshes that don't share geometries, because the vertex positions of non-shared geometries are pre-transformed into World-space.\n        eachMeshTextureSet: new Int32Array(numMeshes), // For each mesh, the index of its texture set in data.eachTextureSetTextures; this array contains signed integers so that we can use -1 to indicate when a mesh has no texture set\n        eachMeshMaterialAttributes: new Uint8Array(numMeshes * NUM_MATERIAL_ATTRIBUTES), // For each mesh, an RGBA integer color of format [0..255, 0..255, 0..255, 0..255], and PBR metallic and roughness factors, of format [0..255, 0..255]\n        eachEntityId: [], // For each entity, an ID string\n        eachEntityMeshesPortion: new Uint32Array(numEntities), // For each entity, the index of the first element of meshes used by the entity\n        eachTileAABB: new Float64Array(numTiles * 6), // For each tile, an axis-aligned bounding box\n        eachTileEntitiesPortion: new Uint32Array(numTiles) // For each tile, the index of the first element of eachEntityId, eachEntityMeshesPortion and eachEntityMatricesPortion used by the tile\n    };\n\n    let countPositions = 0;\n    let countNormals = 0;\n    let countColors = 0;\n    let countUVs = 0;\n    let countIndices = 0;\n    let countEdgeIndices = 0;\n\n    // Metadata\n\n    data.metadata = {\n        id: xktModel.modelId,\n        projectId: xktModel.projectId,\n        revisionId: xktModel.revisionId,\n        author: xktModel.author,\n        createdAt: xktModel.createdAt,\n        creatingApplication: xktModel.creatingApplication,\n        schema: xktModel.schema,\n        propertySets: [],\n        metaObjects: []\n    };\n\n    // Property sets\n\n    for (let propertySetsIndex = 0; propertySetsIndex < numPropertySets; propertySetsIndex++) {\n        const propertySet = propertySetsList[propertySetsIndex];\n        const propertySetJSON = {\n            id: \"\" + propertySet.propertySetId,\n            name: propertySet.propertySetName,\n            type: propertySet.propertySetType,\n            properties: propertySet.properties\n        };\n        data.metadata.propertySets.push(propertySetJSON);\n    }\n\n    // Metaobjects\n\n    if (!metaModelDataStr) {\n        for (let metaObjectsIndex = 0; metaObjectsIndex < numMetaObjects; metaObjectsIndex++) {\n            const metaObject = metaObjectsList[metaObjectsIndex];\n            const metaObjectJSON = {\n                name: metaObject.metaObjectName,\n                type: metaObject.metaObjectType,\n                id: \"\" + metaObject.metaObjectId\n            };\n            if (metaObject.parentMetaObjectId !== undefined && metaObject.parentMetaObjectId !== null) {\n                metaObjectJSON.parent = \"\" + metaObject.parentMetaObjectId;\n            }\n            if (metaObject.propertySetIds && metaObject.propertySetIds.length > 0) {\n                metaObjectJSON.propertySetIds = metaObject.propertySetIds;\n            }\n            if (metaObject.external) {\n                metaObjectJSON.external = metaObject.external;\n            }\n            data.metadata.metaObjects.push(metaObjectJSON);\n        }\n    }\n\n    // Geometries\n\n    for (let geometryIndex = 0; geometryIndex < numGeometries; geometryIndex++) {\n        const geometry = geometriesList [geometryIndex];\n        let primitiveType = 1;\n        switch (geometry.primitiveType) {\n            case \"triangles\":\n                primitiveType = geometry.solid ? 0 : 1;\n                break;\n            case \"points\":\n                primitiveType = 2;\n                break;\n            case \"lines\":\n                primitiveType = 3;\n                break;\n            case \"line-strip\":\n            case \"line-loop\":\n                primitiveType = 4;\n                break;\n            case \"triangle-strip\":\n                primitiveType = 5;\n                break;\n            case \"triangle-fan\":\n                primitiveType = 6;\n                break;\n            default:\n                primitiveType = 1\n        }\n        data.eachGeometryPrimitiveType [geometryIndex] = primitiveType;\n        data.eachGeometryPositionsPortion [geometryIndex] = countPositions;\n        data.eachGeometryNormalsPortion [geometryIndex] = countNormals;\n        data.eachGeometryColorsPortion [geometryIndex] = countColors;\n        data.eachGeometryUVsPortion [geometryIndex] = countUVs;\n        data.eachGeometryIndicesPortion [geometryIndex] = countIndices;\n        data.eachGeometryEdgeIndicesPortion [geometryIndex] = countEdgeIndices;\n        if (geometry.positionsQuantized) {\n            data.positions.set(geometry.positionsQuantized, countPositions);\n            countPositions += geometry.positionsQuantized.length;\n        }\n        if (geometry.normalsOctEncoded) {\n            data.normals.set(geometry.normalsOctEncoded, countNormals);\n            countNormals += geometry.normalsOctEncoded.length;\n        }\n        if (geometry.colorsCompressed) {\n            data.colors.set(geometry.colorsCompressed, countColors);\n            countColors += geometry.colorsCompressed.length;\n        }\n        if (geometry.uvs) {\n            data.uvs.set(geometry.uvs, countUVs);\n            countUVs += geometry.uvs.length;\n        }\n        if (geometry.indices) {\n            data.indices.set(geometry.indices, countIndices);\n            countIndices += geometry.indices.length;\n        }\n        if (geometry.edgeIndices) {\n            data.edgeIndices.set(geometry.edgeIndices, countEdgeIndices);\n            countEdgeIndices += geometry.edgeIndices.length;\n        }\n    }\n\n    // Textures\n\n    for (let textureIndex = 0, numTextures = xktModel.texturesList.length, portionIdx = 0; textureIndex < numTextures; textureIndex++) {\n        const xktTexture = xktModel.texturesList[textureIndex];\n        const imageData = xktTexture.imageData;\n        data.textureData.set(imageData, portionIdx);\n        data.eachTextureDataPortion[textureIndex] = portionIdx;\n\n        portionIdx += imageData.byteLength;\n\n        let textureAttrIdx = textureIndex * NUM_TEXTURE_ATTRIBUTES;\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.compressed ? 1 : 0;\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.mediaType; // GIFMediaType | PNGMediaType | JPEGMediaType\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.width;\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.height;\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.minFilter; // LinearMipmapLinearFilter | LinearMipMapNearestFilter | NearestMipMapNearestFilter | NearestMipMapLinearFilter | LinearMipMapLinearFilter\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.magFilter; // LinearFilter | NearestFilter\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.wrapS; // ClampToEdgeWrapping | MirroredRepeatWrapping | RepeatWrapping\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.wrapT; // ClampToEdgeWrapping | MirroredRepeatWrapping | RepeatWrapping\n        data.eachTextureAttributes[textureAttrIdx++] = xktTexture.wrapR; // ClampToEdgeWrapping | MirroredRepeatWrapping | RepeatWrapping\n    }\n\n    // Texture sets\n\n    for (let textureSetIndex = 0, numTextureSets = xktModel.textureSetsList.length, eachTextureSetTexturesIndex = 0; textureSetIndex < numTextureSets; textureSetIndex++) {\n        const textureSet = textureSetsList[textureSetIndex];\n        data.eachTextureSetTextures[eachTextureSetTexturesIndex++] = textureSet.colorTexture ? textureSet.colorTexture.textureIndex : -1; // Color map\n        data.eachTextureSetTextures[eachTextureSetTexturesIndex++] = textureSet.metallicRoughnessTexture ? textureSet.metallicRoughnessTexture.textureIndex : -1; // Metal/rough map\n        data.eachTextureSetTextures[eachTextureSetTexturesIndex++] = textureSet.normalsTexture ? textureSet.normalsTexture.textureIndex : -1; // Normal map\n        data.eachTextureSetTextures[eachTextureSetTexturesIndex++] = textureSet.emissiveTexture ? textureSet.emissiveTexture.textureIndex : -1; // Emissive map\n        data.eachTextureSetTextures[eachTextureSetTexturesIndex++] = textureSet.occlusionTexture ? textureSet.occlusionTexture.textureIndex : -1; // Occlusion map\n    }\n\n    // Tiles -> Entities -> Meshes\n\n    let entityIndex = 0;\n    let countEntityMeshesPortion = 0;\n    let eachMeshMaterialAttributesIndex = 0;\n    let matricesIndex = 0;\n    let meshIndex = 0;\n\n    for (let tileIndex = 0; tileIndex < numTiles; tileIndex++) {\n\n        const tile = tilesList [tileIndex];\n        const tileEntities = tile.entities;\n        const numTileEntities = tileEntities.length;\n\n        if (numTileEntities === 0) {\n            continue;\n        }\n\n        data.eachTileEntitiesPortion[tileIndex] = entityIndex;\n\n        const tileAABB = tile.aabb;\n\n        for (let j = 0; j < numTileEntities; j++) {\n\n            const entity = tileEntities[j];\n            const entityMeshes = entity.meshes;\n            const numEntityMeshes = entityMeshes.length;\n\n            for (let k = 0; k < numEntityMeshes; k++) {\n\n                const mesh = entityMeshes[k];\n                const geometry = mesh.geometry;\n                const geometryIndex = geometry.geometryIndex;\n\n                data.eachMeshGeometriesPortion [countEntityMeshesPortion + k] = geometryIndex;\n\n                if (mesh.geometry.numInstances > 1) {\n                    data.matrices.set(mesh.matrix, matricesIndex);\n                    data.eachMeshMatricesPortion [meshIndex] = matricesIndex;\n                    matricesIndex += 16;\n                }\n\n                data.eachMeshTextureSet[meshIndex] = mesh.textureSet ? mesh.textureSet.textureSetIndex : -1;\n\n                data.eachMeshMaterialAttributes[eachMeshMaterialAttributesIndex++] = (mesh.color[0] * 255); // Color RGB\n                data.eachMeshMaterialAttributes[eachMeshMaterialAttributesIndex++] = (mesh.color[1] * 255);\n                data.eachMeshMaterialAttributes[eachMeshMaterialAttributesIndex++] = (mesh.color[2] * 255);\n                data.eachMeshMaterialAttributes[eachMeshMaterialAttributesIndex++] = (mesh.opacity * 255); // Opacity\n                data.eachMeshMaterialAttributes[eachMeshMaterialAttributesIndex++] = (mesh.metallic * 255); // Metallic\n                data.eachMeshMaterialAttributes[eachMeshMaterialAttributesIndex++] = (mesh.roughness * 255); // Roughness\n\n                meshIndex++;\n            }\n\n            data.eachEntityId [entityIndex] = entity.entityId;\n            data.eachEntityMeshesPortion[entityIndex] = countEntityMeshesPortion; // <<<<<<<<<<<<<<<<<<<< Error here? Order/value of countEntityMeshesPortion correct?\n\n            entityIndex++;\n            countEntityMeshesPortion += numEntityMeshes;\n        }\n\n        const tileAABBIndex = tileIndex * 6;\n\n        data.eachTileAABB.set(tileAABB, tileAABBIndex);\n    }\n\n    return data;\n}\n\nfunction deflateData(data, metaModelJSON, options) {\n\n    function deflate(buffer) {\n        return (options.zip !== false) ? pako.deflate(buffer) : buffer;\n    }\n\n    let metaModelBytes;\n    if (metaModelJSON) {\n        const deflatedJSON = deflateJSON(metaModelJSON);\n        metaModelBytes = deflate(deflatedJSON)\n    } else {\n        const deflatedJSON = deflateJSON(data.metadata);\n        metaModelBytes = deflate(deflatedJSON)\n    }\n\n    return {\n        metadata: metaModelBytes,\n        textureData: deflate(data.textureData.buffer),\n        eachTextureDataPortion: deflate(data.eachTextureDataPortion.buffer),\n        eachTextureAttributes: deflate(data.eachTextureAttributes.buffer),\n        positions: deflate(data.positions.buffer),\n        normals: deflate(data.normals.buffer),\n        colors: deflate(data.colors.buffer),\n        uvs: deflate(data.uvs.buffer),\n        indices: deflate(data.indices.buffer),\n        edgeIndices: deflate(data.edgeIndices.buffer),\n        eachTextureSetTextures: deflate(data.eachTextureSetTextures.buffer),\n        matrices: deflate(data.matrices.buffer),\n        reusedGeometriesDecodeMatrix: deflate(data.reusedGeometriesDecodeMatrix.buffer),\n        eachGeometryPrimitiveType: deflate(data.eachGeometryPrimitiveType.buffer),\n        eachGeometryPositionsPortion: deflate(data.eachGeometryPositionsPortion.buffer),\n        eachGeometryNormalsPortion: deflate(data.eachGeometryNormalsPortion.buffer),\n        eachGeometryColorsPortion: deflate(data.eachGeometryColorsPortion.buffer),\n        eachGeometryUVsPortion: deflate(data.eachGeometryUVsPortion.buffer),\n        eachGeometryIndicesPortion: deflate(data.eachGeometryIndicesPortion.buffer),\n        eachGeometryEdgeIndicesPortion: deflate(data.eachGeometryEdgeIndicesPortion.buffer),\n        eachMeshGeometriesPortion: deflate(data.eachMeshGeometriesPortion.buffer),\n        eachMeshMatricesPortion: deflate(data.eachMeshMatricesPortion.buffer),\n        eachMeshTextureSet: deflate(data.eachMeshTextureSet.buffer),\n        eachMeshMaterialAttributes: deflate(data.eachMeshMaterialAttributes.buffer),\n        eachEntityId: deflate(JSON.stringify(data.eachEntityId)\n            .replace(/[\\u007F-\\uFFFF]/g, function (chr) { // Produce only ASCII-chars, so that the data can be inflated later\n                return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4)\n            })),\n        eachEntityMeshesPortion: deflate(data.eachEntityMeshesPortion.buffer),\n        eachTileAABB: deflate(data.eachTileAABB.buffer),\n        eachTileEntitiesPortion: deflate(data.eachTileEntitiesPortion.buffer)\n    };\n}\n\nfunction deflateJSON(strings) {\n    return JSON.stringify(strings)\n        .replace(/[\\u007F-\\uFFFF]/g, function (chr) { // Produce only ASCII-chars, so that the data can be inflated later\n            return \"\\\\u\" + (\"0000\" + chr.charCodeAt(0).toString(16)).substr(-4)\n        });\n}\n\nfunction createArrayBuffer(deflatedData) {\n    return toArrayBuffer([\n        deflatedData.metadata,\n        deflatedData.textureData,\n        deflatedData.eachTextureDataPortion,\n        deflatedData.eachTextureAttributes,\n        deflatedData.positions,\n        deflatedData.normals,\n        deflatedData.colors,\n        deflatedData.uvs,\n        deflatedData.indices,\n        deflatedData.edgeIndices,\n        deflatedData.eachTextureSetTextures,\n        deflatedData.matrices,\n        deflatedData.reusedGeometriesDecodeMatrix,\n        deflatedData.eachGeometryPrimitiveType,\n        deflatedData.eachGeometryPositionsPortion,\n        deflatedData.eachGeometryNormalsPortion,\n        deflatedData.eachGeometryColorsPortion,\n        deflatedData.eachGeometryUVsPortion,\n        deflatedData.eachGeometryIndicesPortion,\n        deflatedData.eachGeometryEdgeIndicesPortion,\n        deflatedData.eachMeshGeometriesPortion,\n        deflatedData.eachMeshMatricesPortion,\n        deflatedData.eachMeshTextureSet,\n        deflatedData.eachMeshMaterialAttributes,\n        deflatedData.eachEntityId,\n        deflatedData.eachEntityMeshesPortion,\n        deflatedData.eachTileAABB,\n        deflatedData.eachTileEntitiesPortion\n    ]);\n}\n\nfunction toArrayBuffer(elements) {\n    const indexData = new Uint32Array(elements.length + 2);\n    indexData[0] = XKT_VERSION;\n    indexData [1] = elements.length;  // Stored Data 1.1: number of stored elements\n    let dataLen = 0;    // Stored Data 1.2: length of stored elements\n    for (let i = 0, len = elements.length; i < len; i++) {\n        const element = elements[i];\n        const elementsize = element.length;\n        indexData[i + 2] = elementsize;\n        dataLen += elementsize;\n    }\n    const indexBuf = new Uint8Array(indexData.buffer);\n    const dataArray = new Uint8Array(indexBuf.length + dataLen);\n    dataArray.set(indexBuf);\n    let offset = indexBuf.length;\n    for (let i = 0, len = elements.length; i < len; i++) {     // Stored Data 2: the elements themselves\n        const element = elements[i];\n        dataArray.set(element, offset);\n        offset += element.length;\n    }\n    return dataArray.buffer;\n}\n\nexport {writeXKTModelToArrayBuffer};","/** @private */\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n                // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n                // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n\n        // filter collinear points around the cuts\n        filterPoints(outerNode, outerNode.next);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m; // hole touches outer segment; pick leftmost endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n            pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n        (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n        (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n        (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n            intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n            (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\nexport {earcut};","import {earcut} from './../lib/earcut';\nimport {math} from \"./../lib/math.js\";\n\nconst tempVec2a = math.vec2();\nconst tempVec3a = math.vec3();\nconst tempVec3b = math.vec3();\nconst tempVec3c = math.vec3();\n\n/**\n * @desc Parses a CityJSON model into an {@link XKTModel}.\n *\n * [CityJSON](https://www.cityjson.org) is a JSON-based encoding for a subset of the CityGML data model (version 2.0.0),\n * which is an open standardised data model and exchange format to store digital 3D models of cities and\n * landscapes. CityGML is an official standard of the [Open Geospatial Consortium](https://www.ogc.org/).\n *\n * This converter function supports most of the [CityJSON 1.0.2 Specification](https://www.cityjson.org/specs/1.0.2),\n * with the following limitations:\n *\n * * Does not (yet) support CityJSON semantics for geometry primitives.\n * * Does not (yet) support textured geometries.\n * * Does not (yet) support geometry templates.\n * * When the CityJSON file provides multiple *themes* for a geometry, then we parse only the first of the provided themes for that geometry.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load a CityJSON model into it.\n *\n * ````javascript\n * utils.loadJSON(\"./models/cityjson/DenHaag.json\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     parseCityJSONIntoXKTModel({\n *          data,\n *          xktModel,\n *          log: (msg) => { console.log(msg); }\n *     }).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing params.\n * @param {Object} params.data CityJSON data.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {boolean} [params.center=false] Set true to center the CityJSON vertex positions to [0,0,0]. This is applied before the transformation matrix, if specified.\n * @param {Boolean} [params.transform] 4x4 transformation matrix to transform CityJSON vertex positions. Use this to rotate, translate and scale them if neccessary.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n @returns {Promise} Resolves when CityJSON has been parsed.\n */\nfunction parseCityJSONIntoXKTModel({\n                                       data,\n                                       xktModel,\n                                       center = false,\n                                       transform = null,\n                                       stats = {}, log\n                                   }) {\n\n    return new Promise(function (resolve, reject) {\n\n        if (!data) {\n            reject(\"Argument expected: data\");\n            return;\n        }\n\n        if (data.type !== \"CityJSON\") {\n            reject(\"Invalid argument: data is not a CityJSON file\");\n            return;\n        }\n\n        if (!xktModel) {\n            reject(\"Argument expected: xktModel\");\n            return;\n        }\n\n        let vertices;\n\n        log(\"Using parser: parseCityJSONIntoXKTModel\");\n\n        log(`center: ${center}`);\n        if (transform) {\n            log(`transform: [${transform}]`);\n        }\n\n        if (data.transform || center || transform) {\n            vertices = copyVertices(data.vertices);\n            if (data.transform) {\n                transformVertices(vertices, data.transform)\n            }\n            if (center) {\n                centerVertices(vertices);\n            }\n            if (transform) {\n                customTransformVertices(vertices, transform);\n            }\n        } else {\n            vertices = data.vertices;\n        }\n\n        stats.sourceFormat = data.type || \"\";\n        stats.schemaVersion = data.version || \"\";\n        stats.title = \"\";\n        stats.author = \"\";\n        stats.created = \"\";\n        stats.numMetaObjects = 0;\n        stats.numPropertySets = 0;\n        stats.numTriangles = 0;\n        stats.numVertices = 0;\n        stats.numObjects = 0;\n        stats.numGeometries = 0;\n\n        const rootMetaObjectId = math.createUUID();\n\n        xktModel.createMetaObject({\n            metaObjectId: rootMetaObjectId,\n            metaObjectType: \"Model\",\n            metaObjectName: \"Model\"\n        });\n\n        stats.numMetaObjects++;\n\n        const modelMetaObjectId = math.createUUID();\n\n        xktModel.createMetaObject({\n            metaObjectId: modelMetaObjectId,\n            metaObjectType: \"CityJSON\",\n            metaObjectName: \"CityJSON\",\n            parentMetaObjectId: rootMetaObjectId\n        });\n\n        stats.numMetaObjects++;\n\n        const ctx = {\n            data,\n            vertices,\n            xktModel,\n            rootMetaObjectId: modelMetaObjectId,\n            log: (log || function (msg) {\n            }),\n            nextId: 0,\n            stats\n        };\n\n        ctx.xktModel.schema = data.type + \" \" + data.version;\n\n        ctx.log(\"Converting \" + ctx.xktModel.schema);\n\n        parseCityJSON(ctx);\n\n        resolve();\n    });\n}\n\nfunction copyVertices(vertices) {\n    const vertices2 = [];\n    for (let i = 0, j = 0; i < vertices.length; i++, j += 3) {\n        const x = vertices[i][0];\n        const y = vertices[i][1];\n        const z = vertices[i][2];\n        vertices2.push([x, y, z]);\n    }\n    return vertices2;\n}\n\nfunction transformVertices(vertices, cityJSONTransform) {\n    const scale = cityJSONTransform.scale || math.vec3([1, 1, 1]);\n    const translate = cityJSONTransform.translate || math.vec3([0, 0, 0]);\n    for (let i = 0; i < vertices.length; i++) {\n        const vertex = vertices[i];\n        vertex[0] = (vertex[0] * scale[0]) + translate[0];\n        vertex[1] = (vertex[1] * scale[1]) + translate[1];\n        vertex[2] = (vertex[2] * scale[2]) + translate[2];\n    }\n}\n\nfunction centerVertices(vertices) {\n    if (center) {\n        const centerPos = math.vec3();\n        const numPoints = vertices.length;\n        for (let i = 0, len = vertices.length; i < len; i++) {\n            const vertex = vertices[i];\n            centerPos[0] += vertex[0];\n            centerPos[1] += vertex[1];\n            centerPos[2] += vertex[2];\n        }\n        centerPos[0] /= numPoints;\n        centerPos[1] /= numPoints;\n        centerPos[2] /= numPoints;\n        for (let i = 0, len = vertices.length; i < len; i++) {\n            const vertex = vertices[i];\n            vertex[0] -= centerPos[0];\n            vertex[1] -= centerPos[1];\n            vertex[2] -= centerPos[2];\n        }\n    }\n}\n\nfunction customTransformVertices(vertices, transform) {\n    if (transform) {\n        const mat = math.mat4(transform);\n        for (let i = 0, len = vertices.length; i < len; i++) {\n            const vertex = vertices[i];\n            math.transformPoint3(mat, vertex, vertex);\n        }\n    }\n}\n\nfunction parseCityJSON(ctx) {\n\n    const data = ctx.data;\n    const cityObjects = data.CityObjects;\n\n    for (const objectId in cityObjects) {\n        if (cityObjects.hasOwnProperty(objectId)) {\n            const cityObject = cityObjects[objectId];\n            parseCityObject(ctx, cityObject, objectId);\n        }\n    }\n}\n\nfunction parseCityObject(ctx, cityObject, objectId) {\n\n    const xktModel = ctx.xktModel;\n    const data = ctx.data;\n    const metaObjectId = objectId;\n    const metaObjectType = cityObject.type;\n    const metaObjectName = metaObjectType + \" : \" + objectId;\n\n    const parentMetaObjectId = cityObject.parents ? cityObject.parents[0] : ctx.rootMetaObjectId;\n\n    xktModel.createMetaObject({\n        metaObjectId,\n        metaObjectName,\n        metaObjectType,\n        parentMetaObjectId\n    });\n\n    ctx.stats.numMetaObjects++;\n\n    if (!(cityObject.geometry && cityObject.geometry.length > 0)) {\n        return;\n    }\n\n    const meshIds = [];\n\n    for (let i = 0, len = cityObject.geometry.length; i < len; i++) {\n\n        const geometry = cityObject.geometry[i];\n\n        let objectMaterial;\n        let surfaceMaterials;\n\n        const appearance = data.appearance;\n        if (appearance) {\n            const materials = appearance.materials;\n            if (materials) {\n                const geometryMaterial = geometry.material;\n                if (geometryMaterial) {\n                    const themeIds = Object.keys(geometryMaterial);\n                    if (themeIds.length > 0) {\n                        const themeId = themeIds[0];\n                        const theme = geometryMaterial[themeId];\n                        if (theme.value !== undefined) {\n                            objectMaterial = materials[theme.value];\n                        } else {\n                            const values = theme.values;\n                            if (values) {\n                                surfaceMaterials = [];\n                                for (let j = 0, lenj = values.length; j < lenj; j++) {\n                                    const value = values[i];\n                                    const surfaceMaterial = materials[value];\n                                    surfaceMaterials.push(surfaceMaterial);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        if (surfaceMaterials) {\n            parseGeometrySurfacesWithOwnMaterials(ctx, geometry, surfaceMaterials, meshIds);\n\n        } else {\n            parseGeometrySurfacesWithSharedMaterial(ctx, geometry, objectMaterial, meshIds);\n        }\n    }\n\n    if (meshIds.length > 0) {\n        xktModel.createEntity({\n            entityId: objectId,\n            meshIds: meshIds\n        });\n\n        ctx.stats.numObjects++;\n    }\n}\n\nfunction parseGeometrySurfacesWithOwnMaterials(ctx, geometry, surfaceMaterials, meshIds) {\n\n    const geomType = geometry.type;\n\n    switch (geomType) {\n\n        case \"MultiPoint\":\n            break;\n\n        case \"MultiLineString\":\n            break;\n\n        case \"MultiSurface\":\n\n        case \"CompositeSurface\":\n            const surfaces = geometry.boundaries;\n            parseSurfacesWithOwnMaterials(ctx, surfaceMaterials, surfaces, meshIds);\n            break;\n\n        case \"Solid\":\n            const shells = geometry.boundaries;\n            for (let j = 0; j < shells.length; j++) {\n                const surfaces = shells[j];\n                parseSurfacesWithOwnMaterials(ctx, surfaceMaterials, surfaces, meshIds);\n            }\n            break;\n\n        case \"MultiSolid\":\n\n        case \"CompositeSolid\":\n            const solids = geometry.boundaries;\n            for (let j = 0; j < solids.length; j++) {\n                for (let k = 0; k < solids[j].length; k++) {\n                    const surfaces = solids[j][k];\n                    parseSurfacesWithOwnMaterials(ctx, surfaceMaterials, surfaces, meshIds);\n                }\n            }\n            break;\n\n        case \"GeometryInstance\":\n            break;\n    }\n}\n\nfunction parseSurfacesWithOwnMaterials(ctx, surfaceMaterials, surfaces, meshIds) {\n\n    const vertices = ctx.vertices;\n    const xktModel = ctx.xktModel;\n\n    for (let i = 0; i < surfaces.length; i++) {\n\n        const surface = surfaces[i];\n        const surfaceMaterial = surfaceMaterials[i] || {diffuseColor: [0.8, 0.8, 0.8], transparency: 1.0};\n\n        const face = [];\n        const holes = [];\n\n        const sharedIndices = [];\n\n        const geometryCfg = {\n            positions: [],\n            indices: []\n        };\n\n        for (let j = 0; j < surface.length; j++) {\n\n            if (face.length > 0) {\n                holes.push(face.length);\n            }\n\n            const newFace = extractLocalIndices(ctx, surface[j], sharedIndices, geometryCfg);\n\n            face.push(...newFace);\n        }\n\n        if (face.length === 3) { // Triangle\n\n            geometryCfg.indices.push(face[0]);\n            geometryCfg.indices.push(face[1]);\n            geometryCfg.indices.push(face[2]);\n\n        } else if (face.length > 3) { // Polygon\n\n            // Prepare to triangulate\n\n            const pList = [];\n\n            for (let k = 0; k < face.length; k++) {\n                pList.push({\n                    x: vertices[sharedIndices[face[k]]][0],\n                    y: vertices[sharedIndices[face[k]]][1],\n                    z: vertices[sharedIndices[face[k]]][2]\n                });\n            }\n\n            const normal = getNormalOfPositions(pList, math.vec3());\n\n            // Convert to 2D\n\n            let pv = [];\n\n            for (let k = 0; k < pList.length; k++) {\n\n                to2D(pList[k], normal, tempVec2a);\n\n                pv.unshift(tempVec2a[0]);\n                pv.unshift(tempVec2a[1]);\n            }\n\n            // Triangulate\n\n            const tr = earcut(pv, holes, 2);\n\n            // Create triangles\n\n            for (let k = 0; k < tr.length; k += 3) {\n                geometryCfg.indices.unshift(face[tr[k]]);\n                geometryCfg.indices.unshift(face[tr[k + 1]]);\n                geometryCfg.indices.unshift(face[tr[k + 2]]);\n            }\n        }\n\n        const geometryId = \"\" + ctx.nextId++;\n        const meshId = \"\" + ctx.nextId++;\n\n        xktModel.createGeometry({\n            geometryId: geometryId,\n            primitiveType: \"triangles\",\n            positions: geometryCfg.positions,\n            indices: geometryCfg.indices\n        });\n\n        xktModel.createMesh({\n            meshId: meshId,\n            geometryId: geometryId,\n            color: (surfaceMaterial && surfaceMaterial.diffuseColor) ? surfaceMaterial.diffuseColor : [0.8, 0.8, 0.8],\n            opacity: 1.0\n            //opacity: (surfaceMaterial && surfaceMaterial.transparency !== undefined) ? (1.0 - surfaceMaterial.transparency) : 1.0\n        });\n\n        meshIds.push(meshId);\n\n        ctx.stats.numGeometries++;\n        ctx.stats.numVertices += geometryCfg.positions.length / 3;\n        ctx.stats.numTriangles += geometryCfg.indices.length / 3;\n    }\n}\n\nfunction parseGeometrySurfacesWithSharedMaterial(ctx, geometry, objectMaterial, meshIds) {\n\n    const xktModel = ctx.xktModel;\n    const sharedIndices = [];\n    const geometryCfg = {\n        positions: [],\n        indices: []\n    };\n\n    const geomType = geometry.type;\n\n    switch (geomType) {\n        case \"MultiPoint\":\n            break;\n\n        case \"MultiLineString\":\n            break;\n\n        case \"MultiSurface\":\n        case \"CompositeSurface\":\n            const surfaces = geometry.boundaries;\n            parseSurfacesWithSharedMaterial(ctx, surfaces, sharedIndices, geometryCfg);\n            break;\n\n        case \"Solid\":\n            const shells = geometry.boundaries;\n            for (let j = 0; j < shells.length; j++) {\n                const surfaces = shells[j];\n                parseSurfacesWithSharedMaterial(ctx, surfaces, sharedIndices, geometryCfg);\n            }\n            break;\n\n        case \"MultiSolid\":\n        case \"CompositeSolid\":\n            const solids = geometry.boundaries;\n            for (let j = 0; j < solids.length; j++) {\n                for (let k = 0; k < solids[j].length; k++) {\n                    const surfaces = solids[j][k];\n                    parseSurfacesWithSharedMaterial(ctx, surfaces, sharedIndices, geometryCfg);\n                }\n            }\n            break;\n\n        case \"GeometryInstance\":\n            break;\n    }\n\n    const geometryId = \"\" + ctx.nextId++;\n    const meshId = \"\" + ctx.nextId++;\n\n    xktModel.createGeometry({\n        geometryId: geometryId,\n        primitiveType: \"triangles\",\n        positions: geometryCfg.positions,\n        indices: geometryCfg.indices\n    });\n\n    xktModel.createMesh({\n        meshId: meshId,\n        geometryId: geometryId,\n        color: (objectMaterial && objectMaterial.diffuseColor) ? objectMaterial.diffuseColor : [0.8, 0.8, 0.8],\n        opacity: 1.0\n        //opacity: (objectMaterial && objectMaterial.transparency !== undefined) ? (1.0 - objectMaterial.transparency) : 1.0\n    });\n\n    meshIds.push(meshId);\n\n    ctx.stats.numGeometries++;\n    ctx.stats.numVertices += geometryCfg.positions.length / 3;\n    ctx.stats.numTriangles += geometryCfg.indices.length / 3;\n}\n\nfunction parseSurfacesWithSharedMaterial(ctx, surfaces, sharedIndices, primitiveCfg) {\n\n    const vertices = ctx.vertices;\n\n    for (let i = 0; i < surfaces.length; i++) {\n\n        let boundary = [];\n        let holes = [];\n\n        for (let j = 0; j < surfaces[i].length; j++) {\n            if (boundary.length > 0) {\n                holes.push(boundary.length);\n            }\n            const newBoundary = extractLocalIndices(ctx, surfaces[i][j], sharedIndices, primitiveCfg);\n            boundary.push(...newBoundary);\n        }\n\n        if (boundary.length === 3) { // Triangle\n\n            primitiveCfg.indices.push(boundary[0]);\n            primitiveCfg.indices.push(boundary[1]);\n            primitiveCfg.indices.push(boundary[2]);\n\n        } else if (boundary.length > 3) { // Polygon\n\n            let pList = [];\n\n            for (let k = 0; k < boundary.length; k++) {\n                pList.push({\n                    x: vertices[sharedIndices[boundary[k]]][0],\n                    y: vertices[sharedIndices[boundary[k]]][1],\n                    z: vertices[sharedIndices[boundary[k]]][2]\n                });\n            }\n\n            const normal = getNormalOfPositions(pList, math.vec3());\n            let pv = [];\n\n            for (let k = 0; k < pList.length; k++) {\n                to2D(pList[k], normal, tempVec2a);\n                pv.unshift(tempVec2a[0]);\n                pv.unshift(tempVec2a[1]);\n            }\n\n            const tr = earcut(pv, holes, 2);\n\n            for (let k = 0; k < tr.length; k += 3) {\n                primitiveCfg.indices.unshift(boundary[tr[k]]);\n                primitiveCfg.indices.unshift(boundary[tr[k + 1]]);\n                primitiveCfg.indices.unshift(boundary[tr[k + 2]]);\n            }\n        }\n    }\n}\n\nfunction extractLocalIndices(ctx, boundary, sharedIndices, geometryCfg) {\n\n    const vertices = ctx.vertices;\n    const newBoundary = []\n\n    for (let i = 0, len = boundary.length; i < len; i++) {\n\n        const index = boundary[i];\n\n        if (sharedIndices.includes(index)) {\n            const vertexIndex = sharedIndices.indexOf(index);\n            newBoundary.push(vertexIndex);\n\n        } else {\n            geometryCfg.positions.push(vertices[index][0]);\n            geometryCfg.positions.push(vertices[index][1]);\n            geometryCfg.positions.push(vertices[index][2]);\n\n            newBoundary.push(sharedIndices.length);\n\n            sharedIndices.push(index);\n        }\n    }\n\n    return newBoundary\n}\n\nfunction getNormalOfPositions(positions, normal) {\n\n    for (let i = 0; i < positions.length; i++) {\n\n        let nexti = i + 1;\n        if (nexti === positions.length) {\n            nexti = 0;\n        }\n\n        normal[0] += ((positions[i].y - positions[nexti].y) * (positions[i].z + positions[nexti].z));\n        normal[1] += ((positions[i].z - positions[nexti].z) * (positions[i].x + positions[nexti].x));\n        normal[2] += ((positions[i].x - positions[nexti].x) * (positions[i].y + positions[nexti].y));\n    }\n\n    return math.normalizeVec3(normal);\n}\n\nfunction to2D(_p, _n, re) {\n\n    const p = tempVec3a;\n    const n = tempVec3b;\n    const x3 = tempVec3c;\n\n    p[0] = _p.x;\n    p[1] = _p.y;\n    p[2] = _p.z;\n\n    n[0] = _n.x;\n    n[1] = _n.y;\n    n[2] = _n.z;\n\n    x3[0] = 1.1;\n    x3[1] = 1.1;\n    x3[2] = 1.1;\n\n    const dist = math.lenVec3(math.subVec3(x3, n));\n\n    if (dist < 0.01) {\n        x3[0] += 1.0;\n        x3[1] += 2.0;\n        x3[2] += 3.0;\n    }\n\n    const dot = math.dotVec3(x3, n);\n    const tmp2 = math.mulVec3Scalar(n, dot, math.vec3());\n\n    x3[0] -= tmp2[0];\n    x3[1] -= tmp2[1];\n    x3[2] -= tmp2[2];\n\n    math.normalizeVec3(x3);\n\n    const y3 = math.cross3Vec3(n, x3, math.vec3());\n    const x = math.dotVec3(p, x3);\n    const y = math.dotVec3(p, y3);\n\n    re[0] = x;\n    re[1] = y;\n}\n\nexport {parseCityJSONIntoXKTModel};","function isString(value) {\n    return (typeof value === 'string' || value instanceof String);\n}\n\nfunction apply(o, o2) {\n    for (const name in o) {\n        if (o.hasOwnProperty(name)) {\n            o2[name] = o[name];\n        }\n    }\n    return o2;\n}\n\n/**\n * @private\n */\nconst utils = {\n    isString,\n    apply\n};\n\nexport {utils};\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/gltf\");","import {utils} from \"../XKTModel/lib/utils.js\";\nimport {math} from \"../lib/math.js\";\n\nimport {parse} from '@loaders.gl/core';\nimport {GLTFLoader} from '@loaders.gl/gltf';\nimport {\n    ClampToEdgeWrapping,\n    LinearFilter,\n    LinearMipMapLinearFilter,\n    LinearMipMapNearestFilter,\n    MirroredRepeatWrapping,\n    NearestFilter,\n    NearestMipMapLinearFilter,\n    NearestMipMapNearestFilter,\n    RepeatWrapping\n} from \"../constants.js\";\n\n/**\n * @desc Parses glTF into an {@link XKTModel}, supporting ````.glb```` and textures.\n *\n * * Supports ````.glb```` and textures\n * * For a lightweight glTF JSON parser that ignores textures, see {@link parseGLTFJSONIntoXKTModel}.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load a binary glTF model into it.\n *\n * ````javascript\n * utils.loadArraybuffer(\"../assets/models/gltf/HousePlan/glTF-Binary/HousePlan.glb\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     parseGLTFIntoXKTModel({\n *          data,\n *          xktModel,\n *          log: (msg) => { console.log(msg); }\n *     }).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing parameters.\n * @param {ArrayBuffer} params.data The glTF.\n * @param {String} [params.baseUri] The base URI used to load this glTF, if any. For resolving relative uris to linked resources.\n * @param {Object} [params.metaModelData] Metamodel JSON. If this is provided, then parsing is able to ensure that the XKTObjects it creates will fit the metadata properly.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {Boolean} [params.includeTextures=true] Whether to parse textures.\n * @param {Boolean} [params.includeNormals=true] Whether to parse normals. When false, the parser will ignore the glTF\n * geometry normals, and the glTF data will rely on the xeokit ````Viewer```` to automatically generate them. This has\n * the limitation that the normals will be face-aligned, and therefore the ````Viewer```` will only be able to render\n * a flat-shaded non-PBR representation of the glTF.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n @returns {Promise} Resolves when glTF has been parsed.\n */\nfunction parseGLTFIntoXKTModel({\n                                   data,\n                                   baseUri,\n                                   xktModel,\n                                   metaModelData,\n                                   includeTextures = true,\n                                   includeNormals = true,\n                                   getAttachment,\n                                   stats = {},\n                                   log\n                               }) {\n\n    return new Promise(function (resolve, reject) {\n\n        if (!data) {\n            reject(\"Argument expected: data\");\n            return;\n        }\n\n        if (!xktModel) {\n            reject(\"Argument expected: xktModel\");\n            return;\n        }\n\n        stats.sourceFormat = \"glTF\";\n        stats.schemaVersion = \"2.0\";\n        stats.title = \"\";\n        stats.author = \"\";\n        stats.created = \"\";\n        stats.numTriangles = 0;\n        stats.numVertices = 0;\n        stats.numNormals = 0;\n        stats.numUVs = 0;\n        stats.numTextures = 0;\n        stats.numObjects = 0;\n        stats.numGeometries = 0;\n\n        parse(data, GLTFLoader, {\n            baseUri\n        }).then((gltfData) => {\n\n            const ctx = {\n                gltfData,\n                metaModelCorrections: metaModelData,\n                getAttachment: getAttachment || (() => {\n                    throw new Error('You must define getAttachment() method to convert glTF with external resources')\n                }),\n                log: (log || function (msg) {\n                }),\n                error: function (msg) {\n                    console.error(msg);\n                },\n                xktModel,\n                includeNormals: (includeNormals !== false),\n                includeTextures: (includeTextures !== false),\n                geometryCreated: {},\n                nextId: 0,\n                stats\n            };\n\n            ctx.log(\"Using parser: parseGLTFIntoXKTModel\");\n            ctx.log(`Parsing normals: ${ctx.includeNormals ? \"enabled\" : \"disabled\"}`);\n            ctx.log(`Parsing textures: ${ctx.includeTextures ? \"enabled\" : \"disabled\"}`);\n\n            if (ctx.includeTextures) {\n                parseTextures(ctx);\n            }\n            parseMaterials(ctx);\n            parseDefaultScene(ctx);\n\n            resolve();\n\n        }, (errMsg) => {\n            reject(`[parseGLTFIntoXKTModel] ${errMsg}`);\n        });\n    });\n}\n\nfunction parseTextures(ctx) {\n    const gltfData = ctx.gltfData;\n    const textures = gltfData.textures;\n    if (textures) {\n        for (let i = 0, len = textures.length; i < len; i++) {\n            parseTexture(ctx, textures[i]);\n            ctx.stats.numTextures++;\n        }\n    }\n}\n\nfunction parseTexture(ctx, texture) {\n    if (!texture.source || !texture.source.image) {\n        return;\n    }\n    const textureId = `texture-${ctx.nextId++}`;\n\n    let minFilter = NearestMipMapLinearFilter;\n    switch (texture.sampler.minFilter) {\n        case 9728:\n            minFilter = NearestFilter;\n            break;\n        case 9729:\n            minFilter = LinearFilter;\n            break;\n        case 9984:\n            minFilter = NearestMipMapNearestFilter;\n            break;\n        case 9985:\n            minFilter = LinearMipMapNearestFilter;\n            break;\n        case 9986:\n            minFilter = NearestMipMapLinearFilter;\n            break;\n        case 9987:\n            minFilter = LinearMipMapLinearFilter;\n            break;\n    }\n\n    let magFilter = LinearFilter;\n    switch (texture.sampler.magFilter) {\n        case 9728:\n            magFilter = NearestFilter;\n            break;\n        case 9729:\n            magFilter = LinearFilter;\n            break;\n    }\n\n    let wrapS = RepeatWrapping;\n    switch (texture.sampler.wrapS) {\n        case 33071:\n            wrapS = ClampToEdgeWrapping;\n            break;\n        case 33648:\n            wrapS = MirroredRepeatWrapping;\n            break;\n        case 10497:\n            wrapS = RepeatWrapping;\n            break;\n    }\n\n    let wrapT = RepeatWrapping;\n    switch (texture.sampler.wrapT) {\n        case 33071:\n            wrapT = ClampToEdgeWrapping;\n            break;\n        case 33648:\n            wrapT = MirroredRepeatWrapping;\n            break;\n        case 10497:\n            wrapT = RepeatWrapping;\n            break;\n    }\n\n    let wrapR = RepeatWrapping;\n    switch (texture.sampler.wrapR) {\n        case 33071:\n            wrapR = ClampToEdgeWrapping;\n            break;\n        case 33648:\n            wrapR = MirroredRepeatWrapping;\n            break;\n        case 10497:\n            wrapR = RepeatWrapping;\n            break;\n    }\n\n    ctx.xktModel.createTexture({\n        textureId: textureId,\n        imageData: texture.source.image,\n        mediaType: texture.source.mediaType,\n        compressed: true,\n        width: texture.source.image.width,\n        height: texture.source.image.height,\n        minFilter,\n        magFilter,\n        wrapS,\n        wrapT,\n        wrapR,\n        flipY: !!texture.flipY,\n        //     encoding: \"sRGB\"\n    });\n    texture._textureId = textureId;\n}\n\nfunction parseMaterials(ctx) {\n    const gltfData = ctx.gltfData;\n    const materials = gltfData.materials;\n    if (materials) {\n        for (let i = 0, len = materials.length; i < len; i++) {\n            const material = materials[i];\n            material._textureSetId = ctx.includeTextures ? parseTextureSet(ctx, material) : null;\n            material._attributes = parseMaterialAttributes(ctx, material);\n        }\n    }\n}\n\nfunction parseTextureSet(ctx, material) {\n    const textureSetCfg = {};\n    if (material.normalTexture) {\n        textureSetCfg.normalTextureId = material.normalTexture.texture._textureId;\n    }\n    if (material.occlusionTexture) {\n        textureSetCfg.occlusionTextureId = material.occlusionTexture.texture._textureId;\n    }\n    if (material.emissiveTexture) {\n        textureSetCfg.emissiveTextureId = material.emissiveTexture.texture._textureId;\n    }\n    // const alphaMode = material.alphaMode;\n    // switch (alphaMode) {\n    //     case \"NORMAL_OPAQUE\":\n    //         materialCfg.alphaMode = \"opaque\";\n    //         break;\n    //     case \"MASK\":\n    //         materialCfg.alphaMode = \"mask\";\n    //         break;\n    //     case \"BLEND\":\n    //         materialCfg.alphaMode = \"blend\";\n    //         break;\n    //     default:\n    // }\n    // const alphaCutoff = material.alphaCutoff;\n    // if (alphaCutoff !== undefined) {\n    //     materialCfg.alphaCutoff = alphaCutoff;\n    // }\n    const metallicPBR = material.pbrMetallicRoughness;\n    if (material.pbrMetallicRoughness) {\n        const pbrMetallicRoughness = material.pbrMetallicRoughness;\n        const baseColorTexture = pbrMetallicRoughness.baseColorTexture || pbrMetallicRoughness.colorTexture;\n        if (baseColorTexture) {\n            if (baseColorTexture.texture) {\n                textureSetCfg.colorTextureId = baseColorTexture.texture._textureId;\n            } else {\n                textureSetCfg.colorTextureId = ctx.gltfData.textures[baseColorTexture.index]._textureId;\n            }\n        }\n        if (metallicPBR.metallicRoughnessTexture) {\n            textureSetCfg.metallicRoughnessTextureId = metallicPBR.metallicRoughnessTexture.texture._textureId;\n        }\n    }\n    const extensions = material.extensions;\n    if (extensions) {\n        const specularPBR = extensions[\"KHR_materials_pbrSpecularGlossiness\"];\n        if (specularPBR) {\n            const specularTexture = specularPBR.specularTexture;\n            if (specularTexture !== null && specularTexture !== undefined) {\n                //  textureSetCfg.colorTextureId = ctx.gltfData.textures[specularColorTexture.index]._textureId;\n            }\n            const specularColorTexture = specularPBR.specularColorTexture;\n            if (specularColorTexture !== null && specularColorTexture !== undefined) {\n                textureSetCfg.colorTextureId = ctx.gltfData.textures[specularColorTexture.index]._textureId;\n            }\n        }\n    }\n    if (textureSetCfg.normalTextureId !== undefined ||\n        textureSetCfg.occlusionTextureId !== undefined ||\n        textureSetCfg.emissiveTextureId !== undefined ||\n        textureSetCfg.colorTextureId !== undefined ||\n        textureSetCfg.metallicRoughnessTextureId !== undefined) {\n        textureSetCfg.textureSetId = `textureSet-${ctx.nextId++};`\n        ctx.xktModel.createTextureSet(textureSetCfg);\n        ctx.stats.numTextureSets++;\n        return textureSetCfg.textureSetId;\n    }\n    return null;\n}\n\nfunction parseMaterialAttributes(ctx, material) { // Substitute RGBA for material, to use fast flat shading instead\n    const extensions = material.extensions;\n    const materialAttributes = {\n        color: new Float32Array([1, 1, 1, 1]),\n        opacity: 1,\n        metallic: 0,\n        roughness: 1\n    };\n    if (extensions) {\n        const specularPBR = extensions[\"KHR_materials_pbrSpecularGlossiness\"];\n        if (specularPBR) {\n            const diffuseFactor = specularPBR.diffuseFactor;\n            if (diffuseFactor !== null && diffuseFactor !== undefined) {\n                materialAttributes.color.set(diffuseFactor);\n            }\n        }\n        const common = extensions[\"KHR_materials_common\"];\n        if (common) {\n            const technique = common.technique;\n            const values = common.values || {};\n            const blinn = technique === \"BLINN\";\n            const phong = technique === \"PHONG\";\n            const lambert = technique === \"LAMBERT\";\n            const diffuse = values.diffuse;\n            if (diffuse && (blinn || phong || lambert)) {\n                if (!utils.isString(diffuse)) {\n                    materialAttributes.color.set(diffuse);\n                }\n            }\n            const transparency = values.transparency;\n            if (transparency !== null && transparency !== undefined) {\n                materialAttributes.opacity = transparency;\n            }\n            const transparent = values.transparent;\n            if (transparent !== null && transparent !== undefined) {\n                materialAttributes.opacity = transparent;\n            }\n        }\n    }\n    const metallicPBR = material.pbrMetallicRoughness;\n    if (metallicPBR) {\n        const baseColorFactor = metallicPBR.baseColorFactor;\n        if (baseColorFactor) {\n            materialAttributes.color[0] = baseColorFactor[0];\n            materialAttributes.color[1] = baseColorFactor[1];\n            materialAttributes.color[2] = baseColorFactor[2];\n            materialAttributes.opacity = baseColorFactor[3];\n        }\n        const metallicFactor = metallicPBR.metallicFactor;\n        if (metallicFactor !== null && metallicFactor !== undefined) {\n            materialAttributes.metallic = metallicFactor;\n        }\n        const roughnessFactor = metallicPBR.roughnessFactor;\n        if (roughnessFactor !== null && roughnessFactor !== undefined) {\n            materialAttributes.roughness = roughnessFactor;\n        }\n    }\n    return materialAttributes;\n}\n\nfunction parseDefaultScene(ctx) {\n    const gltfData = ctx.gltfData;\n    const scene = gltfData.scene || gltfData.scenes[0];\n    if (!scene) {\n        ctx.error(\"glTF has no default scene\");\n        return;\n    }\n    parseScene(ctx, scene);\n}\n\nfunction parseScene(ctx, scene) {\n    const nodes = scene.nodes;\n    if (!nodes) {\n        return;\n    }\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        const node = nodes[i];\n        countMeshUsage(ctx, node);\n    }\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        const node = nodes[i];\n        parseNode(ctx, node, 0, null);\n    }\n}\n\nfunction countMeshUsage(ctx, node) {\n    const mesh = node.mesh;\n    if (mesh) {\n        mesh.instances = mesh.instances ? mesh.instances + 1 : 1;\n    }\n    if (node.children) {\n        const children = node.children;\n        for (let i = 0, len = children.length; i < len; i++) {\n            const childNode = children[i];\n            if (!childNode) {\n                ctx.error(\"Node not found: \" + i);\n                continue;\n            }\n            countMeshUsage(ctx, childNode);\n        }\n    }\n}\n\nconst objectIdStack = [];\nconst meshIdsStack = [];\n\nlet meshIds = null;\n\nfunction parseNode(ctx, node, depth, matrix) {\n\n    const xktModel = ctx.xktModel;\n\n    // Pre-order visit scene node\n\n    let localMatrix;\n    if (node.matrix) {\n        localMatrix = node.matrix;\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, math.mat4());\n        } else {\n            matrix = localMatrix;\n        }\n    }\n    if (node.translation) {\n        localMatrix = math.translationMat4v(node.translation);\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, math.mat4());\n        } else {\n            matrix = localMatrix;\n        }\n    }\n    if (node.rotation) {\n        localMatrix = math.quaternionToMat4(node.rotation);\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, math.mat4());\n        } else {\n            matrix = localMatrix;\n        }\n    }\n    if (node.scale) {\n        localMatrix = math.scalingMat4v(node.scale);\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, math.mat4());\n        } else {\n            matrix = localMatrix;\n        }\n    }\n\n    if (node.name) {\n        meshIds = [];\n        let xktEntityId = node.name;\n        if (!!xktEntityId && xktModel.entities[xktEntityId]) {\n            ctx.log(`Warning: Two or more glTF nodes found with same 'name' attribute: '${xktEntityId} - will randomly-generating an object ID in XKT`);\n        }\n        while (!xktEntityId || xktModel.entities[xktEntityId]) {\n            xktEntityId = \"entity-\" + ctx.nextId++;\n        }\n        objectIdStack.push(xktEntityId);\n        meshIdsStack.push(meshIds);\n    }\n\n    if (meshIds && node.mesh) {\n\n        const mesh = node.mesh;\n        const numPrimitives = mesh.primitives.length;\n\n        if (numPrimitives > 0) {\n            for (let i = 0; i < numPrimitives; i++) {\n                const primitive = mesh.primitives[i];\n                if (!primitive._xktGeometryId) {\n                    const xktGeometryId = \"geometry-\" + ctx.nextId++;\n                    const geometryCfg = {\n                        geometryId: xktGeometryId\n                    };\n                    switch (primitive.mode) {\n                        case 0: // POINTS\n                            geometryCfg.primitiveType = \"points\";\n                            break;\n                        case 1: // LINES\n                            geometryCfg.primitiveType = \"lines\";\n                            break;\n                        case 2: // LINE_LOOP\n                            geometryCfg.primitiveType = \"line-loop\";\n                            break;\n                        case 3: // LINE_STRIP\n                            geometryCfg.primitiveType = \"line-strip\";\n                            break;\n                        case 4: // TRIANGLES\n                            geometryCfg.primitiveType = \"triangles\";\n                            break;\n                        case 5: // TRIANGLE_STRIP\n                            geometryCfg.primitiveType = \"triangle-strip\";\n                            break;\n                        case 6: // TRIANGLE_FAN\n                            geometryCfg.primitiveType = \"triangle-fan\";\n                            break;\n                        default:\n                            geometryCfg.primitiveType = \"triangles\";\n                    }\n                    const POSITION = primitive.attributes.POSITION;\n                    if (!POSITION) {\n                        continue;\n                    }\n                    geometryCfg.positions = primitive.attributes.POSITION.value;\n                    ctx.stats.numVertices += geometryCfg.positions.length / 3;\n                    if (ctx.includeNormals) {\n                        if (primitive.attributes.NORMAL) {\n                            geometryCfg.normals = primitive.attributes.NORMAL.value;\n                            ctx.stats.numNormals += geometryCfg.normals.length / 3;\n                        }\n                    }\n                    if (primitive.attributes.COLOR_0) {\n                        geometryCfg.colorsCompressed = primitive.attributes.COLOR_0.value;\n                    }\n                    if (ctx.includeTextures) {\n                        if (primitive.attributes.TEXCOORD_0) {\n                            geometryCfg.uvs = primitive.attributes.TEXCOORD_0.value;\n                            ctx.stats.numUVs += geometryCfg.uvs.length / 2;\n                        }\n                    }\n                    if (primitive.indices) {\n                        geometryCfg.indices = primitive.indices.value;\n                        if (primitive.mode === 4) {\n                            ctx.stats.numTriangles += geometryCfg.indices.length / 3;\n                        }\n                    }\n                    xktModel.createGeometry(geometryCfg);\n                    primitive._xktGeometryId = xktGeometryId;\n                    ctx.stats.numGeometries++;\n                }\n\n                const xktMeshId = ctx.nextId++;\n                const meshCfg = {\n                    meshId: xktMeshId,\n                    geometryId: primitive._xktGeometryId,\n                    matrix: matrix ? matrix.slice() : math.identityMat4()\n                };\n                const material = primitive.material;\n                if (material) {\n                    meshCfg.textureSetId = material._textureSetId;\n                    meshCfg.color = material._attributes.color;\n                    meshCfg.opacity = material._attributes.opacity;\n                    meshCfg.metallic = material._attributes.metallic;\n                    meshCfg.roughness = material._attributes.roughness;\n                } else {\n                    meshCfg.color = [1.0, 1.0, 1.0];\n                    meshCfg.opacity = 1.0;\n                }\n                xktModel.createMesh(meshCfg);\n                meshIds.push(xktMeshId);\n            }\n        }\n    }\n\n    // Visit child scene nodes\n\n    if (node.children) {\n        const children = node.children;\n        for (let i = 0, len = children.length; i < len; i++) {\n            const childNode = children[i];\n            parseNode(ctx, childNode, depth + 1, matrix);\n        }\n    }\n\n    // Post-order visit scene node\n\n    const nodeName = node.name;\n    if ((nodeName !== undefined && nodeName !== null) || depth === 0) {\n        if (nodeName === undefined || nodeName === null) {\n            ctx.log(`Warning: 'name' properties not found on glTF scene nodes - will randomly-generate object IDs in XKT`);\n        }\n        let xktEntityId = objectIdStack.pop();\n        if (!xktEntityId) { // For when there are no nodes with names\n            xktEntityId = \"entity-\" + ctx.nextId++;\n        }\n        let entityMeshIds = meshIdsStack.pop();\n        if (meshIds && meshIds.length > 0) {\n            xktModel.createEntity({\n                entityId: xktEntityId,\n                meshIds: entityMeshIds\n            });\n        }\n        ctx.stats.numObjects++;\n        meshIds = meshIdsStack.length > 0 ? meshIdsStack[meshIdsStack.length - 1] : null;\n    }\n}\n\nexport {parseGLTFIntoXKTModel};","import {utils} from \"../XKTModel/lib/utils.js\";\nimport {math} from \"../lib/math.js\";\n\nconst atob2 = (typeof atob !== 'undefined') ? atob : a => Buffer.from(a, 'base64').toString('binary');\n\nconst WEBGL_COMPONENT_TYPES = {\n    5120: Int8Array,\n    5121: Uint8Array,\n    5122: Int16Array,\n    5123: Uint16Array,\n    5125: Uint32Array,\n    5126: Float32Array\n};\n\nconst WEBGL_TYPE_SIZES = {\n    'SCALAR': 1,\n    'VEC2': 2,\n    'VEC3': 3,\n    'VEC4': 4,\n    'MAT2': 4,\n    'MAT3': 9,\n    'MAT4': 16\n};\n\n/**\n * @desc Parses glTF JSON into an {@link XKTModel}, without ````.glb```` and textures.\n *\n * * Lightweight JSON-based glTF parser which ignores textures\n * * For texture and ````.glb```` support, see {@link parseGLTFIntoXKTModel}\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load a glTF model into it.\n *\n * ````javascript\n * utils.loadJSON(\"./models/gltf/duplex/scene.gltf\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     parseGLTFJSONIntoXKTModel({\n *          data,\n *          xktModel,\n *          log: (msg) => { console.log(msg); }\n *     }).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing parameters.\n * @param {Object} params.data The glTF JSON.\n * @param {Object} [params.metaModelData] Metamodel JSON. If this is provided, then parsing is able to ensure that the XKTObjects it creates will fit the metadata properly.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {Boolean} [params.includeNormals=false] Whether to parse normals. When false, the parser will ignore the glTF\n * geometry normals, and the glTF data will rely on the xeokit ````Viewer```` to automatically generate them. This has\n * the limitation that the normals will be face-aligned, and therefore the ````Viewer```` will only be able to render\n * a flat-shaded representation of the glTF.\n * @param {Boolean} [params.reuseGeometries=true] When true, the parser will enable geometry reuse within the XKTModel. When false,\n * will automatically \"expand\" all reused geometries into duplicate copies. This has the drawback of increasing the XKT\n * file size (~10-30% for typical models), but can make the model more responsive in the xeokit Viewer, especially if the model\n * has excessive geometry reuse. An example of excessive geometry reuse would be if we have 4000 geometries that are\n * shared amongst 2000 objects, ie. a large number of geometries with a low amount of reuse, which can present a\n * pathological performance case for xeokit's underlying graphics APIs (WebGL, WebGPU etc).\n * @param {function} [params.getAttachment] Callback through which to fetch attachments, if the glTF has them.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n * @returns {Promise}\n */\nfunction parseGLTFJSONIntoXKTModel({\n                                       data,\n                                       xktModel,\n                                       metaModelData,\n                                       includeNormals,\n                                       reuseGeometries,\n                                       getAttachment,\n                                       stats = {},\n                                       log\n                                   }) {\n\n    if (log) {\n        log(\"Using parser: parseGLTFJSONIntoXKTModel\");\n    }\n\n    return new Promise(function (resolve, reject) {\n\n        if (!data) {\n            reject(\"Argument expected: data\");\n            return;\n        }\n\n        if (!xktModel) {\n            reject(\"Argument expected: xktModel\");\n            return;\n        }\n\n        stats.sourceFormat = \"glTF\";\n        stats.schemaVersion = \"2.0\";\n        stats.title = \"\";\n        stats.author = \"\";\n        stats.created = \"\";\n        stats.numTriangles = 0;\n        stats.numVertices = 0;\n        stats.numNormals = 0;\n        stats.numObjects = 0;\n        stats.numGeometries = 0;\n\n        const ctx = {\n            gltf: data,\n            metaModelCorrections: metaModelData ? getMetaModelCorrections(metaModelData) : null,\n            getAttachment: getAttachment || (() => {\n                throw new Error('You must define getAttachment() method to convert glTF with external resources')\n            }),\n            log: (log || function (msg) {\n            }),\n            xktModel,\n            includeNormals,\n            createXKTGeometryIds: {},\n            nextMeshId: 0,\n            reuseGeometries: (reuseGeometries !== false),\n            stats\n        };\n\n        ctx.log(`Parsing normals: ${ctx.includeNormals ? \"enabled\" : \"disabled\"}`);\n\n        parseBuffers(ctx).then(() => {\n\n            parseBufferViews(ctx);\n            freeBuffers(ctx);\n            parseMaterials(ctx);\n            parseDefaultScene(ctx);\n\n            resolve();\n\n        }, (errMsg) => {\n            reject(errMsg);\n        });\n    });\n}\n\nfunction getMetaModelCorrections(metaModelData) {\n    const eachRootStats = {};\n    const eachChildRoot = {};\n    const metaObjects = metaModelData.metaObjects || [];\n    const metaObjectsMap = {};\n    for (let i = 0, len = metaObjects.length; i < len; i++) {\n        const metaObject = metaObjects[i];\n        metaObjectsMap[metaObject.id] = metaObject;\n    }\n    for (let i = 0, len = metaObjects.length; i < len; i++) {\n        const metaObject = metaObjects[i];\n        if (metaObject.parent !== undefined && metaObject.parent !== null) {\n            const metaObjectParent = metaObjectsMap[metaObject.parent];\n            if (metaObject.type === metaObjectParent.type) {\n                let rootMetaObject = metaObjectParent;\n                while (rootMetaObject.parent && metaObjectsMap[rootMetaObject.parent].type === rootMetaObject.type) {\n                    rootMetaObject = metaObjectsMap[rootMetaObject.parent];\n                }\n                const rootStats = eachRootStats[rootMetaObject.id] || (eachRootStats[rootMetaObject.id] = {\n                    numChildren: 0,\n                    countChildren: 0\n                });\n                rootStats.numChildren++;\n                eachChildRoot[metaObject.id] = rootMetaObject;\n            } else {\n\n            }\n        }\n    }\n    const metaModelCorrections = {\n        metaObjectsMap,\n        eachRootStats,\n        eachChildRoot\n    };\n    return metaModelCorrections;\n}\n\nfunction parseBuffers(ctx) {  // Parses geometry buffers into temporary  \"_buffer\" Unit8Array properties on the glTF \"buffer\" elements\n    const buffers = ctx.gltf.buffers;\n    if (buffers) {\n        return Promise.all(buffers.map(buffer => parseBuffer(ctx, buffer)));\n    } else {\n        return new Promise(function (resolve, reject) {\n            resolve();\n        });\n    }\n}\n\nfunction parseBuffer(ctx, bufferInfo) {\n    return new Promise(function (resolve, reject) {\n        // Allow a shortcut where the glTF buffer is \"enrichened\" with direct\n        // access to the data-arrayBuffer, w/out needing to either:\n        // - read the file indicated by the \".uri\" component of the buffer\n        // - base64-decode the encoded data in the \".uri\" component\n        if (bufferInfo._arrayBuffer) {\n            bufferInfo._buffer = bufferInfo._arrayBuffer;\n            resolve(bufferInfo);\n            return;\n        }\n        // Otherwise, proceed with \"standard-glTF\" .uri component.\n        const uri = bufferInfo.uri;\n        if (!uri) {\n            reject('gltf/handleBuffer missing uri in ' + JSON.stringify(bufferInfo));\n            return;\n        }\n        parseArrayBuffer(ctx, uri).then((arrayBuffer) => {\n            bufferInfo._buffer = arrayBuffer;\n            resolve(arrayBuffer);\n        }, (errMsg) => {\n            reject(errMsg);\n        })\n    });\n}\n\nfunction parseArrayBuffer(ctx, uri) {\n    return new Promise(function (resolve, reject) {\n        const dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/; // Check for data: URI\n        const dataUriRegexResult = uri.match(dataUriRegex);\n        if (dataUriRegexResult) { // Safari can't handle data URIs through XMLHttpRequest\n            const isBase64 = !!dataUriRegexResult[2];\n            let data = dataUriRegexResult[3];\n            data = decodeURIComponent(data);\n            if (isBase64) {\n                data = atob2(data);\n            }\n            const buffer = new ArrayBuffer(data.length);\n            const view = new Uint8Array(buffer);\n            for (let i = 0; i < data.length; i++) {\n                view[i] = data.charCodeAt(i);\n            }\n            resolve(buffer);\n        } else { // Uri is a path to a file\n            ctx.getAttachment(uri).then(\n                (arrayBuffer) => {\n                    resolve(arrayBuffer);\n                },\n                (errMsg) => {\n                    reject(errMsg);\n                });\n        }\n    });\n}\n\nfunction parseBufferViews(ctx) { // Parses our temporary \"_buffer\" properties into \"_buffer\" properties on glTF \"bufferView\" elements\n    const bufferViewsInfo = ctx.gltf.bufferViews;\n    if (bufferViewsInfo) {\n        for (let i = 0, len = bufferViewsInfo.length; i < len; i++) {\n            parseBufferView(ctx, bufferViewsInfo[i]);\n        }\n    }\n}\n\nfunction parseBufferView(ctx, bufferViewInfo) {\n    const buffer = ctx.gltf.buffers[bufferViewInfo.buffer];\n    bufferViewInfo._typedArray = null;\n    const byteLength = bufferViewInfo.byteLength || 0;\n    const byteOffset = bufferViewInfo.byteOffset || 0;\n    bufferViewInfo._buffer = buffer._buffer.slice(byteOffset, byteOffset + byteLength);\n}\n\nfunction freeBuffers(ctx) { // Deletes the \"_buffer\" properties from the glTF \"buffer\" elements, to save memory\n    const buffers = ctx.gltf.buffers;\n    if (buffers) {\n        for (let i = 0, len = buffers.length; i < len; i++) {\n            buffers[i]._buffer = null;\n        }\n    }\n}\n\nfunction parseMaterials(ctx) {\n    const materialsInfo = ctx.gltf.materials;\n    if (materialsInfo) {\n        for (let i = 0, len = materialsInfo.length; i < len; i++) {\n            const materialInfo = materialsInfo[i];\n            const material = parseMaterial(ctx, materialInfo);\n            materialInfo._materialData = material;\n        }\n    }\n}\n\nfunction parseMaterial(ctx, materialInfo) { // Attempts to extract an RGBA color for a glTF material\n    const material = {\n        color: new Float32Array([1, 1, 1]),\n        opacity: 1.0,\n        metallic: 0,\n        roughness: 1\n    };\n    const extensions = materialInfo.extensions;\n    if (extensions) {\n        const specularPBR = extensions[\"KHR_materials_pbrSpecularGlossiness\"];\n        if (specularPBR) {\n            const diffuseFactor = specularPBR.diffuseFactor;\n            if (diffuseFactor !== null && diffuseFactor !== undefined) {\n                material.color[0] = diffuseFactor[0];\n                material.color[1] = diffuseFactor[1];\n                material.color[2] = diffuseFactor[2];\n            }\n        }\n        const common = extensions[\"KHR_materials_common\"];\n        if (common) {\n            const technique = common.technique;\n            const values = common.values || {};\n            const blinn = technique === \"BLINN\";\n            const phong = technique === \"PHONG\";\n            const lambert = technique === \"LAMBERT\";\n            const diffuse = values.diffuse;\n            if (diffuse && (blinn || phong || lambert)) {\n                if (!utils.isString(diffuse)) {\n                    material.color[0] = diffuse[0];\n                    material.color[1] = diffuse[1];\n                    material.color[2] = diffuse[2];\n                }\n            }\n            const transparency = values.transparency;\n            if (transparency !== null && transparency !== undefined) {\n                material.opacity = transparency;\n            }\n            const transparent = values.transparent;\n            if (transparent !== null && transparent !== undefined) {\n                material.opacity = transparent;\n            }\n        }\n    }\n    const metallicPBR = materialInfo.pbrMetallicRoughness;\n    if (metallicPBR) {\n        const baseColorFactor = metallicPBR.baseColorFactor;\n        if (baseColorFactor) {\n            material.color[0] = baseColorFactor[0];\n            material.color[1] = baseColorFactor[1];\n            material.color[2] = baseColorFactor[2];\n            material.opacity = baseColorFactor[3];\n        }\n        const metallicFactor = metallicPBR.metallicFactor;\n        if (metallicFactor !== null && metallicFactor !== undefined) {\n            material.metallic = metallicFactor;\n        }\n        const roughnessFactor = metallicPBR.roughnessFactor;\n        if (roughnessFactor !== null && roughnessFactor !== undefined) {\n            material.roughness = roughnessFactor;\n        }\n    }\n    return material;\n}\n\nfunction parseDefaultScene(ctx) {\n    const scene = ctx.gltf.scene || 0;\n    const defaultSceneInfo = ctx.gltf.scenes[scene];\n    if (!defaultSceneInfo) {\n        throw new Error(\"glTF has no default scene\");\n    }\n    parseScene(ctx, defaultSceneInfo);\n}\n\n\nfunction parseScene(ctx, sceneInfo) {\n    const nodes = sceneInfo.nodes;\n    if (!nodes) {\n        return;\n    }\n    for (let i = 0, len = nodes.length; i < len; i++) {\n        const glTFNode = ctx.gltf.nodes[nodes[i]];\n        if (glTFNode) {\n            parseNode(ctx, glTFNode, 0, null);\n        }\n    }\n}\n\nlet deferredMeshIds = [];\n\nfunction parseNode(ctx, glTFNode, depth, matrix) {\n\n    const gltf = ctx.gltf;\n    const xktModel = ctx.xktModel;\n\n    let localMatrix;\n\n    if (glTFNode.matrix) {\n        localMatrix = glTFNode.matrix;\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, math.mat4());\n        } else {\n            matrix = localMatrix;\n        }\n    }\n\n    if (glTFNode.translation) {\n        localMatrix = math.translationMat4v(glTFNode.translation);\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, localMatrix);\n        } else {\n            matrix = localMatrix;\n        }\n    }\n\n    if (glTFNode.rotation) {\n        localMatrix = math.quaternionToMat4(glTFNode.rotation);\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, localMatrix);\n        } else {\n            matrix = localMatrix;\n        }\n    }\n\n    if (glTFNode.scale) {\n        localMatrix = math.scalingMat4v(glTFNode.scale);\n        if (matrix) {\n            matrix = math.mulMat4(matrix, localMatrix, localMatrix);\n        } else {\n            matrix = localMatrix;\n        }\n    }\n\n    const gltfMeshId = glTFNode.mesh;\n\n    if (gltfMeshId !== undefined) {\n\n        const meshInfo = gltf.meshes[gltfMeshId];\n\n        if (meshInfo) {\n\n            const numPrimitivesInMesh = meshInfo.primitives.length;\n\n            if (numPrimitivesInMesh > 0) {\n\n                for (let i = 0; i < numPrimitivesInMesh; i++) {\n\n                    const primitiveInfo = meshInfo.primitives[i];\n\n                    const geometryHash = createPrimitiveGeometryHash(primitiveInfo);\n\n                    let xktGeometryId = ctx.createXKTGeometryIds[geometryHash];\n\n                    if ((!ctx.reuseGeometries) || !xktGeometryId) {\n\n                        xktGeometryId = \"geometry-\" + ctx.nextMeshId++\n\n                        const geometryArrays = {};\n\n                        parsePrimitiveGeometry(ctx, primitiveInfo, geometryArrays);\n\n                        const colors = geometryArrays.colors;\n\n                        let colorsCompressed;\n\n                        if (geometryArrays.colors) {\n                            colorsCompressed = [];\n                            for (let j = 0, lenj = colors.length; j < lenj; j += 4) {\n                                colorsCompressed.push(colors[j + 0]);\n                                colorsCompressed.push(colors[j + 1]);\n                                colorsCompressed.push(colors[j + 2]);\n                                colorsCompressed.push(255);\n                            }\n                        }\n\n                        xktModel.createGeometry({\n                            geometryId: xktGeometryId,\n                            primitiveType: geometryArrays.primitive,\n                            positions: geometryArrays.positions,\n                            normals: ctx.includeNormals ? geometryArrays.normals : null,\n                            colorsCompressed: colorsCompressed,\n                            indices: geometryArrays.indices\n                        });\n\n                        ctx.stats.numGeometries++;\n                        ctx.stats.numVertices += geometryArrays.positions ? geometryArrays.positions.length / 3 : 0;\n                        ctx.stats.numNormals += (ctx.includeNormals && geometryArrays.normals) ? geometryArrays.normals.length / 3 : 0;\n                        ctx.stats.numTriangles += geometryArrays.indices ? geometryArrays.indices.length / 3 : 0;\n\n                        ctx.createXKTGeometryIds[geometryHash] = xktGeometryId;\n                    } else {\n// Geometry reused\n                    }\n\n                    const materialIndex = primitiveInfo.material;\n                    const materialInfo = (materialIndex !== null && materialIndex !== undefined) ? gltf.materials[materialIndex] : null;\n                    const color = materialInfo ? materialInfo._materialData.color : new Float32Array([1.0, 1.0, 1.0, 1.0]);\n                    const opacity = materialInfo ? materialInfo._materialData.opacity : 1.0;\n                    const metallic = materialInfo ? materialInfo._materialData.metallic : 0.0;\n                    const roughness = materialInfo ? materialInfo._materialData.roughness : 1.0;\n\n                    const xktMeshId = \"mesh-\" + ctx.nextMeshId++;\n\n                    xktModel.createMesh({\n                        meshId: xktMeshId,\n                        geometryId: xktGeometryId,\n                        matrix: matrix ? matrix.slice() : math.identityMat4(),\n                        color: color,\n                        opacity: opacity,\n                        metallic: metallic,\n                        roughness: roughness\n                    });\n\n                    deferredMeshIds.push(xktMeshId);\n                }\n            }\n        }\n    }\n\n\n    if (glTFNode.children) {\n        const children = glTFNode.children;\n        for (let i = 0, len = children.length; i < len; i++) {\n            const childNodeIdx = children[i];\n            const childGLTFNode = gltf.nodes[childNodeIdx];\n            if (!childGLTFNode) {\n                console.warn('Node not found: ' + i);\n                continue;\n            }\n            parseNode(ctx, childGLTFNode, depth + 1, matrix);\n        }\n    }\n\n    // Post-order visit scene node\n\n    const nodeName = glTFNode.name;\n    if (((nodeName !== undefined && nodeName !== null) || depth === 0) && deferredMeshIds.length > 0) {\n        if (nodeName === undefined || nodeName === null) {\n            ctx.log(`[parseGLTFJSONIntoXKTModel] Warning: 'name' properties not found on glTF scene nodes - will randomly-generate object IDs in XKT`);\n        }\n        let xktEntityId = nodeName; // Fall back on generated ID when `name` not found on glTF scene node(s)\n        if (xktEntityId === undefined || xktEntityId === null) {\n            if (xktModel.entities[xktEntityId]) {\n                ctx.error(\"Two or more glTF nodes found with same 'name' attribute: '\" + nodeName + \"'\");\n            }\n            while (!xktEntityId || xktModel.entities[xktEntityId]) {\n                xktEntityId = \"entity-\" + ctx.nextId++;\n            }\n        }\n        if (ctx.metaModelCorrections) {  // Merging meshes into XKTObjects that map to metaobjects\n            const rootMetaObject = ctx.metaModelCorrections.eachChildRoot[xktEntityId];\n            if (rootMetaObject) {\n                const rootMetaObjectStats = ctx.metaModelCorrections.eachRootStats[rootMetaObject.id];\n                rootMetaObjectStats.countChildren++;\n                if (rootMetaObjectStats.countChildren >= rootMetaObjectStats.numChildren) {\n                    xktModel.createEntity({\n                        entityId: rootMetaObject.id,\n                        meshIds: deferredMeshIds\n                    });\n                    ctx.stats.numObjects++;\n                    deferredMeshIds = [];\n                }\n            } else {\n                const metaObject = ctx.metaModelCorrections.metaObjectsMap[xktEntityId];\n                if (metaObject) {\n                    xktModel.createEntity({\n                        entityId: xktEntityId,\n                        meshIds: deferredMeshIds\n                    });\n                    ctx.stats.numObjects++;\n                    deferredMeshIds = [];\n                }\n            }\n        } else { // Create an XKTObject from the meshes at each named glTF node, don't care about metaobjects\n            xktModel.createEntity({\n                entityId: xktEntityId,\n                meshIds: deferredMeshIds\n            });\n            ctx.stats.numObjects++;\n            deferredMeshIds = [];\n        }\n    }\n}\n\nfunction createPrimitiveGeometryHash(primitiveInfo) {\n    const attributes = primitiveInfo.attributes;\n    if (!attributes) {\n        return \"empty\";\n    }\n    const mode = primitiveInfo.mode;\n    const material = primitiveInfo.material;\n    const indices = primitiveInfo.indices;\n    const positions = primitiveInfo.attributes.POSITION;\n    const normals = primitiveInfo.attributes.NORMAL;\n    const colors = primitiveInfo.attributes.COLOR_0;\n    const uv = primitiveInfo.attributes.TEXCOORD_0;\n    return [\n        mode,\n        //  material,\n        (indices !== null && indices !== undefined) ? indices : \"-\",\n        (positions !== null && positions !== undefined) ? positions : \"-\",\n        (normals !== null && normals !== undefined) ? normals : \"-\",\n        (colors !== null && colors !== undefined) ? colors : \"-\",\n        (uv !== null && uv !== undefined) ? uv : \"-\"\n    ].join(\";\");\n}\n\nfunction parsePrimitiveGeometry(ctx, primitiveInfo, geometryArrays) {\n    const attributes = primitiveInfo.attributes;\n    if (!attributes) {\n        return;\n    }\n    switch (primitiveInfo.mode) {\n        case 0: // POINTS\n            geometryArrays.primitive = \"points\";\n            break;\n        case 1: // LINES\n            geometryArrays.primitive = \"lines\";\n            break;\n        case 2: // LINE_LOOP\n            // TODO: convert\n            geometryArrays.primitive = \"lines\";\n            break;\n        case 3: // LINE_STRIP\n            // TODO: convert\n            geometryArrays.primitive = \"lines\";\n            break;\n        case 4: // TRIANGLES\n            geometryArrays.primitive = \"triangles\";\n            break;\n        case 5: // TRIANGLE_STRIP\n            // TODO: convert\n            console.log(\"TRIANGLE_STRIP\");\n            geometryArrays.primitive = \"triangles\";\n            break;\n        case 6: // TRIANGLE_FAN\n            // TODO: convert\n            console.log(\"TRIANGLE_FAN\");\n            geometryArrays.primitive = \"triangles\";\n            break;\n        default:\n            geometryArrays.primitive = \"triangles\";\n    }\n    const accessors = ctx.gltf.accessors;\n    const indicesIndex = primitiveInfo.indices;\n    if (indicesIndex !== null && indicesIndex !== undefined) {\n        const accessorInfo = accessors[indicesIndex];\n        geometryArrays.indices = parseAccessorTypedArray(ctx, accessorInfo);\n    }\n    const positionsIndex = attributes.POSITION;\n    if (positionsIndex !== null && positionsIndex !== undefined) {\n        const accessorInfo = accessors[positionsIndex];\n        geometryArrays.positions = parseAccessorTypedArray(ctx, accessorInfo);\n    }\n    const normalsIndex = attributes.NORMAL;\n    if (normalsIndex !== null && normalsIndex !== undefined) {\n        const accessorInfo = accessors[normalsIndex];\n        geometryArrays.normals = parseAccessorTypedArray(ctx, accessorInfo);\n    }\n    const colorsIndex = attributes.COLOR_0;\n    if (colorsIndex !== null && colorsIndex !== undefined) {\n        const accessorInfo = accessors[colorsIndex];\n        geometryArrays.colors = parseAccessorTypedArray(ctx, accessorInfo);\n    }\n}\n\nfunction parseAccessorTypedArray(ctx, accessorInfo) {\n    const bufferView = ctx.gltf.bufferViews[accessorInfo.bufferView];\n    const itemSize = WEBGL_TYPE_SIZES[accessorInfo.type];\n    const TypedArray = WEBGL_COMPONENT_TYPES[accessorInfo.componentType];\n    const elementBytes = TypedArray.BYTES_PER_ELEMENT; // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n    const itemBytes = elementBytes * itemSize;\n    if (accessorInfo.byteStride && accessorInfo.byteStride !== itemBytes) { // The buffer is not interleaved if the stride is the item size in bytes.\n        throw new Error(\"interleaved buffer!\"); // TODO\n    } else {\n        return new TypedArray(bufferView._buffer, accessorInfo.byteOffset || 0, accessorInfo.count * itemSize);\n    }\n}\n\nexport {parseGLTFJSONIntoXKTModel};\n","/**\n * @desc Parses IFC STEP file data into an {@link XKTModel}.\n *\n * This function uses [web-ifc](https://github.com/tomvandig/web-ifc) to parse the IFC, which relies on a\n * WASM file to do the parsing.\n *\n * Depending on how we use this function, we may need to provide it with a path to the directory where that WASM file is stored.\n *\n * This function is tested with web-ifc version 0.0.34.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load an IFC model into it.\n *\n * ````javascript\n * import {XKTModel, parseIFCIntoXKTModel, writeXKTModelToArrayBuffer} from \"xeokit-convert.es.js\";\n *\n * import * as WebIFC from \"web-ifc-api.js\";\n *\n * utils.loadArraybuffer(\"rac_advanced_sample_project.ifc\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     parseIFCIntoXKTModel({\n *          WebIFC,\n *          data,\n *          xktModel,\n *          wasmPath: \"../dist/\",\n *          autoNormals: true,\n *          log: (msg) => { console.log(msg); }\n *     }).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing params.\n * @param {Object} params.WebIFC The WebIFC library. We pass this in as an external dependency, in order to give the\n * caller the choice of whether to use the Browser or NodeJS version.\n * @param {ArrayBuffer} [params.data] IFC file data.\n * @param {XKTModel} [params.xktModel] XKTModel to parse into.\n * @param {Boolean} [params.autoNormals=true] When true, the parser will ignore the IFC geometry normals, and the IFC\n * data will rely on the xeokit ````Viewer```` to automatically generate them. This has the limitation that the\n * normals will be face-aligned, and therefore the ````Viewer```` will only be able to render a flat-shaded representation\n * of the IFC model. This is ````true```` by default, because IFC models tend to look acceptable with flat-shading,\n * and we always want to minimize IFC model size wherever possible.\n * @param {String[]} [params.includeTypes] Option to only convert objects of these types.\n * @param {String[]} [params.excludeTypes] Option to never convert objects of these types.\n * @param {String} params.wasmPath Path to ````web-ifc.wasm````, required by this function.\n * @param {Object} [params.stats={}] Collects statistics.\n * @param {function} [params.log] Logging callback.\n * @returns {Promise} Resolves when IFC has been parsed.\n */\nfunction parseIFCIntoXKTModel({\n                                  WebIFC,\n                                  data,\n                                  xktModel,\n                                  autoNormals = true,\n                                  includeTypes,\n                                  excludeTypes,\n                                  wasmPath,\n                                  stats = {},\n                                  log\n                              }) {\n\n    if (log) {\n        log(\"Using parser: parseIFCIntoXKTModel\");\n    }\n\n    return new Promise(function (resolve, reject) {\n\n        if (!data) {\n            reject(\"Argument expected: data\");\n            return;\n        }\n\n        if (!xktModel) {\n            reject(\"Argument expected: xktModel\");\n            return;\n        }\n\n        if (!wasmPath) {\n            reject(\"Argument expected: wasmPath\");\n            return;\n        }\n\n        const ifcAPI = new WebIFC.IfcAPI();\n\n        if (wasmPath) {\n            ifcAPI.SetWasmPath(wasmPath);\n        }\n\n        ifcAPI.Init().then(() => {\n\n            const dataArray = new Uint8Array(data);\n\n            const modelID = ifcAPI.OpenModel(dataArray);\n\n            stats.sourceFormat = \"IFC\";\n            stats.schemaVersion = \"\";\n            stats.title = \"\";\n            stats.author = \"\";\n            stats.created = \"\";\n            stats.numMetaObjects = 0;\n            stats.numPropertySets = 0;\n            stats.numObjects = 0;\n            stats.numGeometries = 0;\n            stats.numTriangles = 0;\n            stats.numVertices = 0;\n\n            const ctx = {\n                WebIFC,\n                modelID,\n                ifcAPI,\n                xktModel,\n                autoNormals,\n                log: (log || function (msg) {\n                }),\n                nextId: 0,\n                stats\n            };\n\n            if (includeTypes) {\n                ctx.includeTypes = {};\n                for (let i = 0, len = includeTypes.length; i < len; i++) {\n                    ctx.includeTypes[includeTypes[i]] = true;\n                }\n            }\n\n            if (excludeTypes) {\n                ctx.excludeTypes = {};\n                for (let i = 0, len = excludeTypes.length; i < len; i++) {\n                    ctx.excludeTypes[excludeTypes[i]] = true;\n                }\n            }\n\n            const lines = ctx.ifcAPI.GetLineIDsWithType(modelID, WebIFC.IFCPROJECT);\n            const ifcProjectId = lines.get(0);\n            const ifcProject = ctx.ifcAPI.GetLine(modelID, ifcProjectId);\n\n            ctx.xktModel.schema = \"\";\n            ctx.xktModel.modelId = \"\" + modelID;\n            ctx.xktModel.projectId = \"\" + ifcProjectId;\n\n            parseMetadata(ctx);\n            parseGeometry(ctx);\n            parsePropertySets(ctx);\n\n            resolve();\n\n        }).catch((e) => {\n\n            reject(e);\n        })\n    });\n}\n\nfunction parsePropertySets(ctx) {\n\n    const lines = ctx.ifcAPI.GetLineIDsWithType(ctx.modelID, ctx.WebIFC.IFCRELDEFINESBYPROPERTIES);\n\n    for (let i = 0; i < lines.size(); i++) {\n\n        let relID = lines.get(i);\n\n        let rel = ctx.ifcAPI.GetLine(ctx.modelID, relID, true);\n\n        if (rel) {\n\n            const relatingPropertyDefinition = rel.RelatingPropertyDefinition;\n            if (!relatingPropertyDefinition) {\n                continue;\n            }\n\n            const propertySetId = relatingPropertyDefinition.GlobalId.value;\n\n            const relatedObjects = rel.RelatedObjects;\n            if (relatedObjects) {\n                for (let i = 0, len = relatedObjects.length; i < len; i++) {\n                    const relatedObject = relatedObjects[i];\n                    const metaObjectId = relatedObject.GlobalId.value;\n                    const metaObject = ctx.xktModel.metaObjects[metaObjectId];\n                    if (metaObject) {\n                        if (!metaObject.propertySetIds) {\n                            metaObject.propertySetIds = [];\n                        }\n                        metaObject.propertySetIds.push(propertySetId);\n                    }\n                }\n            }\n\n            const props = relatingPropertyDefinition.HasProperties;\n            if (props && props.length > 0) {\n                const propertySetType = \"Default\";\n                const propertySetName = relatingPropertyDefinition.Name.value;\n                const properties = [];\n                for (let i = 0, len = props.length; i < len; i++) {\n                    const prop = props[i];\n                    const name = prop.Name;\n                    const nominalValue = prop.NominalValue;\n                    if (name && nominalValue) {\n                        const property = {\n                            name: name.value,\n                            type: nominalValue.type,\n                            value: nominalValue.value,\n                            valueType: nominalValue.valueType\n                        };\n                        if (prop.Description) {\n                            property.description = prop.Description.value;\n                        } else if (nominalValue.description) {\n                            property.description = nominalValue.description;\n                        }\n                        properties.push(property);\n                    }\n                }\n                ctx.xktModel.createPropertySet({propertySetId, propertySetType, propertySetName, properties});\n                ctx.stats.numPropertySets++;\n            }\n        }\n    }\n}\n\nfunction parseMetadata(ctx) {\n\n    const lines = ctx.ifcAPI.GetLineIDsWithType(ctx.modelID, ctx.WebIFC.IFCPROJECT);\n    const ifcProjectId = lines.get(0);\n    const ifcProject = ctx.ifcAPI.GetLine(ctx.modelID, ifcProjectId);\n\n    parseSpatialChildren(ctx, ifcProject);\n}\n\nfunction parseSpatialChildren(ctx, ifcElement, parentMetaObjectId) {\n\n    const metaObjectType = ifcElement.__proto__.constructor.name;\n\n    if (ctx.includeTypes && (!ctx.includeTypes[metaObjectType])) {\n        return;\n    }\n\n    if (ctx.excludeTypes && ctx.excludeTypes[metaObjectType]) {\n        return;\n    }\n\n    createMetaObject(ctx, ifcElement, parentMetaObjectId);\n\n    const metaObjectId = ifcElement.GlobalId.value;\n\n    parseRelatedItemsOfType(\n        ctx,\n        ifcElement.expressID,\n        'RelatingObject',\n        'RelatedObjects',\n        ctx.WebIFC.IFCRELAGGREGATES,\n        metaObjectId);\n\n    parseRelatedItemsOfType(\n        ctx,\n        ifcElement.expressID,\n        'RelatingStructure',\n        'RelatedElements',\n        ctx.WebIFC.IFCRELCONTAINEDINSPATIALSTRUCTURE,\n        metaObjectId);\n}\n\nfunction createMetaObject(ctx, ifcElement, parentMetaObjectId) {\n\n    const metaObjectId = ifcElement.GlobalId.value;\n    const propertySetIds = null;\n    const metaObjectType = ifcElement.__proto__.constructor.name;\n    const metaObjectName = (ifcElement.Name && ifcElement.Name.value !== \"\") ? ifcElement.Name.value : metaObjectType;\n\n    ctx.xktModel.createMetaObject({metaObjectId, propertySetIds, metaObjectType, metaObjectName, parentMetaObjectId});\n    ctx.stats.numMetaObjects++;\n}\n\nfunction parseRelatedItemsOfType(ctx, id, relation, related, type, parentMetaObjectId) {\n\n    const lines = ctx.ifcAPI.GetLineIDsWithType(ctx.modelID, type);\n\n    for (let i = 0; i < lines.size(); i++) {\n\n        const relID = lines.get(i);\n        const rel = ctx.ifcAPI.GetLine(ctx.modelID, relID);\n        const relatedItems = rel[relation];\n\n        let foundElement = false;\n\n        if (Array.isArray(relatedItems)) {\n            const values = relatedItems.map((item) => item.value);\n            foundElement = values.includes(id);\n\n        } else {\n            foundElement = (relatedItems.value === id);\n        }\n\n        if (foundElement) {\n\n            const element = rel[related];\n\n            if (!Array.isArray(element)) {\n\n                const ifcElement = ctx.ifcAPI.GetLine(ctx.modelID, element.value);\n\n                parseSpatialChildren(ctx, ifcElement, parentMetaObjectId);\n\n            } else {\n\n                element.forEach((element2) => {\n\n                    const ifcElement = ctx.ifcAPI.GetLine(ctx.modelID, element2.value);\n\n                    parseSpatialChildren(ctx, ifcElement, parentMetaObjectId);\n                });\n            }\n        }\n    }\n}\n\nfunction parseGeometry(ctx) {\n\n    // Parses the geometry and materials in the IFC, creates\n    // XKTEntity, XKTMesh and XKTGeometry components within the XKTModel.\n\n    const flatMeshes = ctx.ifcAPI.LoadAllGeometry(ctx.modelID);\n\n    for (let i = 0, len = flatMeshes.size(); i < len; i++) {\n        const flatMesh = flatMeshes.get(i);\n        createObject(ctx, flatMesh);\n    }\n\n    // LoadAllGeometry does not return IFCSpace meshes\n    // here is a workaround\n\n    const lines = ctx.ifcAPI.GetLineIDsWithType(ctx.modelID, ctx.WebIFC.IFCSPACE);\n    for (let j = 0, len = lines.size(); j < len; j++) {\n        const ifcSpaceId = lines.get(j);\n        const flatMesh = ctx.ifcAPI.GetFlatMesh(ctx.modelID, ifcSpaceId);\n        createObject(ctx, flatMesh);\n    }\n}\n\nfunction createObject(ctx, flatMesh) {\n\n    const flatMeshExpressID = flatMesh.expressID;\n    const placedGeometries = flatMesh.geometries;\n\n    const meshIds = [];\n\n    const properties = ctx.ifcAPI.GetLine(ctx.modelID, flatMeshExpressID);\n    const entityId = properties.GlobalId.value;\n\n    const metaObjectId = entityId;\n    const metaObject = ctx.xktModel.metaObjects[metaObjectId];\n\n    if (ctx.includeTypes && (!metaObject || (!ctx.includeTypes[metaObject.metaObjectType]))) {\n        return;\n    }\n\n    if (ctx.excludeTypes && (!metaObject || ctx.excludeTypes[metaObject.metaObjectType])) {\n        console.log(\"excluding: \" + metaObjectId)\n        return;\n    }\n\n    for (let j = 0, lenj = placedGeometries.size(); j < lenj; j++) {\n\n        const placedGeometry = placedGeometries.get(j);\n        const geometryId = \"\" + placedGeometry.geometryExpressID;\n\n        if (!ctx.xktModel.geometries[geometryId]) {\n\n            const geometry = ctx.ifcAPI.GetGeometry(ctx.modelID, placedGeometry.geometryExpressID);\n            const vertexData = ctx.ifcAPI.GetVertexArray(geometry.GetVertexData(), geometry.GetVertexDataSize());\n            const indices = ctx.ifcAPI.GetIndexArray(geometry.GetIndexData(), geometry.GetIndexDataSize());\n\n            // De-interleave vertex arrays\n\n            const positions = [];\n            const normals = [];\n\n            for (let k = 0, lenk = vertexData.length / 6; k < lenk; k++) {\n                positions.push(vertexData[k * 6 + 0]);\n                positions.push(vertexData[k * 6 + 1]);\n                positions.push(vertexData[k * 6 + 2]);\n            }\n\n            if (!ctx.autoNormals) {\n                for (let k = 0, lenk = vertexData.length / 6; k < lenk; k++) {\n                    normals.push(vertexData[k * 6 + 3]);\n                    normals.push(vertexData[k * 6 + 4]);\n                    normals.push(vertexData[k * 6 + 5]);\n                }\n            }\n\n            ctx.xktModel.createGeometry({\n                geometryId: geometryId,\n                primitiveType: \"triangles\",\n                positions: positions,\n                normals: ctx.autoNormals ? null : normals,\n                indices: indices\n            });\n\n            ctx.stats.numGeometries++;\n            ctx.stats.numVertices += (positions.length / 3);\n            ctx.stats.numTriangles += (indices.length / 3);\n        }\n\n        const meshId = (\"mesh\" + ctx.nextId++);\n\n        ctx.xktModel.createMesh({\n            meshId: meshId,\n            geometryId: geometryId,\n            matrix: placedGeometry.flatTransformation,\n            color: [placedGeometry.color.x, placedGeometry.color.y, placedGeometry.color.z],\n            opacity: placedGeometry.color.w\n        });\n\n        meshIds.push(meshId);\n    }\n\n    if (meshIds.length > 0) {\n        ctx.xktModel.createEntity({\n            entityId: entityId,\n            meshIds: meshIds\n        });\n        ctx.stats.numObjects++;\n    }\n}\n\nexport {parseIFCIntoXKTModel};\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/las\");","import {parse} from '@loaders.gl/core';\nimport {LASLoader} from '@loaders.gl/las';\n\nimport {math} from \"../lib/math.js\";\n\nconst MAX_VERTICES = 500000; // TODO: Rough estimate\n\n/**\n * @desc Parses LAS and LAZ point cloud data into an {@link XKTModel}.\n *\n * This parser handles both the LASER file format (LAS) and its compressed version (LAZ),\n * a public format for the interchange of 3-dimensional point cloud data data, developed\n * for LIDAR mapping purposes.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load an LAZ point cloud model into it.\n *\n * ````javascript\n * utils.loadArraybuffer(\"./models/laz/autzen.laz\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     await parseLASIntoXKTModel({\n *          data,\n *          xktModel,\n *          rotateX: true,\n *          log: (msg) => { console.log(msg); }\n *     }).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing params.\n * @param {ArrayBuffer} params.data LAS/LAZ file data.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {boolean} [params.center=false] Set true to center the LAS point positions to [0,0,0]. This is applied before the transformation matrix, if specified.\n * @param {Boolean} [params.transform] 4x4 transformation matrix to transform point positions. Use this to rotate, translate and scale them if neccessary.\n * @param {Number|String} [params.colorDepth=8] Whether colors encoded using 8 or 16 bits. Can be set to 'auto'. LAS specification recommends 16 bits.\n * @param {Boolean} [params.fp64=false] Configures if LASLoaderPlugin assumes that LAS positions are stored in 64-bit floats instead of 32-bit.\n * @param {Number} [params.skip=1] Read one from every n points.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n * @returns {Promise} Resolves when LAS has been parsed.\n */\nfunction parseLASIntoXKTModel({\n                                  data,\n                                  xktModel,\n                                  center = false,\n                                  transform = null,\n                                  colorDepth = \"auto\",\n                                  fp64 = false,\n                                  skip = 1,\n                                  stats,\n                                  log = () => {\n                                  }\n                              }) {\n\n    if (log) {\n        log(\"Using parser: parseLASIntoXKTModel\");\n    }\n\n    return new Promise(function (resolve, reject) {\n\n        if (!data) {\n            reject(\"Argument expected: data\");\n            return;\n        }\n\n        if (!xktModel) {\n            reject(\"Argument expected: xktModel\");\n            return;\n        }\n\n        log(\"Converting LAZ/LAS\");\n\n        log(`center: ${center}`);\n        if (transform) {\n            log(`transform: [${transform}]`);\n        }\n        log(`colorDepth: ${colorDepth}`);\n        log(`fp64: ${fp64}`);\n        log(`skip: ${skip}`);\n\n        parse(data, LASLoader, {\n            las: {\n                colorDepth,\n                fp64\n            }\n        }).then((parsedData) => {\n\n            const attributes = parsedData.attributes;\n\n            const loaderData = parsedData.loaderData;\n            const pointsFormatId = loaderData.pointsFormatId !== undefined ? loaderData.pointsFormatId : -1;\n\n            if (!attributes.POSITION) {\n                log(\"No positions found in file (expected for all LAS point formats)\");\n                return;\n            }\n\n            let readAttributes = {};\n\n            switch (pointsFormatId) {\n                case 0:\n                    if (!attributes.intensity) {\n                        log(\"No intensities found in file (expected for LAS point format 0)\");\n                        return;\n                    }\n\n                    readAttributes = readIntensities(attributes.POSITION, attributes.intensity);\n                    break;\n                case 1:\n                    if (!attributes.intensity) {\n                        log(\"No intensities found in file (expected for LAS point format 1)\");\n                        return;\n                    }\n                    readAttributes = readIntensities(attributes.POSITION, attributes.intensity);\n                    break;\n                case 2:\n                    if (!attributes.intensity) {\n                        log(\"No intensities found in file (expected for LAS point format 2)\");\n                        return;\n                    }\n\n                    readAttributes = readColorsAndIntensities(attributes.POSITION, attributes.COLOR_0, attributes.intensity);\n                    break;\n                case 3:\n                    if (!attributes.intensity) {\n                        log(\"No intensities found in file (expected for LAS point format 3)\");\n                        return;\n                    }\n                    readAttributes = readColorsAndIntensities(attributes.POSITION, attributes.COLOR_0, attributes.intensity);\n                    break;\n            }\n\n            const pointsChunks = chunkArray(readPositions(readAttributes.positions), MAX_VERTICES * 3);\n            const colorsChunks = chunkArray(readAttributes.colors, MAX_VERTICES * 4);\n\n            const meshIds = [];\n\n            for (let j = 0, lenj = pointsChunks.length; j < lenj; j++) {\n\n                const geometryId = `geometry-${j}`;\n                const meshId = `mesh-${j}`;\n\n                meshIds.push(meshId);\n\n                xktModel.createGeometry({\n                    geometryId: geometryId,\n                    primitiveType: \"points\",\n                    positions: pointsChunks[j],\n                    colorsCompressed: colorsChunks[j]\n                });\n\n                xktModel.createMesh({\n                    meshId,\n                    geometryId\n                });\n            }\n\n            const entityId = math.createUUID();\n\n            xktModel.createEntity({\n                entityId,\n                meshIds\n            });\n\n            const rootMetaObjectId = math.createUUID();\n\n            xktModel.createMetaObject({\n                metaObjectId: rootMetaObjectId,\n                metaObjectType: \"Model\",\n                metaObjectName: \"Model\"\n            });\n\n            xktModel.createMetaObject({\n                metaObjectId: entityId,\n                metaObjectType: \"PointCloud\",\n                metaObjectName: \"PointCloud (LAZ)\",\n                parentMetaObjectId: rootMetaObjectId\n            });\n\n            if (stats) {\n                stats.sourceFormat = \"LAS\";\n                stats.schemaVersion = \"\";\n                stats.title = \"\";\n                stats.author = \"\";\n                stats.created = \"\";\n                stats.numMetaObjects = 2;\n                stats.numPropertySets = 0;\n                stats.numObjects = 1;\n                stats.numGeometries = 1;\n                stats.numVertices = readAttributes.positions.length / 3;\n            }\n\n            resolve();\n\n        }, (errMsg) => {\n            reject(errMsg);\n        });\n    });\n\n    function readPositions(positionsValue) {\n        if (positionsValue) {\n            if (center) {\n                const centerPos = math.vec3();\n                const numPoints = positionsValue.length;\n                for (let i = 0, len = positionsValue.length; i < len; i += 3) {\n                    centerPos[0] += positionsValue[i + 0];\n                    centerPos[1] += positionsValue[i + 1];\n                    centerPos[2] += positionsValue[i + 2];\n                }\n                centerPos[0] /= numPoints;\n                centerPos[1] /= numPoints;\n                centerPos[2] /= numPoints;\n                for (let i = 0, len = positionsValue.length; i < len; i += 3) {\n                    positionsValue[i + 0] -= centerPos[0];\n                    positionsValue[i + 1] -= centerPos[1];\n                    positionsValue[i + 2] -= centerPos[2];\n                }\n            }\n            if (transform) {\n                const mat = math.mat4(transform);\n                const pos = math.vec3();\n                for (let i = 0, len = positionsValue.length; i < len; i += 3) {\n                    pos[0] = positionsValue[i + 0];\n                    pos[1] = positionsValue[i + 1];\n                    pos[2] = positionsValue[i + 2];\n                    math.transformPoint3(mat, pos, pos);\n                    positionsValue[i + 0] = pos[0];\n                    positionsValue[i + 1] = pos[1];\n                    positionsValue[i + 2] = pos[2];\n                }\n            }\n        }\n        return positionsValue;\n    }\n\n    function readColorsAndIntensities(attributesPosition, attributesColor, attributesIntensity) {\n        const positionsValue = attributesPosition.value;\n        const colors = attributesColor.value;\n        const colorSize = attributesColor.size;\n        const intensities = attributesIntensity.value;\n        const colorsCompressedSize = intensities.length * 4;\n        const positions = [];\n        const colorsCompressed = new Uint8Array(colorsCompressedSize / skip);\n        let count = skip;\n        for (let i = 0, j = 0, k = 0, l = 0, m = 0, n=0,len = intensities.length; i < len; i++, k += colorSize, j += 4, l += 3) {\n            if (count <= 0) {\n                colorsCompressed[m++] = colors[k + 0];\n                colorsCompressed[m++] = colors[k + 1];\n                colorsCompressed[m++] = colors[k + 2];\n                colorsCompressed[m++] = Math.round((intensities[i] / 65536) * 255);\n                positions[n++] = positionsValue[l + 0];\n                positions[n++] = positionsValue[l + 1];\n                positions[n++] = positionsValue[l + 2];\n                count = skip;\n            } else {\n                count--;\n            }\n        }\n        return {\n            positions,\n            colors: colorsCompressed\n        };\n    }\n\n    function readIntensities(attributesPosition, attributesIntensity) {\n        const positionsValue = attributesPosition.value;\n        const intensities = attributesIntensity.value;\n        const colorsCompressedSize = intensities.length * 4;\n        const positions = [];\n        const colorsCompressed = new Uint8Array(colorsCompressedSize / skip);\n        let count = skip;\n        for (let i = 0, j = 0, k = 0, l = 0, m = 0, n = 0, len = intensities.length; i < len; i++, k += 3, j += 4, l += 3) {\n            if (count <= 0) {\n                colorsCompressed[m++] = 0;\n                colorsCompressed[m++] = 0;\n                colorsCompressed[m++] = 0;\n                colorsCompressed[m++] = Math.round((intensities[i] / 65536) * 255);\n                positions[n++] = positionsValue[l + 0];\n                positions[n++] = positionsValue[l + 1];\n                positions[n++] = positionsValue[l + 2];\n                count = skip;\n            } else {\n                count--;\n            }\n        }\n        return {\n            positions,\n            colors: colorsCompressed\n        };\n    }\n\n    function chunkArray(array, chunkSize) {\n        if (chunkSize >= array.length) {\n            return [array]; // One chunk\n        }\n        let result = [];\n        for (let i = 0; i < array.length; i += chunkSize) {\n            result.push(array.slice(i, i + chunkSize));\n        }\n        return result;\n    }\n\n}\n\nexport {parseLASIntoXKTModel};","/**\n * @desc Parses JSON metamodel into an {@link XKTModel}.\n *\n * @param {Object} params Parsing parameters.\n * @param {JSON} params.metaModelData Metamodel data.\n * @param {String[]} [params.excludeTypes] Types to exclude from parsing.\n * @param {String[]} [params.includeTypes] Types to include in parsing.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {function} [params.log] Logging callback.\n @returns {Promise} Resolves when JSON has been parsed.\n */\nfunction parseMetaModelIntoXKTModel({metaModelData, xktModel, includeTypes, excludeTypes, log}) {\n\n    if (log) {\n        log(\"Using parser: parseMetaModelIntoXKTModel\");\n    }\n\n    return new Promise(function (resolve, reject) {\n\n        const metaObjects = metaModelData.metaObjects || [];\n        const propertySets = metaModelData.propertySets || [];\n\n        xktModel.modelId = metaModelData.revisionId || \"\"; // HACK\n        xktModel.projectId = metaModelData.projectId || \"\";\n        xktModel.revisionId = metaModelData.revisionId || \"\";\n        xktModel.author = metaModelData.author || \"\";\n        xktModel.createdAt = metaModelData.createdAt || \"\";\n        xktModel.creatingApplication = metaModelData.creatingApplication || \"\";\n        xktModel.schema = metaModelData.schema || \"\";\n\n        for (let i = 0, len = propertySets.length; i < len; i++) {\n\n            const propertySet = propertySets[i];\n\n            xktModel.createPropertySet({\n                propertySetId: propertySet.id,\n                propertySetName: propertySet.name,\n                propertySetType: propertySet.type,\n                properties: propertySet.properties\n            });\n        }\n\n        let includeTypesMap;\n        if (includeTypes) {\n            includeTypesMap = {};\n            for (let i = 0, len = includeTypes.length; i < len; i++) {\n                includeTypesMap[includeTypes[i]] = true;\n            }\n        }\n\n        let excludeTypesMap;\n        if (excludeTypes) {\n            excludeTypesMap = {};\n            for (let i = 0, len = excludeTypes.length; i < len; i++) {\n                excludeTypesMap[excludeTypes[i]] = true;\n            }\n        }\n\n        const metaObjectsMap = {};\n\n        for (let i = 0, len = metaObjects.length; i < len; i++) {\n            const newObject = metaObjects[i];\n            metaObjectsMap[newObject.id] = newObject;\n        }\n\n        let countMetaObjects = 0;\n\n        for (let i = 0, len = metaObjects.length; i < len; i++) {\n\n            const metaObject = metaObjects[i];\n            const type = metaObject.type;\n\n            if (excludeTypesMap && excludeTypesMap[type]) {\n                continue;\n            }\n\n            if (includeTypesMap && !includeTypesMap[type]) {\n                continue;\n            }\n\n            if (metaObject.parent !== undefined && metaObject.parent !== null) {\n                const metaObjectParent = metaObjectsMap[metaObject.parent];\n                if (metaObject.type === metaObjectParent.type) { // Don't create redundant sub-objects\n                    continue\n                }\n            }\n\n            const propertySetIds = [];\n            if (metaObject.propertySetIds) {\n                for (let j = 0, lenj = metaObject.propertySetIds.length; j < lenj; j++) {\n                    const propertySetId = metaObject.propertySetIds[j];\n                    if (propertySetId !== undefined && propertySetId !== null && propertySetId !== \"\") {\n                        propertySetIds.push(propertySetId);\n                    }\n                }\n            }\n            if (metaObject.propertySetId !== undefined && metaObject.propertySetId !== null && metaObject.propertySetId !== \"\") {\n                propertySetIds.push(metaObject.propertySetId);\n            }\n\n            xktModel.createMetaObject({\n                metaObjectId: metaObject.id,\n                metaObjectType: metaObject.type,\n                metaObjectName: metaObject.name,\n                parentMetaObjectId: metaObject.parent,\n                propertySetIds: propertySetIds.length > 0 ? propertySetIds : null\n            });\n\n            countMetaObjects++;\n        }\n\n        if (log) {\n            log(\"Converted meta objects: \" + countMetaObjects);\n        }\n\n        resolve();\n    });\n}\n\nexport {parseMetaModelIntoXKTModel};\n","/**\n * @desc Parses PCD point cloud data into an {@link XKTModel}.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load an LAZ point cloud model into it.\n *\n * ````javascript\n * utils.loadArraybuffer(\"\"./models/pcd/ism_test_cat.pcd\"\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     await parsePCDIntoXKTModel({\n *          data,\n *          xktModel,\n *          log: (msg) => { console.log(msg); }\n *     }).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing params.\n * @param {ArrayBuffer} params.data PCD file data.\n * @param {Boolean} [params.littleEndian=true] Whether PCD binary data is Little-Endian or Big-Endian.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n @returns {Promise} Resolves when PCD has been parsed.\n */\nfunction parsePCDIntoXKTModel({data, xktModel, littleEndian = true, stats, log}) {\n\n    if (log) {\n        log(\"Using parser: parsePCDIntoXKTModel\");\n    }\n\n    return new Promise(function(resolve, reject) {\n\n        const textData = decodeText(new Uint8Array(data));\n\n        const header = parseHeader(textData);\n\n        const positions = [];\n        const normals = [];\n        const colors = [];\n\n        if (header.data === 'ascii') {\n\n            const offset = header.offset;\n            const data = textData.substr(header.headerLen);\n            const lines = data.split('\\n');\n\n            for (let i = 0, l = lines.length; i < l; i++) {\n\n                if (lines[i] === '') {\n                    continue;\n                }\n\n                const line = lines[i].split(' ');\n\n                if (offset.x !== undefined) {\n                    positions.push(parseFloat(line[offset.x]));\n                    positions.push(parseFloat(line[offset.y]));\n                    positions.push(parseFloat(line[offset.z]));\n                }\n\n                if (offset.rgb !== undefined) {\n                    const rgb = parseFloat(line[offset.rgb]);\n                    const r = (rgb >> 16) & 0x0000ff;\n                    const g = (rgb >> 8) & 0x0000ff;\n                    const b = (rgb >> 0) & 0x0000ff;\n                    colors.push(r, g, b, 255);\n                } else {\n                    colors.push(255);\n                    colors.push(255);\n                    colors.push(255);\n                }\n            }\n        }\n\n        if (header.data === 'binary_compressed') {\n\n            const sizes = new Uint32Array(data.slice(header.headerLen, header.headerLen + 8));\n            const compressedSize = sizes[0];\n            const decompressedSize = sizes[1];\n            const decompressed = decompressLZF(new Uint8Array(data, header.headerLen + 8, compressedSize), decompressedSize);\n            const dataview = new DataView(decompressed.buffer);\n            const offset = header.offset;\n\n            for (let i = 0; i < header.points; i++) {\n\n                if (offset.x !== undefined) {\n                    positions.push(dataview.getFloat32((header.points * offset.x) + header.size[0] * i, littleEndian));\n                    positions.push(dataview.getFloat32((header.points * offset.y) + header.size[1] * i, littleEndian));\n                    positions.push(dataview.getFloat32((header.points * offset.z) + header.size[2] * i, littleEndian));\n                }\n\n                if (offset.rgb !== undefined) {\n                    colors.push(dataview.getUint8((header.points * offset.rgb) + header.size[3] * i + 0));\n                    colors.push(dataview.getUint8((header.points * offset.rgb) + header.size[3] * i + 1));\n                    colors.push(dataview.getUint8((header.points * offset.rgb) + header.size[3] * i + 2));\n                    //    colors.push(255);\n                } else {\n                    colors.push(1);\n                    colors.push(1);\n                    colors.push(1);\n                }\n            }\n        }\n\n        if (header.data === 'binary') {\n\n            const dataview = new DataView(data, header.headerLen);\n            const offset = header.offset;\n\n            for (let i = 0, row = 0; i < header.points; i++, row += header.rowSize) {\n                if (offset.x !== undefined) {\n                    positions.push(dataview.getFloat32(row + offset.x, littleEndian));\n                    positions.push(dataview.getFloat32(row + offset.y, littleEndian));\n                    positions.push(dataview.getFloat32(row + offset.z, littleEndian));\n                }\n\n                if (offset.rgb !== undefined) {\n                    colors.push(dataview.getUint8(row + offset.rgb + 2));\n                    colors.push(dataview.getUint8(row + offset.rgb + 1));\n                    colors.push(dataview.getUint8(row + offset.rgb + 0));\n                } else {\n                    colors.push(255);\n                    colors.push(255);\n                    colors.push(255);\n                }\n            }\n        }\n\n        xktModel.createGeometry({\n            geometryId: \"pointsGeometry\",\n            primitiveType: \"points\",\n            positions: positions,\n            colors: colors && colors.length > 0 ? colors : null\n        });\n\n        xktModel.createMesh({\n            meshId: \"pointsMesh\",\n            geometryId: \"pointsGeometry\"\n        });\n\n        xktModel.createEntity({\n            entityId: \"geometries\",\n            meshIds: [\"pointsMesh\"]\n        });\n\n        if (log) {\n            log(\"Converted drawable objects: 1\");\n            log(\"Converted geometries: 1\");\n            log(\"Converted vertices: \" + positions.length / 3);\n        }\n\n        if (stats) {\n            stats.sourceFormat = \"PCD\";\n            stats.schemaVersion = \"\";\n            stats.title = \"\";\n            stats.author = \"\";\n            stats.created = \"\";\n            stats.numObjects = 1;\n            stats.numGeometries = 1;\n            stats.numVertices = positions.length / 3;\n        }\n\n        resolve();\n    });\n}\n\nfunction parseHeader(data) {\n    const header = {};\n    const result1 = data.search(/[\\r\\n]DATA\\s(\\S*)\\s/i);\n    const result2 = /[\\r\\n]DATA\\s(\\S*)\\s/i.exec(data.substr(result1 - 1));\n    header.data = result2[1];\n    header.headerLen = result2[0].length + result1;\n    header.str = data.substr(0, header.headerLen);\n    header.str = header.str.replace(/\\#.*/gi, '');     // Strip comments\n    header.version = /VERSION (.*)/i.exec(header.str); // Parse\n    header.fields = /FIELDS (.*)/i.exec(header.str);\n    header.size = /SIZE (.*)/i.exec(header.str);\n    header.type = /TYPE (.*)/i.exec(header.str);\n    header.count = /COUNT (.*)/i.exec(header.str);\n    header.width = /WIDTH (.*)/i.exec(header.str);\n    header.height = /HEIGHT (.*)/i.exec(header.str);\n    header.viewpoint = /VIEWPOINT (.*)/i.exec(header.str);\n    header.points = /POINTS (.*)/i.exec(header.str);\n    if (header.version !== null) {\n        header.version = parseFloat(header.version[1]);\n    }\n    if (header.fields !== null) {\n        header.fields = header.fields[1].split(' ');\n    }\n    if (header.type !== null) {\n        header.type = header.type[1].split(' ');\n    }\n    if (header.width !== null) {\n        header.width = parseInt(header.width[1]);\n    }\n    if (header.height !== null) {\n        header.height = parseInt(header.height[1]);\n    }\n    if (header.viewpoint !== null) {\n        header.viewpoint = header.viewpoint[1];\n    }\n    if (header.points !== null) {\n        header.points = parseInt(header.points[1], 10);\n    }\n    if (header.points === null) {\n        header.points = header.width * header.height;\n    }\n    if (header.size !== null) {\n        header.size = header.size[1].split(' ').map(function (x) {\n            return parseInt(x, 10);\n        });\n    }\n    if (header.count !== null) {\n        header.count = header.count[1].split(' ').map(function (x) {\n            return parseInt(x, 10);\n        });\n    } else {\n        header.count = [];\n        for (let i = 0, l = header.fields.length; i < l; i++) {\n            header.count.push(1);\n        }\n    }\n    header.offset = {};\n    let sizeSum = 0;\n    for (let i = 0, l = header.fields.length; i < l; i++) {\n        if (header.data === 'ascii') {\n            header.offset[header.fields[i]] = i;\n        } else {\n            header.offset[header.fields[i]] = sizeSum;\n            sizeSum += header.size[i] * header.count[i];\n        }\n    }\n    header.rowSize = sizeSum; // For binary only\n    return header;\n}\n\nfunction decodeText(array) {\n    if (typeof TextDecoder !== 'undefined') {\n        return new TextDecoder().decode(array);\n    }\n    let s = '';\n    for (let i = 0, il = array.length; i < il; i++) {\n        s += String.fromCharCode(array[i]);\n    }\n    try {\n        return decodeURIComponent(escape(s));\n    } catch (e) {\n        return s;\n    }\n}\n\nfunction decompressLZF(inData, outLength) { // https://gitlab.com/taketwo/three-pcd-loader/blob/master/decompress-lzf.js\n    const inLength = inData.length;\n    const outData = new Uint8Array(outLength);\n    let inPtr = 0;\n    let outPtr = 0;\n    let ctrl;\n    let len;\n    let ref;\n    do {\n        ctrl = inData[inPtr++];\n        if (ctrl < (1 << 5)) {\n            ctrl++;\n            if (outPtr + ctrl > outLength) throw new Error('Output buffer is not large enough');\n            if (inPtr + ctrl > inLength) throw new Error('Invalid compressed data');\n            do {\n                outData[outPtr++] = inData[inPtr++];\n            } while (--ctrl);\n        } else {\n            len = ctrl >> 5;\n            ref = outPtr - ((ctrl & 0x1f) << 8) - 1;\n            if (inPtr >= inLength) throw new Error('Invalid compressed data');\n            if (len === 7) {\n                len += inData[inPtr++];\n                if (inPtr >= inLength) throw new Error('Invalid compressed data');\n            }\n            ref -= inData[inPtr++];\n            if (outPtr + len + 2 > outLength) throw new Error('Output buffer is not large enough');\n            if (ref < 0) throw new Error('Invalid compressed data');\n            if (ref >= outPtr) throw new Error('Invalid compressed data');\n            do {\n                outData[outPtr++] = outData[ref++];\n            } while (--len + 2);\n        }\n    } while (inPtr < inLength);\n    return outData;\n}\n\nexport {parsePCDIntoXKTModel};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@loaders.gl/ply\");","import {parse} from '@loaders.gl/core';\nimport {PLYLoader} from '@loaders.gl/ply';\n\n/**\n * @desc Parses PLY file data into an {@link XKTModel}.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load a PLY model into it.\n *\n * ````javascript\n * utils.loadArraybuffer(\"./models/ply/test.ply\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     parsePLYIntoXKTModel({data, xktModel}).then(()=>{\n *        xktModel.finalize();\n *     },\n *     (msg) => {\n *         console.error(msg);\n *     });\n * });\n * ````\n *\n * @param {Object} params Parsing params.\n * @param {ArrayBuffer} params.data PLY file data.\n * @param {XKTModel} params.xktModel XKTModel to parse into.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n @returns {Promise} Resolves when PLY has been parsed.\n */\nasync function parsePLYIntoXKTModel({data, xktModel, stats, log}) {\n\n    if (log) {\n        log(\"Using parser: parsePLYIntoXKTModel\");\n    }\n\n    if (!data) {\n        throw \"Argument expected: data\";\n    }\n\n    if (!xktModel) {\n        throw \"Argument expected: xktModel\";\n    }\n\n    let parsedData;\n    try {\n        parsedData = await parse(data, PLYLoader);\n    } catch (e) {\n        if (log) {\n            log(\"Error: \" + e);\n        }\n        return;\n    }\n\n    const attributes = parsedData.attributes;\n    const hasColors = !!attributes.COLOR_0;\n\n    if (hasColors) {\n        const colorsValue = hasColors ? attributes.COLOR_0.value : null;\n        const colorsCompressed = [];\n        for (let i = 0, len = colorsValue.length; i < len; i += 4) {\n            colorsCompressed.push(colorsValue[i]);\n            colorsCompressed.push(colorsValue[i + 1]);\n            colorsCompressed.push(colorsValue[i + 2]);\n        }\n        xktModel.createGeometry({\n            geometryId: \"plyGeometry\",\n            primitiveType: \"triangles\",\n            positions: attributes.POSITION.value,\n            indices: parsedData.indices ? parsedData.indices.value : [],\n            colorsCompressed: colorsCompressed\n        });\n    } else {\n        xktModel.createGeometry({\n            geometryId: \"plyGeometry\",\n            primitiveType: \"triangles\",\n            positions: attributes.POSITION.value,\n            indices: parsedData.indices ? parsedData.indices.value : []\n        });\n    }\n\n    xktModel.createMesh({\n        meshId: \"plyMesh\",\n        geometryId: \"plyGeometry\",\n        color: (!hasColors) ? [1, 1, 1] : null\n    });\n\n    xktModel.createEntity({\n        entityId: \"ply\",\n        meshIds: [\"plyMesh\"]\n    });\n\n    if (stats) {\n        stats.sourceFormat = \"PLY\";\n        stats.schemaVersion = \"\";\n        stats.title = \"\";\n        stats.author = \"\";\n        stats.created = \"\";\n        stats.numMetaObjects = 2;\n        stats.numPropertySets = 0;\n        stats.numObjects = 1;\n        stats.numGeometries = 1;\n        stats.numVertices = attributes.POSITION.value.length / 3;\n    }\n}\n\nexport {parsePLYIntoXKTModel};\n","import {faceToVertexNormals} from \"../lib/faceToVertexNormals.js\";\nimport {math} from \"../lib/math.js\";\n\n/**\n * @desc Parses STL file data into an {@link XKTModel}.\n *\n * * Supports binary and ASCII STL formats.\n * * Option to create a separate {@link XKTEntity} for each group of faces that share the same vertex colors.\n * * Option to smooth face-aligned normals loaded from STL.\n * * Option to reduce XKT file size by ignoring STL normals and relying on xeokit to auto-generate them.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then load an STL model into it.\n *\n * ````javascript\n * utils.loadArraybuffer(\"./models/stl/binary/spurGear.stl\", async (data) => {\n *\n *     const xktModel = new XKTModel();\n *\n *     parseSTLIntoXKTModel({data, xktModel});\n *\n *     xktModel.finalize();\n * });\n * ````\n *\n * @param {Object} params Parsing params.\n * @param {ArrayBuffer|String} [params.data] STL file data. Can be binary or string.\n * @param {Boolean} [params.autoNormals=false] When true, the parser will ignore the STL geometry normals, and the STL\n * data will rely on the xeokit ````Viewer```` to automatically generate them. This has the limitation that the\n * normals will be face-aligned, and therefore the ````Viewer```` will only be able to render a flat-shaded representation\n * of the STL.\n * Overrides ````smoothNormals```` when ````true````. This ignores the normals in the STL, and loads no\n * normals from the STL into the {@link XKTModel}, resulting in the XKT file storing no normals for the STL model. The\n * xeokit-sdk will then automatically generate the normals within its shaders. The disadvantages are that auto-normals\n * may slow rendering down a little bit, and that the normals can only be face-aligned (and thus rendered using flat\n * shading). The advantages, however, are a smaller XKT file size, and the ability to apply certain geometry optimizations\n * during parsing, such as removing duplicated STL vertex positions, that are not possible when normals are loaded\n * for the STL vertices.\n * @param {Boolean} [params.smoothNormals=true] When true, automatically converts face-oriented STL normals to vertex normals, for a smooth appearance. Ignored if ````autoNormals```` is ````true````.\n * @param {Number} [params.smoothNormalsAngleThreshold=20] This is the threshold angle between normals of adjacent triangles, below which their shared wireframe edge is not drawn.\n * @param {Boolean} [params.splitMeshes=true] When true, creates a separate {@link XKTEntity} for each group of faces that share the same vertex colors. Only works with binary STL (ie. when ````data```` is an ArrayBuffer).\n * @param {XKTModel} [params.xktModel] XKTModel to parse into.\n * @param {Object} [params.stats] Collects statistics.\n * @param {function} [params.log] Logging callback.\n @returns {Promise} Resolves when STL has been parsed.\n */\nasync function parseSTLIntoXKTModel({\n                                        data,\n                                        splitMeshes,\n                                        autoNormals,\n                                        smoothNormals,\n                                        smoothNormalsAngleThreshold,\n                                        xktModel,\n                                        stats,\n                                        log\n                                    }) {\n\n    if (log) {\n        log(\"Using parser: parseSTLIntoXKTModel\");\n    }\n\n    return new Promise(function (resolve, reject) {\n\n        if (!data) {\n            reject(\"Argument expected: data\");\n            return;\n        }\n\n        if (!xktModel) {\n            reject(\"Argument expected: xktModel\");\n            return;\n        }\n\n        const rootMetaObjectId = math.createUUID();\n\n        const rootMetaObject = xktModel.createMetaObject({\n            metaObjectId: rootMetaObjectId,\n            metaObjectType: \"Model\",\n            metaObjectName: \"Model\"\n        });\n\n        const ctx = {\n            data,\n            splitMeshes,\n            autoNormals,\n            smoothNormals,\n            smoothNormalsAngleThreshold,\n            xktModel,\n            rootMetaObject,\n            nextId: 0,\n            log: (log || function (msg) {\n            }),\n            stats: {\n                numObjects: 0,\n                numGeometries: 0,\n                numTriangles: 0,\n                numVertices: 0\n            }\n        };\n\n        const binData = ensureBinary(data);\n\n        if (isBinary(binData)) {\n            parseBinary(ctx, binData);\n        } else {\n            parseASCII(ctx, ensureString(data));\n        }\n\n        if (stats) {\n            stats.sourceFormat = \"STL\";\n            stats.schemaVersion = \"\";\n            stats.title = \"\";\n            stats.author = \"\";\n            stats.created = \"\";\n            stats.numMetaObjects = 2;\n            stats.numPropertySets = 0;\n            stats.numObjects = 1;\n            stats.numGeometries = 1;\n            stats.numTriangles = ctx.stats.numTriangles;\n            stats.numVertices = ctx.stats.numVertices;\n        }\n\n        resolve();\n    });\n}\n\nfunction isBinary(data) {\n    const reader = new DataView(data);\n    const numFaces = reader.getUint32(80, true);\n    const faceSize = (32 / 8 * 3) + ((32 / 8 * 3) * 3) + (16 / 8);\n    const numExpectedBytes = 80 + (32 / 8) + (numFaces * faceSize);\n    if (numExpectedBytes === reader.byteLength) {\n        return true;\n    }\n    const solid = [115, 111, 108, 105, 100];\n    for (let i = 0; i < 5; i++) {\n        if (solid[i] !== reader.getUint8(i, false)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction parseBinary(ctx, data) {\n    const reader = new DataView(data);\n    const faces = reader.getUint32(80, true);\n    let r;\n    let g;\n    let b;\n    let hasColors = false;\n    let colors;\n    let defaultR;\n    let defaultG;\n    let defaultB;\n    let lastR = null;\n    let lastG = null;\n    let lastB = null;\n    let newMesh = false;\n    let alpha;\n    for (let index = 0; index < 80 - 10; index++) {\n        if ((reader.getUint32(index, false) === 0x434F4C4F /*COLO*/) &&\n            (reader.getUint8(index + 4) === 0x52 /*'R'*/) &&\n            (reader.getUint8(index + 5) === 0x3D /*'='*/)) {\n            hasColors = true;\n            colors = [];\n            defaultR = reader.getUint8(index + 6) / 255;\n            defaultG = reader.getUint8(index + 7) / 255;\n            defaultB = reader.getUint8(index + 8) / 255;\n            alpha = reader.getUint8(index + 9) / 255;\n        }\n    }\n    let dataOffset = 84;\n    let faceLength = 12 * 4 + 2;\n    let positions = [];\n    let normals = [];\n    let splitMeshes = ctx.splitMeshes;\n    for (let face = 0; face < faces; face++) {\n        let start = dataOffset + face * faceLength;\n        let normalX = reader.getFloat32(start, true);\n        let normalY = reader.getFloat32(start + 4, true);\n        let normalZ = reader.getFloat32(start + 8, true);\n        if (hasColors) {\n            let packedColor = reader.getUint16(start + 48, true);\n            if ((packedColor & 0x8000) === 0) {\n                r = (packedColor & 0x1F) / 31;\n                g = ((packedColor >> 5) & 0x1F) / 31;\n                b = ((packedColor >> 10) & 0x1F) / 31;\n            } else {\n                r = defaultR;\n                g = defaultG;\n                b = defaultB;\n            }\n            if (splitMeshes && r !== lastR || g !== lastG || b !== lastB) {\n                if (lastR !== null) {\n                    newMesh = true;\n                }\n                lastR = r;\n                lastG = g;\n                lastB = b;\n            }\n        }\n        for (let i = 1; i <= 3; i++) {\n            let vertexstart = start + i * 12;\n            positions.push(reader.getFloat32(vertexstart, true));\n            positions.push(reader.getFloat32(vertexstart + 4, true));\n            positions.push(reader.getFloat32(vertexstart + 8, true));\n            if (!ctx.autoNormals) {\n                normals.push(normalX, normalY, normalZ);\n            }\n            if (hasColors) {\n                colors.push(r, g, b, 1); // TODO: handle alpha\n            }\n        }\n        if (splitMeshes && newMesh) {\n            addMesh(ctx, positions, normals, colors);\n            positions = [];\n            normals = [];\n            colors = colors ? [] : null;\n            newMesh = false;\n        }\n    }\n    if (positions.length > 0) {\n        addMesh(ctx, positions, normals, colors);\n    }\n}\n\nfunction parseASCII(ctx, data) {\n    const faceRegex = /facet([\\s\\S]*?)endfacet/g;\n    let faceCounter = 0;\n    const floatRegex = /[\\s]+([+-]?(?:\\d+.\\d+|\\d+.|\\d+|.\\d+)(?:[eE][+-]?\\d+)?)/.source;\n    const vertexRegex = new RegExp('vertex' + floatRegex + floatRegex + floatRegex, 'g');\n    const normalRegex = new RegExp('normal' + floatRegex + floatRegex + floatRegex, 'g');\n    const positions = [];\n    const normals = [];\n    const colors = null;\n    let normalx;\n    let normaly;\n    let normalz;\n    let result;\n    let verticesPerFace;\n    let normalsPerFace;\n    let text;\n    while ((result = faceRegex.exec(data)) !== null) {\n        verticesPerFace = 0;\n        normalsPerFace = 0;\n        text = result[0];\n        while ((result = normalRegex.exec(text)) !== null) {\n            normalx = parseFloat(result[1]);\n            normaly = parseFloat(result[2]);\n            normalz = parseFloat(result[3]);\n            normalsPerFace++;\n        }\n        while ((result = vertexRegex.exec(text)) !== null) {\n            positions.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n            normals.push(normalx, normaly, normalz);\n            verticesPerFace++;\n        }\n        if (normalsPerFace !== 1) {\n            ctx.log(\"Error in normal of face \" + faceCounter);\n            return -1;\n        }\n        if (verticesPerFace !== 3) {\n            ctx.log(\"Error in positions of face \" + faceCounter);\n            return -1;\n        }\n        faceCounter++;\n    }\n    addMesh(ctx, positions, normals, colors);\n}\n\nlet nextGeometryId = 0;\n\nfunction addMesh(ctx, positions, normals, colors) {\n\n    const indices = new Int32Array(positions.length / 3);\n    for (let ni = 0, len = indices.length; ni < len; ni++) {\n        indices[ni] = ni;\n    }\n\n    normals = normals && normals.length > 0 ? normals : null;\n    colors = colors && colors.length > 0 ? colors : null;\n\n    if (!ctx.autoNormals && ctx.smoothNormals) {\n        faceToVertexNormals(positions, normals, {smoothNormalsAngleThreshold: ctx.smoothNormalsAngleThreshold});\n    }\n\n    const geometryId = \"\" + nextGeometryId++;\n    const meshId = \"\" + nextGeometryId++;\n    const entityId = \"\" + nextGeometryId++;\n\n    ctx.xktModel.createGeometry({\n        geometryId: geometryId,\n        primitiveType: \"triangles\",\n        positions: positions,\n        normals: (!ctx.autoNormals) ? normals : null,\n        colors: colors,\n        indices: indices\n    });\n\n    ctx.xktModel.createMesh({\n        meshId: meshId,\n        geometryId: geometryId,\n        color: colors ? null : [1, 1, 1],\n        metallic: 0.9,\n        roughness: 0.1\n    });\n\n    ctx.xktModel.createEntity({\n        entityId: entityId,\n        meshIds: [meshId]\n    });\n\n    ctx.xktModel.createMetaObject({\n        metaObjectId: entityId,\n        metaObjectType: \"Default\",\n        metaObjectName: \"STL Mesh\",\n        parentMetaObjectId: ctx.rootMetaObject.metaObjectId\n    });\n\n    ctx.stats.numGeometries++;\n    ctx.stats.numObjects++;\n    ctx.stats.numVertices += positions.length / 3;\n    ctx.stats.numTriangles += indices.length / 3;\n}\n\nfunction ensureString(buffer) {\n    if (typeof buffer !== 'string') {\n        return decodeText(new Uint8Array(buffer));\n    }\n    return buffer;\n}\n\nfunction ensureBinary(buffer) {\n    if (typeof buffer === 'string') {\n        const arrayBuffer = new Uint8Array(buffer.length);\n        for (let i = 0; i < buffer.length; i++) {\n            arrayBuffer[i] = buffer.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n        }\n        return arrayBuffer.buffer || arrayBuffer;\n    } else {\n        return buffer;\n    }\n}\n\nfunction decodeText(array) {\n    if (typeof TextDecoder !== 'undefined') {\n        return new TextDecoder().decode(array);\n    }\n    let s = '';\n    for (let i = 0, il = array.length; i < il; i++) {\n        s += String.fromCharCode(array[i]); // Implicitly assumes little-endian.\n    }\n    return decodeURIComponent(escape(s));\n}\n\nexport {parseSTLIntoXKTModel};\n","import {math} from \"./math.js\";\n\n/**\n * Converts surface-perpendicular face normals to vertex normals. Assumes that the mesh contains disjoint triangles\n * that don't share vertex array elements. Works by finding groups of vertices that have the same location and\n * averaging their normal vectors.\n *\n * @returns {{positions: Array, normals: *}}\n * @private\n */\nfunction faceToVertexNormals(positions, normals, options = {}) {\n    const smoothNormalsAngleThreshold = options.smoothNormalsAngleThreshold || 20;\n    const vertexMap = {};\n    const vertexNormals = [];\n    const vertexNormalAccum = {};\n    let acc;\n    let vx;\n    let vy;\n    let vz;\n    let key;\n    const precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n    const precision = 10 ** precisionPoints;\n    let posi;\n    let i;\n    let j;\n    let len;\n    let a;\n    let b;\n    let c;\n\n    for (i = 0, len = positions.length; i < len; i += 3) {\n\n        posi = i / 3;\n\n        vx = positions[i];\n        vy = positions[i + 1];\n        vz = positions[i + 2];\n\n        key = `${Math.round(vx * precision)}_${Math.round(vy * precision)}_${Math.round(vz * precision)}`;\n\n        if (vertexMap[key] === undefined) {\n            vertexMap[key] = [posi];\n        } else {\n            vertexMap[key].push(posi);\n        }\n\n        const normal = math.normalizeVec3([normals[i], normals[i + 1], normals[i + 2]]);\n\n        vertexNormals[posi] = normal;\n\n        acc = math.vec4([normal[0], normal[1], normal[2], 1]);\n\n        vertexNormalAccum[posi] = acc;\n    }\n\n    for (key in vertexMap) {\n\n        if (vertexMap.hasOwnProperty(key)) {\n\n            const vertices = vertexMap[key];\n            const numVerts = vertices.length;\n\n            for (i = 0; i < numVerts; i++) {\n\n                const ii = vertices[i];\n\n                acc = vertexNormalAccum[ii];\n\n                for (j = 0; j < numVerts; j++) {\n\n                    if (i === j) {\n                        continue;\n                    }\n\n                    const jj = vertices[j];\n\n                    a = vertexNormals[ii];\n                    b = vertexNormals[jj];\n\n                    const angle = Math.abs(math.angleVec3(a, b) / math.DEGTORAD);\n\n                    if (angle < smoothNormalsAngleThreshold) {\n\n                        acc[0] += b[0];\n                        acc[1] += b[1];\n                        acc[2] += b[2];\n                        acc[3] += 1.0;\n                    }\n                }\n            }\n        }\n    }\n\n    for (i = 0, len = normals.length; i < len; i += 3) {\n\n        acc = vertexNormalAccum[i / 3];\n\n        normals[i + 0] = acc[0] / acc[3];\n        normals[i + 1] = acc[1] / acc[3];\n        normals[i + 2] = acc[2] / acc[3];\n\n    }\n}\n\nexport {faceToVertexNormals};","/**\n * @desc Creates box-shaped triangle mesh geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a box-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildBoxGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const box = buildBoxGeometry({\n *     primitiveType: \"triangles\" // or \"lines\"\n *     center: [0,0,0],\n *     xSize: 1,  // Half-size on each axis\n *     ySize: 1,\n *     zSize: 1\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"boxGeometry\",\n *      primitiveType: box.primitiveType,\n *      positions: box.positions,\n *      normals: box.normals,\n *      indices: box.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redBoxMesh\",\n *      geometryId: \"boxGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redBox\",\n *      meshIds: [\"redBoxMesh\"]\n *  });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildBoxGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center]  3D point indicating the center position.\n * @param {Number} [cfg.xSize=1.0]  Half-size on the X-axis.\n * @param {Number} [cfg.ySize=1.0]  Half-size on the Y-axis.\n * @param {Number} [cfg.zSize=1.0]  Half-size on the Z-axis.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildBoxGeometry(cfg = {}) {\n\n    let xSize = cfg.xSize || 1;\n    if (xSize < 0) {\n        console.error(\"negative xSize not allowed - will invert\");\n        xSize *= -1;\n    }\n\n    let ySize = cfg.ySize || 1;\n    if (ySize < 0) {\n        console.error(\"negative ySize not allowed - will invert\");\n        ySize *= -1;\n    }\n\n    let zSize = cfg.zSize || 1;\n    if (zSize < 0) {\n        console.error(\"negative zSize not allowed - will invert\");\n        zSize *= -1;\n    }\n\n    const center = cfg.center;\n    const centerX = center ? center[0] : 0;\n    const centerY = center ? center[1] : 0;\n    const centerZ = center ? center[2] : 0;\n\n    const xmin = -xSize + centerX;\n    const ymin = -ySize + centerY;\n    const zmin = -zSize + centerZ;\n    const xmax = xSize + centerX;\n    const ymax = ySize + centerY;\n    const zmax = zSize + centerZ;\n\n    return {\n\n        primitiveType: \"triangles\",\n\n        // The vertices - eight for our cube, each\n        // one spanning three array elements for X,Y and Z\n\n        positions: [\n\n            // v0-v1-v2-v3 front\n            xmax, ymax, zmax,\n            xmin, ymax, zmax,\n            xmin, ymin, zmax,\n            xmax, ymin, zmax,\n\n            // v0-v3-v4-v1 right\n            xmax, ymax, zmax,\n            xmax, ymin, zmax,\n            xmax, ymin, zmin,\n            xmax, ymax, zmin,\n\n            // v0-v1-v6-v1 top\n            xmax, ymax, zmax,\n            xmax, ymax, zmin,\n            xmin, ymax, zmin,\n            xmin, ymax, zmax,\n\n            // v1-v6-v7-v2 left\n            xmin, ymax, zmax,\n            xmin, ymax, zmin,\n            xmin, ymin, zmin,\n            xmin, ymin, zmax,\n\n            // v7-v4-v3-v2 bottom\n            xmin, ymin, zmin,\n            xmax, ymin, zmin,\n            xmax, ymin, zmax,\n            xmin, ymin, zmax,\n\n            // v4-v7-v6-v1 back\n            xmax, ymin, zmin,\n            xmin, ymin, zmin,\n            xmin, ymax, zmin,\n            xmax, ymax, zmin\n        ],\n\n        // Normal vectors, one for each vertex\n        normals: [\n\n            // v0-v1-v2-v3 front\n            0, 0, 1,\n            0, 0, 1,\n            0, 0, 1,\n            0, 0, 1,\n\n            // v0-v3-v4-v5 right\n            1, 0, 0,\n            1, 0, 0,\n            1, 0, 0,\n            1, 0, 0,\n\n            // v0-v5-v6-v1 top\n            0, 1, 0,\n            0, 1, 0,\n            0, 1, 0,\n            0, 1, 0,\n\n            // v1-v6-v7-v2 left\n            -1, 0, 0,\n            -1, 0, 0,\n            -1, 0, 0,\n            -1, 0, 0,\n\n            // v7-v4-v3-v2 bottom\n            0, -1, 0,\n            0, -1, 0,\n            0, -1, 0,\n            0, -1, 0,\n\n            // v4-v7-v6-v5 back\n            0, 0, -1,\n            0, 0, -1,\n            0, 0, -1,\n            0, 0, -1\n        ],\n\n        // UV coords\n        uv: [\n\n            // v0-v1-v2-v3 front\n            1, 0,\n            0, 0,\n            0, 1,\n            1, 1,\n\n            // v0-v3-v4-v1 right\n            0, 0,\n            0, 1,\n            1, 1,\n            1, 0,\n\n            // v0-v1-v6-v1 top\n            1, 1,\n            1, 0,\n            0, 0,\n            0, 1,\n\n            // v1-v6-v7-v2 left\n            1, 0,\n            0, 0,\n            0, 1,\n            1, 1,\n\n            // v7-v4-v3-v2 bottom\n            0, 1,\n            1, 1,\n            1, 0,\n            0, 0,\n\n            // v4-v7-v6-v1 back\n            0, 1,\n            1, 1,\n            1, 0,\n            0, 0\n        ],\n\n        // Indices - these organise the\n        // positions and uv texture coordinates\n        // into geometric primitives in accordance\n        // with the \"primitive\" parameter,\n        // in this case a set of three indices\n        // for each triangle.\n        //\n        // Note that each triangle is specified\n        // in counter-clockwise winding order.\n        //\n        // You can specify them in clockwise\n        // order if you configure the Modes\n        // node's frontFace flag as \"cw\", instead of\n        // the default \"ccw\".\n        indices: [\n            0, 1, 2,\n            0, 2, 3,\n            // front\n            4, 5, 6,\n            4, 6, 7,\n            // right\n            8, 9, 10,\n            8, 10, 11,\n            // top\n            12, 13, 14,\n            12, 14, 15,\n            // left\n            16, 17, 18,\n            16, 18, 19,\n            // bottom\n            20, 21, 22,\n            20, 22, 23\n        ]\n    };\n}\n\nexport {buildBoxGeometry};\n","/**\n * @desc Creates box-shaped line segment geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a box-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildBoxLinesGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const box = buildBoxLinesGeometry({\n *     center: [0,0,0],\n *     xSize: 1,  // Half-size on each axis\n *     ySize: 1,\n *     zSize: 1\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"boxGeometry\",\n *      primitiveType: box.primitiveType, // \"lines\"\n *      positions: box.positions,\n *      normals: box.normals,\n *      indices: box.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redBoxMesh\",\n *      geometryId: \"boxGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redBox\",\n *      meshIds: [\"redBoxMesh\"]\n *  });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildBoxLinesGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center]  3D point indicating the center position.\n * @param {Number} [cfg.xSize=1.0]  Half-size on the X-axis.\n * @param {Number} [cfg.ySize=1.0]  Half-size on the Y-axis.\n * @param {Number} [cfg.zSize=1.0]  Half-size on the Z-axis.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildBoxLinesGeometry(cfg = {}) {\n\n    let xSize = cfg.xSize || 1;\n    if (xSize < 0) {\n        console.error(\"negative xSize not allowed - will invert\");\n        xSize *= -1;\n    }\n\n    let ySize = cfg.ySize || 1;\n    if (ySize < 0) {\n        console.error(\"negative ySize not allowed - will invert\");\n        ySize *= -1;\n    }\n\n    let zSize = cfg.zSize || 1;\n    if (zSize < 0) {\n        console.error(\"negative zSize not allowed - will invert\");\n        zSize *= -1;\n    }\n\n    const center = cfg.center;\n    const centerX = center ? center[0] : 0;\n    const centerY = center ? center[1] : 0;\n    const centerZ = center ? center[2] : 0;\n\n    const xmin = -xSize + centerX;\n    const ymin = -ySize + centerY;\n    const zmin = -zSize + centerZ;\n    const xmax = xSize + centerX;\n    const ymax = ySize + centerY;\n    const zmax = zSize + centerZ;\n\n    return {\n        primitiveType: \"lines\",\n        positions: [\n            xmin, ymin, zmin,\n            xmin, ymin, zmax,\n            xmin, ymax, zmin,\n            xmin, ymax, zmax,\n            xmax, ymin, zmin,\n            xmax, ymin, zmax,\n            xmax, ymax, zmin,\n            xmax, ymax, zmax\n        ],\n        indices: [\n            0, 1,\n            1, 3,\n            3, 2,\n            2, 0,\n            4, 5,\n            5, 7,\n            7, 6,\n            6, 4,\n            0, 4,\n            1, 5,\n            2, 6,\n            3, 7\n        ]\n    }\n}\n\nexport {buildBoxLinesGeometry};\n","/**\n * @desc Creates cylinder-shaped geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a cylinder-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildCylinderGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const cylinder = buildCylinderGeometry({\n *      center: [0,0,0],\n *      radiusTop: 2.0,\n *      radiusBottom: 2.0,\n *      height: 5.0,\n *      radialSegments: 20,\n *      heightSegments: 1,\n *      openEnded: false\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"cylinderGeometry\",\n *      primitiveType: cylinder.primitiveType,\n *      positions: cylinder.positions,\n *      normals: cylinder.normals,\n *      indices: cylinder.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redCylinderMesh\",\n *      geometryId: \"cylinderGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redCylinder\",\n *      meshIds: [\"redCylinderMesh\"]\n *  });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildCylinderGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center] 3D point indicating the center position.\n * @param {Number} [cfg.radiusTop=1]  Radius of top.\n * @param {Number} [cfg.radiusBottom=1]  Radius of bottom.\n * @param {Number} [cfg.height=1] Height.\n * @param {Number} [cfg.radialSegments=60]  Number of horizontal segments.\n * @param {Number} [cfg.heightSegments=1]  Number of vertical segments.\n * @param {Boolean} [cfg.openEnded=false]  Whether or not the cylinder has solid caps on the ends.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildCylinderGeometry(cfg = {}) {\n\n    let radiusTop = cfg.radiusTop || 1;\n    if (radiusTop < 0) {\n        console.error(\"negative radiusTop not allowed - will invert\");\n        radiusTop *= -1;\n    }\n\n    let radiusBottom = cfg.radiusBottom || 1;\n    if (radiusBottom < 0) {\n        console.error(\"negative radiusBottom not allowed - will invert\");\n        radiusBottom *= -1;\n    }\n\n    let height = cfg.height || 1;\n    if (height < 0) {\n        console.error(\"negative height not allowed - will invert\");\n        height *= -1;\n    }\n\n    let radialSegments = cfg.radialSegments || 32;\n    if (radialSegments < 0) {\n        console.error(\"negative radialSegments not allowed - will invert\");\n        radialSegments *= -1;\n    }\n    if (radialSegments < 3) {\n        radialSegments = 3;\n    }\n\n    let heightSegments = cfg.heightSegments || 1;\n    if (heightSegments < 0) {\n        console.error(\"negative heightSegments not allowed - will invert\");\n        heightSegments *= -1;\n    }\n    if (heightSegments < 1) {\n        heightSegments = 1;\n    }\n\n    const openEnded = !!cfg.openEnded;\n\n    let center = cfg.center;\n    const centerX = center ? center[0] : 0;\n    const centerY = center ? center[1] : 0;\n    const centerZ = center ? center[2] : 0;\n\n    const heightHalf = height / 2;\n    const heightLength = height / heightSegments;\n    const radialAngle = (2.0 * Math.PI / radialSegments);\n    const radialLength = 1.0 / radialSegments;\n    //var nextRadius = this._radiusBottom;\n    const radiusChange = (radiusTop - radiusBottom) / heightSegments;\n\n    const positions = [];\n    const normals = [];\n    const uvs = [];\n    const indices = [];\n\n    let h;\n    let i;\n\n    let x;\n    let z;\n\n    let currentRadius;\n    let currentHeight;\n\n    let first;\n    let second;\n\n    let startIndex;\n    let tu;\n    let tv;\n\n    // create vertices\n    const normalY = (90.0 - (Math.atan(height / (radiusBottom - radiusTop))) * 180 / Math.PI) / 90.0;\n\n    for (h = 0; h <= heightSegments; h++) {\n        currentRadius = radiusTop - h * radiusChange;\n        currentHeight = heightHalf - h * heightLength;\n\n        for (i = 0; i <= radialSegments; i++) {\n            x = Math.sin(i * radialAngle);\n            z = Math.cos(i * radialAngle);\n\n            normals.push(currentRadius * x);\n            normals.push(normalY); //todo\n            normals.push(currentRadius * z);\n\n            uvs.push((i * radialLength));\n            uvs.push(h * 1 / heightSegments);\n\n            positions.push((currentRadius * x) + centerX);\n            positions.push((currentHeight) + centerY);\n            positions.push((currentRadius * z) + centerZ);\n        }\n    }\n\n    // create faces\n    for (h = 0; h < heightSegments; h++) {\n        for (i = 0; i <= radialSegments; i++) {\n\n            first = h * (radialSegments + 1) + i;\n            second = first + radialSegments;\n\n            indices.push(first);\n            indices.push(second);\n            indices.push(second + 1);\n\n            indices.push(first);\n            indices.push(second + 1);\n            indices.push(first + 1);\n        }\n    }\n\n    // create top cap\n    if (!openEnded && radiusTop > 0) {\n        startIndex = (positions.length / 3);\n\n        // top center\n        normals.push(0.0);\n        normals.push(1.0);\n        normals.push(0.0);\n\n        uvs.push(0.5);\n        uvs.push(0.5);\n\n        positions.push(0 + centerX);\n        positions.push(heightHalf + centerY);\n        positions.push(0 + centerZ);\n\n        // top triangle fan\n        for (i = 0; i <= radialSegments; i++) {\n            x = Math.sin(i * radialAngle);\n            z = Math.cos(i * radialAngle);\n            tu = (0.5 * Math.sin(i * radialAngle)) + 0.5;\n            tv = (0.5 * Math.cos(i * radialAngle)) + 0.5;\n\n            normals.push(radiusTop * x);\n            normals.push(1.0);\n            normals.push(radiusTop * z);\n\n            uvs.push(tu);\n            uvs.push(tv);\n\n            positions.push((radiusTop * x) + centerX);\n            positions.push((heightHalf) + centerY);\n            positions.push((radiusTop * z) + centerZ);\n        }\n\n        for (i = 0; i < radialSegments; i++) {\n            center = startIndex;\n            first = startIndex + 1 + i;\n\n            indices.push(first);\n            indices.push(first + 1);\n            indices.push(center);\n        }\n    }\n\n    // create bottom cap\n    if (!openEnded && radiusBottom > 0) {\n\n        startIndex = (positions.length / 3);\n\n        // top center\n        normals.push(0.0);\n        normals.push(-1.0);\n        normals.push(0.0);\n\n        uvs.push(0.5);\n        uvs.push(0.5);\n\n        positions.push(0 + centerX);\n        positions.push(0 - heightHalf + centerY);\n        positions.push(0 + centerZ);\n\n        // top triangle fan\n        for (i = 0; i <= radialSegments; i++) {\n\n            x = Math.sin(i * radialAngle);\n            z = Math.cos(i * radialAngle);\n\n            tu = (0.5 * Math.sin(i * radialAngle)) + 0.5;\n            tv = (0.5 * Math.cos(i * radialAngle)) + 0.5;\n\n            normals.push(radiusBottom * x);\n            normals.push(-1.0);\n            normals.push(radiusBottom * z);\n\n            uvs.push(tu);\n            uvs.push(tv);\n\n            positions.push((radiusBottom * x) + centerX);\n            positions.push((0 - heightHalf) + centerY);\n            positions.push((radiusBottom * z) + centerZ);\n        }\n\n        for (i = 0; i < radialSegments; i++) {\n\n            center = startIndex;\n            first = startIndex + 1 + i;\n\n            indices.push(center);\n            indices.push(first + 1);\n            indices.push(first);\n        }\n    }\n\n    return  {\n        primitiveType: \"triangles\",\n        positions: positions,\n        normals: normals,\n        uv: uvs,\n        uvs: uvs,\n        indices: indices\n    };\n}\n\n\nexport {buildCylinderGeometry};\n","/**\n * @desc Creates grid-shaped geometry arrays..\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a grid-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildGridGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const grid = buildGridGeometry({\n *      size: 1000,\n *      divisions: 500\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"gridGeometry\",\n *      primitiveType: grid.primitiveType, // Will be \"lines\"\n *      positions: grid.positions,\n *      indices: grid.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redGridMesh\",\n *      geometryId: \"gridGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redGrid\",\n *      meshIds: [\"redGridMesh\"]\n * });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildGridGeometry\n * @param {*} [cfg] Configs\n * @param {Number} [cfg.size=1] Dimension on the X and Z-axis.\n * @param {Number} [cfg.divisions=1] Number of divisions on X and Z axis..\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildGridGeometry(cfg = {}) {\n\n    let size = cfg.size || 1;\n    if (size < 0) {\n        console.error(\"negative size not allowed - will invert\");\n        size *= -1;\n    }\n\n    let divisions = cfg.divisions || 1;\n    if (divisions < 0) {\n        console.error(\"negative divisions not allowed - will invert\");\n        divisions *= -1;\n    }\n    if (divisions < 1) {\n        divisions = 1;\n    }\n\n    size = size || 10;\n    divisions = divisions || 10;\n\n    const step = size / divisions;\n    const halfSize = size / 2;\n\n    const positions = [];\n    const indices = [];\n    let l = 0;\n\n    for (let i = 0, j = 0, k = -halfSize; i <= divisions; i++, k += step) {\n\n        positions.push(-halfSize);\n        positions.push(0);\n        positions.push(k);\n\n        positions.push(halfSize);\n        positions.push(0);\n        positions.push(k);\n\n        positions.push(k);\n        positions.push(0);\n        positions.push(-halfSize);\n\n        positions.push(k);\n        positions.push(0);\n        positions.push(halfSize);\n\n        indices.push(l++);\n        indices.push(l++);\n        indices.push(l++);\n        indices.push(l++);\n    }\n\n    return {\n        primitiveType: \"lines\",\n        positions: positions,\n        indices: indices\n    };\n}\n\n\nexport {buildGridGeometry};\n","/**\n * @desc Creates plane-shaped geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a plane-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildPlaneGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const plane = buildPlaneGeometry({\n *      center: [0,0,0],\n *      xSize: 2,\n *      zSize: 2,\n *      xSegments: 10,\n *      zSegments: 10\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"planeGeometry\",\n *      primitiveType: plane.primitiveType, // Will be \"triangles\"\n *      positions: plane.positions,\n *      normals: plane.normals,\n *      indices: plane.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redPlaneMesh\",\n *      geometryId: \"planeGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redPlane\",\n *      meshIds: [\"redPlaneMesh\"]\n *  });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildPlaneGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center]  3D point indicating the center position.\n * @param {Number} [cfg.xSize=1] Dimension on the X-axis.\n * @param {Number} [cfg.zSize=1] Dimension on the Z-axis.\n * @param {Number} [cfg.xSegments=1] Number of segments on the X-axis.\n * @param {Number} [cfg.zSegments=1] Number of segments on the Z-axis.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildPlaneGeometry(cfg = {}) {\n\n    let xSize = cfg.xSize || 1;\n    if (xSize < 0) {\n        console.error(\"negative xSize not allowed - will invert\");\n        xSize *= -1;\n    }\n\n    let zSize = cfg.zSize || 1;\n    if (zSize < 0) {\n        console.error(\"negative zSize not allowed - will invert\");\n        zSize *= -1;\n    }\n\n    let xSegments = cfg.xSegments || 1;\n    if (xSegments < 0) {\n        console.error(\"negative xSegments not allowed - will invert\");\n        xSegments *= -1;\n    }\n    if (xSegments < 1) {\n        xSegments = 1;\n    }\n\n    let zSegments = cfg.xSegments || 1;\n    if (zSegments < 0) {\n        console.error(\"negative zSegments not allowed - will invert\");\n        zSegments *= -1;\n    }\n    if (zSegments < 1) {\n        zSegments = 1;\n    }\n\n    const center = cfg.center;\n    const centerX = center ? center[0] : 0;\n    const centerY = center ? center[1] : 0;\n    const centerZ = center ? center[2] : 0;\n\n    const halfWidth = xSize / 2;\n    const halfHeight = zSize / 2;\n\n    const planeX = Math.floor(xSegments) || 1;\n    const planeZ = Math.floor(zSegments) || 1;\n\n    const planeX1 = planeX + 1;\n    const planeZ1 = planeZ + 1;\n\n    const segmentWidth = xSize / planeX;\n    const segmentHeight = zSize / planeZ;\n\n    const positions = new Float32Array(planeX1 * planeZ1 * 3);\n    const normals = new Float32Array(planeX1 * planeZ1 * 3);\n    const uvs = new Float32Array(planeX1 * planeZ1 * 2);\n\n    let offset = 0;\n    let offset2 = 0;\n\n    let iz;\n    let ix;\n    let x;\n    let a;\n    let b;\n    let c;\n    let d;\n\n    for (iz = 0; iz < planeZ1; iz++) {\n\n        const z = iz * segmentHeight - halfHeight;\n\n        for (ix = 0; ix < planeX1; ix++) {\n\n            x = ix * segmentWidth - halfWidth;\n\n            positions[offset] = x + centerX;\n            positions[offset + 1] = centerY;\n            positions[offset + 2] = -z + centerZ;\n\n            normals[offset + 2] = -1;\n\n            uvs[offset2] = (ix) / planeX;\n            uvs[offset2 + 1] = ((planeZ - iz) / planeZ);\n\n            offset += 3;\n            offset2 += 2;\n        }\n    }\n\n    offset = 0;\n\n    const indices = new ((positions.length / 3) > 65535 ? Uint32Array : Uint16Array)(planeX * planeZ * 6);\n\n    for (iz = 0; iz < planeZ; iz++) {\n\n        for (ix = 0; ix < planeX; ix++) {\n\n            a = ix + planeX1 * iz;\n            b = ix + planeX1 * (iz + 1);\n            c = (ix + 1) + planeX1 * (iz + 1);\n            d = (ix + 1) + planeX1 * iz;\n\n            indices[offset] = d;\n            indices[offset + 1] = b;\n            indices[offset + 2] = a;\n\n            indices[offset + 3] = d;\n            indices[offset + 4] = c;\n            indices[offset + 5] = b;\n\n            offset += 6;\n        }\n    }\n\n    return {\n        primitiveType: \"triangles\",\n        positions: positions,\n        normals: normals,\n        uv: uvs,\n        uvs: uvs,\n        indices: indices\n    };\n}\n\nexport {buildPlaneGeometry};\n","/**\n * @desc Creates sphere-shaped geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a sphere-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildSphereGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const sphere = buildSphereGeometry({\n *      center: [0,0,0],\n *      radius: 1.5,\n *      heightSegments: 60,\n *      widthSegments: 60\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"sphereGeometry\",\n *      primitiveType: sphere.primitiveType, // Will be \"triangles\"\n *      positions: sphere.positions,\n *      normals: sphere.normals,\n *      indices: sphere.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redSphereMesh\",\n *      geometryId: \"sphereGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n *const xktEntity = xktModel.createEntity({\n *      entityId: \"redSphere\",\n *      meshIds: [\"redSphereMesh\"]\n *  });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildSphereGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center]  3D point indicating the center position.\n * @param {Number} [cfg.radius=1]  Radius.\n * @param {Number} [cfg.heightSegments=24] Number of latitudinal bands.\n * @param  {Number} [cfg.widthSegments=18] Number of longitudinal bands.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildSphereGeometry(cfg = {}) {\n\n    const lod = cfg.lod || 1;\n\n    const centerX = cfg.center ? cfg.center[0] : 0;\n    const centerY = cfg.center ? cfg.center[1] : 0;\n    const centerZ = cfg.center ? cfg.center[2] : 0;\n\n    let radius = cfg.radius || 1;\n    if (radius < 0) {\n        console.error(\"negative radius not allowed - will invert\");\n        radius *= -1;\n    }\n\n    let heightSegments = cfg.heightSegments || 18;\n    if (heightSegments < 0) {\n        console.error(\"negative heightSegments not allowed - will invert\");\n        heightSegments *= -1;\n    }\n    heightSegments = Math.floor(lod * heightSegments);\n    if (heightSegments < 18) {\n        heightSegments = 18;\n    }\n\n    let widthSegments = cfg.widthSegments || 18;\n    if (widthSegments < 0) {\n        console.error(\"negative widthSegments not allowed - will invert\");\n        widthSegments *= -1;\n    }\n    widthSegments = Math.floor(lod * widthSegments);\n    if (widthSegments < 18) {\n        widthSegments = 18;\n    }\n\n    const positions = [];\n    const normals = [];\n    const uvs = [];\n    const indices = [];\n\n    let i;\n    let j;\n\n    let theta;\n    let sinTheta;\n    let cosTheta;\n\n    let phi;\n    let sinPhi;\n    let cosPhi;\n\n    let x;\n    let y;\n    let z;\n\n    let u;\n    let v;\n\n    let first;\n    let second;\n\n    for (i = 0; i <= heightSegments; i++) {\n\n        theta = i * Math.PI / heightSegments;\n        sinTheta = Math.sin(theta);\n        cosTheta = Math.cos(theta);\n\n        for (j = 0; j <= widthSegments; j++) {\n\n            phi = j * 2 * Math.PI / widthSegments;\n            sinPhi = Math.sin(phi);\n            cosPhi = Math.cos(phi);\n\n            x = cosPhi * sinTheta;\n            y = cosTheta;\n            z = sinPhi * sinTheta;\n            u = 1.0 - j / widthSegments;\n            v = i / heightSegments;\n\n            normals.push(x);\n            normals.push(y);\n            normals.push(z);\n\n            uvs.push(u);\n            uvs.push(v);\n\n            positions.push(centerX + radius * x);\n            positions.push(centerY + radius * y);\n            positions.push(centerZ + radius * z);\n        }\n    }\n\n    for (i = 0; i < heightSegments; i++) {\n        for (j = 0; j < widthSegments; j++) {\n\n            first = (i * (widthSegments + 1)) + j;\n            second = first + widthSegments + 1;\n\n            indices.push(first + 1);\n            indices.push(second + 1);\n            indices.push(second);\n            indices.push(first + 1);\n            indices.push(second);\n            indices.push(first);\n        }\n    }\n\n    return {\n        primitiveType: \"triangles\",\n        positions: positions,\n        normals: normals,\n        uv: uvs,\n        uvs: uvs,\n        indices: indices\n    };\n}\n\nexport {buildSphereGeometry};\n","import {math} from '../lib/math.js';\n\n/**\n * @desc Creates torus-shaped geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a torus-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildTorusGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const torus = buildTorusGeometry({\n *      center: [0,0,0],\n *      radius: 1.0,\n *      tube: 0.5,\n *      radialSegments: 32,\n *      tubeSegments: 24,\n *      arc: Math.PI * 2.0\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"torusGeometry\",\n *      primitiveType: torus.primitiveType, // Will be \"triangles\"\n *      positions: torus.positions,\n *      normals: torus.normals,\n *      indices: torus.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redTorusMesh\",\n *      geometryId: \"torusGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redTorus\",\n *      meshIds: [\"redTorusMesh\"]\n * });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildTorusGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center] 3D point indicating the center position.\n * @param {Number} [cfg.radius=1] The overall radius.\n * @param {Number} [cfg.tube=0.3] The tube radius.\n * @param {Number} [cfg.radialSegments=32] The number of radial segments.\n * @param {Number} [cfg.tubeSegments=24] The number of tubular segments.\n * @param {Number} [cfg.arc=Math.PI*0.5] The length of the arc in radians, where Math.PI*2 is a closed torus.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildTorusGeometry(cfg = {}) {\n\n    let radius = cfg.radius || 1;\n    if (radius < 0) {\n        console.error(\"negative radius not allowed - will invert\");\n        radius *= -1;\n    }\n    radius *= 0.5;\n\n    let tube = cfg.tube || 0.3;\n    if (tube < 0) {\n        console.error(\"negative tube not allowed - will invert\");\n        tube *= -1;\n    }\n\n    let radialSegments = cfg.radialSegments || 32;\n    if (radialSegments < 0) {\n        console.error(\"negative radialSegments not allowed - will invert\");\n        radialSegments *= -1;\n    }\n    if (radialSegments < 4) {\n        radialSegments = 4;\n    }\n\n    let tubeSegments = cfg.tubeSegments || 24;\n    if (tubeSegments < 0) {\n        console.error(\"negative tubeSegments not allowed - will invert\");\n        tubeSegments *= -1;\n    }\n    if (tubeSegments < 4) {\n        tubeSegments = 4;\n    }\n\n    let arc = cfg.arc || Math.PI * 2;\n    if (arc < 0) {\n        console.warn(\"negative arc not allowed - will invert\");\n        arc *= -1;\n    }\n    if (arc > 360) {\n        arc = 360;\n    }\n\n    const center = cfg.center;\n    let centerX = center ? center[0] : 0;\n    let centerY = center ? center[1] : 0;\n    const centerZ = center ? center[2] : 0;\n\n    const positions = [];\n    const normals = [];\n    const uvs = [];\n    const indices = [];\n\n    let u;\n    let v;\n    let x;\n    let y;\n    let z;\n    let vec;\n\n    let i;\n    let j;\n\n    for (j = 0; j <= tubeSegments; j++) {\n        for (i = 0; i <= radialSegments; i++) {\n\n            u = i / radialSegments * arc;\n            v = 0.785398 + (j / tubeSegments * Math.PI * 2);\n\n            centerX = radius * Math.cos(u);\n            centerY = radius * Math.sin(u);\n\n            x = (radius + tube * Math.cos(v)) * Math.cos(u);\n            y = (radius + tube * Math.cos(v)) * Math.sin(u);\n            z = tube * Math.sin(v);\n\n            positions.push(x + centerX);\n            positions.push(y + centerY);\n            positions.push(z + centerZ);\n\n            uvs.push(1 - (i / radialSegments));\n            uvs.push((j / tubeSegments));\n\n            vec = math.normalizeVec3(math.subVec3([x, y, z], [centerX, centerY, centerZ], []), []);\n\n            normals.push(vec[0]);\n            normals.push(vec[1]);\n            normals.push(vec[2]);\n        }\n    }\n\n    let a;\n    let b;\n    let c;\n    let d;\n\n    for (j = 1; j <= tubeSegments; j++) {\n        for (i = 1; i <= radialSegments; i++) {\n\n            a = (radialSegments + 1) * j + i - 1;\n            b = (radialSegments + 1) * (j - 1) + i - 1;\n            c = (radialSegments + 1) * (j - 1) + i;\n            d = (radialSegments + 1) * j + i;\n\n            indices.push(a);\n            indices.push(b);\n            indices.push(c);\n\n            indices.push(c);\n            indices.push(d);\n            indices.push(a);\n        }\n    }\n\n    return {\n        primitiveType: \"triangles\",\n        positions: positions,\n        normals: normals,\n        uv: uvs,\n        uvs: uvs,\n        indices: indices\n    };\n}\n\nexport {buildTorusGeometry};\n","const letters = {\n    ' ': {width: 16, points: []},\n    '!': {\n        width: 10, points: [\n            [5, 21],\n            [5, 7],\n            [-1, -1],\n            [5, 2],\n            [4, 1],\n            [5, 0],\n            [6, 1],\n            [5, 2]\n        ]\n    },\n    '\"': {\n        width: 16, points: [\n            [4, 21],\n            [4, 14],\n            [-1, -1],\n            [12, 21],\n            [12, 14]\n        ]\n    },\n    '#': {\n        width: 21, points: [\n            [11, 25],\n            [4, -7],\n            [-1, -1],\n            [17, 25],\n            [10, -7],\n            [-1, -1],\n            [4, 12],\n            [18, 12],\n            [-1, -1],\n            [3, 6],\n            [17, 6]\n        ]\n    },\n    '$': {\n        width: 20, points: [\n            [8, 25],\n            [8, -4],\n            [-1, -1],\n            [12, 25],\n            [12, -4],\n            [-1, -1],\n            [17, 18],\n            [15, 20],\n            [12, 21],\n            [8, 21],\n            [5, 20],\n            [3, 18],\n            [3, 16],\n            [4, 14],\n            [5, 13],\n            [7, 12],\n            [13, 10],\n            [15, 9],\n            [16, 8],\n            [17, 6],\n            [17, 3],\n            [15, 1],\n            [12, 0],\n            [8, 0],\n            [5, 1],\n            [3, 3]\n        ]\n    },\n    '%': {\n        width: 24, points: [\n            [21, 21],\n            [3, 0],\n            [-1, -1],\n            [8, 21],\n            [10, 19],\n            [10, 17],\n            [9, 15],\n            [7, 14],\n            [5, 14],\n            [3, 16],\n            [3, 18],\n            [4, 20],\n            [6, 21],\n            [8, 21],\n            [10, 20],\n            [13, 19],\n            [16, 19],\n            [19, 20],\n            [21, 21],\n            [-1, -1],\n            [17, 7],\n            [15, 6],\n            [14, 4],\n            [14, 2],\n            [16, 0],\n            [18, 0],\n            [20, 1],\n            [21, 3],\n            [21, 5],\n            [19, 7],\n            [17, 7]\n        ]\n    },\n    '&': {\n        width: 26, points: [\n            [23, 12],\n            [23, 13],\n            [22, 14],\n            [21, 14],\n            [20, 13],\n            [19, 11],\n            [17, 6],\n            [15, 3],\n            [13, 1],\n            [11, 0],\n            [7, 0],\n            [5, 1],\n            [4, 2],\n            [3, 4],\n            [3, 6],\n            [4, 8],\n            [5, 9],\n            [12, 13],\n            [13, 14],\n            [14, 16],\n            [14, 18],\n            [13, 20],\n            [11, 21],\n            [9, 20],\n            [8, 18],\n            [8, 16],\n            [9, 13],\n            [11, 10],\n            [16, 3],\n            [18, 1],\n            [20, 0],\n            [22, 0],\n            [23, 1],\n            [23, 2]\n        ]\n    },\n    '\\'': {\n        width: 10, points: [\n            [5, 19],\n            [4, 20],\n            [5, 21],\n            [6, 20],\n            [6, 18],\n            [5, 16],\n            [4, 15]\n        ]\n    },\n    '(': {\n        width: 14, points: [\n            [11, 25],\n            [9, 23],\n            [7, 20],\n            [5, 16],\n            [4, 11],\n            [4, 7],\n            [5, 2],\n            [7, -2],\n            [9, -5],\n            [11, -7]\n        ]\n    },\n    ')': {\n        width: 14, points: [\n            [3, 25],\n            [5, 23],\n            [7, 20],\n            [9, 16],\n            [10, 11],\n            [10, 7],\n            [9, 2],\n            [7, -2],\n            [5, -5],\n            [3, -7]\n        ]\n    },\n    '*': {\n        width: 16, points: [\n            [8, 21],\n            [8, 9],\n            [-1, -1],\n            [3, 18],\n            [13, 12],\n            [-1, -1],\n            [13, 18],\n            [3, 12]\n        ]\n    },\n    '+': {\n        width: 26, points: [\n            [13, 18],\n            [13, 0],\n            [-1, -1],\n            [4, 9],\n            [22, 9]\n        ]\n    },\n    ',': {\n        width: 10, points: [\n            [6, 1],\n            [5, 0],\n            [4, 1],\n            [5, 2],\n            [6, 1],\n            [6, -1],\n            [5, -3],\n            [4, -4]\n        ]\n    },\n    '-': {\n        width: 26, points: [\n            [4, 9],\n            [22, 9]\n        ]\n    },\n    '.': {\n        width: 10, points: [\n            [5, 2],\n            [4, 1],\n            [5, 0],\n            [6, 1],\n            [5, 2]\n        ]\n    },\n    '/': {\n        width: 22, points: [\n            [20, 25],\n            [2, -7]\n        ]\n    },\n    '0': {\n        width: 20, points: [\n            [9, 21],\n            [6, 20],\n            [4, 17],\n            [3, 12],\n            [3, 9],\n            [4, 4],\n            [6, 1],\n            [9, 0],\n            [11, 0],\n            [14, 1],\n            [16, 4],\n            [17, 9],\n            [17, 12],\n            [16, 17],\n            [14, 20],\n            [11, 21],\n            [9, 21]\n        ]\n    },\n    '1': {\n        width: 20, points: [\n            [6, 17],\n            [8, 18],\n            [11, 21],\n            [11, 0]\n        ]\n    },\n    '2': {\n        width: 20, points: [\n            [4, 16],\n            [4, 17],\n            [5, 19],\n            [6, 20],\n            [8, 21],\n            [12, 21],\n            [14, 20],\n            [15, 19],\n            [16, 17],\n            [16, 15],\n            [15, 13],\n            [13, 10],\n            [3, 0],\n            [17, 0]\n        ]\n    },\n    '3': {\n        width: 20, points: [\n            [5, 21],\n            [16, 21],\n            [10, 13],\n            [13, 13],\n            [15, 12],\n            [16, 11],\n            [17, 8],\n            [17, 6],\n            [16, 3],\n            [14, 1],\n            [11, 0],\n            [8, 0],\n            [5, 1],\n            [4, 2],\n            [3, 4]\n        ]\n    },\n    '4': {\n        width: 20, points: [\n            [13, 21],\n            [3, 7],\n            [18, 7],\n            [-1, -1],\n            [13, 21],\n            [13, 0]\n        ]\n    },\n    '5': {\n        width: 20, points: [\n            [15, 21],\n            [5, 21],\n            [4, 12],\n            [5, 13],\n            [8, 14],\n            [11, 14],\n            [14, 13],\n            [16, 11],\n            [17, 8],\n            [17, 6],\n            [16, 3],\n            [14, 1],\n            [11, 0],\n            [8, 0],\n            [5, 1],\n            [4, 2],\n            [3, 4]\n        ]\n    },\n    '6': {\n        width: 20, points: [\n            [16, 18],\n            [15, 20],\n            [12, 21],\n            [10, 21],\n            [7, 20],\n            [5, 17],\n            [4, 12],\n            [4, 7],\n            [5, 3],\n            [7, 1],\n            [10, 0],\n            [11, 0],\n            [14, 1],\n            [16, 3],\n            [17, 6],\n            [17, 7],\n            [16, 10],\n            [14, 12],\n            [11, 13],\n            [10, 13],\n            [7, 12],\n            [5, 10],\n            [4, 7]\n        ]\n    },\n    '7': {\n        width: 20, points: [\n            [17, 21],\n            [7, 0],\n            [-1, -1],\n            [3, 21],\n            [17, 21]\n        ]\n    },\n    '8': {\n        width: 20, points: [\n            [8, 21],\n            [5, 20],\n            [4, 18],\n            [4, 16],\n            [5, 14],\n            [7, 13],\n            [11, 12],\n            [14, 11],\n            [16, 9],\n            [17, 7],\n            [17, 4],\n            [16, 2],\n            [15, 1],\n            [12, 0],\n            [8, 0],\n            [5, 1],\n            [4, 2],\n            [3, 4],\n            [3, 7],\n            [4, 9],\n            [6, 11],\n            [9, 12],\n            [13, 13],\n            [15, 14],\n            [16, 16],\n            [16, 18],\n            [15, 20],\n            [12, 21],\n            [8, 21]\n        ]\n    },\n    '9': {\n        width: 20, points: [\n            [16, 14],\n            [15, 11],\n            [13, 9],\n            [10, 8],\n            [9, 8],\n            [6, 9],\n            [4, 11],\n            [3, 14],\n            [3, 15],\n            [4, 18],\n            [6, 20],\n            [9, 21],\n            [10, 21],\n            [13, 20],\n            [15, 18],\n            [16, 14],\n            [16, 9],\n            [15, 4],\n            [13, 1],\n            [10, 0],\n            [8, 0],\n            [5, 1],\n            [4, 3]\n        ]\n    },\n    ':': {\n        width: 10, points: [\n            [5, 14],\n            [4, 13],\n            [5, 12],\n            [6, 13],\n            [5, 14],\n            [-1, -1],\n            [5, 2],\n            [4, 1],\n            [5, 0],\n            [6, 1],\n            [5, 2]\n        ]\n    },\n    ';': {\n        width: 10, points: [\n            [5, 14],\n            [4, 13],\n            [5, 12],\n            [6, 13],\n            [5, 14],\n            [-1, -1],\n            [6, 1],\n            [5, 0],\n            [4, 1],\n            [5, 2],\n            [6, 1],\n            [6, -1],\n            [5, -3],\n            [4, -4]\n        ]\n    },\n    '<': {\n        width: 24, points: [\n            [20, 18],\n            [4, 9],\n            [20, 0]\n        ]\n    },\n    '=': {\n        width: 26, points: [\n            [4, 12],\n            [22, 12],\n            [-1, -1],\n            [4, 6],\n            [22, 6]\n        ]\n    },\n    '>': {\n        width: 24, points: [\n            [4, 18],\n            [20, 9],\n            [4, 0]\n        ]\n    },\n    '?': {\n        width: 18, points: [\n            [3, 16],\n            [3, 17],\n            [4, 19],\n            [5, 20],\n            [7, 21],\n            [11, 21],\n            [13, 20],\n            [14, 19],\n            [15, 17],\n            [15, 15],\n            [14, 13],\n            [13, 12],\n            [9, 10],\n            [9, 7],\n            [-1, -1],\n            [9, 2],\n            [8, 1],\n            [9, 0],\n            [10, 1],\n            [9, 2]\n        ]\n    },\n    '@': {\n        width: 27, points: [\n            [18, 13],\n            [17, 15],\n            [15, 16],\n            [12, 16],\n            [10, 15],\n            [9, 14],\n            [8, 11],\n            [8, 8],\n            [9, 6],\n            [11, 5],\n            [14, 5],\n            [16, 6],\n            [17, 8],\n            [-1, -1],\n            [12, 16],\n            [10, 14],\n            [9, 11],\n            [9, 8],\n            [10, 6],\n            [11, 5],\n            [-1, -1],\n            [18, 16],\n            [17, 8],\n            [17, 6],\n            [19, 5],\n            [21, 5],\n            [23, 7],\n            [24, 10],\n            [24, 12],\n            [23, 15],\n            [22, 17],\n            [20, 19],\n            [18, 20],\n            [15, 21],\n            [12, 21],\n            [9, 20],\n            [7, 19],\n            [5, 17],\n            [4, 15],\n            [3, 12],\n            [3, 9],\n            [4, 6],\n            [5, 4],\n            [7, 2],\n            [9, 1],\n            [12, 0],\n            [15, 0],\n            [18, 1],\n            [20, 2],\n            [21, 3],\n            [-1, -1],\n            [19, 16],\n            [18, 8],\n            [18, 6],\n            [19, 5]\n        ]\n    },\n    'A': {\n        width: 18, points: [\n            [9, 21],\n            [1, 0],\n            [-1, -1],\n            [9, 21],\n            [17, 0],\n            [-1, -1],\n            [4, 7],\n            [14, 7]\n        ]\n    },\n    'B': {\n        width: 21, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [13, 21],\n            [16, 20],\n            [17, 19],\n            [18, 17],\n            [18, 15],\n            [17, 13],\n            [16, 12],\n            [13, 11],\n            [-1, -1],\n            [4, 11],\n            [13, 11],\n            [16, 10],\n            [17, 9],\n            [18, 7],\n            [18, 4],\n            [17, 2],\n            [16, 1],\n            [13, 0],\n            [4, 0]\n        ]\n    },\n    'C': {\n        width: 21, points: [\n            [18, 16],\n            [17, 18],\n            [15, 20],\n            [13, 21],\n            [9, 21],\n            [7, 20],\n            [5, 18],\n            [4, 16],\n            [3, 13],\n            [3, 8],\n            [4, 5],\n            [5, 3],\n            [7, 1],\n            [9, 0],\n            [13, 0],\n            [15, 1],\n            [17, 3],\n            [18, 5]\n        ]\n    },\n    'D': {\n        width: 21, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [11, 21],\n            [14, 20],\n            [16, 18],\n            [17, 16],\n            [18, 13],\n            [18, 8],\n            [17, 5],\n            [16, 3],\n            [14, 1],\n            [11, 0],\n            [4, 0]\n        ]\n    },\n    'E': {\n        width: 19, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [17, 21],\n            [-1, -1],\n            [4, 11],\n            [12, 11],\n            [-1, -1],\n            [4, 0],\n            [17, 0]\n        ]\n    },\n    'F': {\n        width: 18, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [17, 21],\n            [-1, -1],\n            [4, 11],\n            [12, 11]\n        ]\n    },\n    'G': {\n        width: 21, points: [\n            [18, 16],\n            [17, 18],\n            [15, 20],\n            [13, 21],\n            [9, 21],\n            [7, 20],\n            [5, 18],\n            [4, 16],\n            [3, 13],\n            [3, 8],\n            [4, 5],\n            [5, 3],\n            [7, 1],\n            [9, 0],\n            [13, 0],\n            [15, 1],\n            [17, 3],\n            [18, 5],\n            [18, 8],\n            [-1, -1],\n            [13, 8],\n            [18, 8]\n        ]\n    },\n    'H': {\n        width: 22, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [18, 21],\n            [18, 0],\n            [-1, -1],\n            [4, 11],\n            [18, 11]\n        ]\n    },\n    'I': {\n        width: 8, points: [\n            [4, 21],\n            [4, 0]\n        ]\n    },\n    'J': {\n        width: 16, points: [\n            [12, 21],\n            [12, 5],\n            [11, 2],\n            [10, 1],\n            [8, 0],\n            [6, 0],\n            [4, 1],\n            [3, 2],\n            [2, 5],\n            [2, 7]\n        ]\n    },\n    'K': {\n        width: 21, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [18, 21],\n            [4, 7],\n            [-1, -1],\n            [9, 12],\n            [18, 0]\n        ]\n    },\n    'L': {\n        width: 17, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 0],\n            [16, 0]\n        ]\n    },\n    'M': {\n        width: 24, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [12, 0],\n            [-1, -1],\n            [20, 21],\n            [12, 0],\n            [-1, -1],\n            [20, 21],\n            [20, 0]\n        ]\n    },\n    'N': {\n        width: 22, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [18, 0],\n            [-1, -1],\n            [18, 21],\n            [18, 0]\n        ]\n    },\n    'O': {\n        width: 22, points: [\n            [9, 21],\n            [7, 20],\n            [5, 18],\n            [4, 16],\n            [3, 13],\n            [3, 8],\n            [4, 5],\n            [5, 3],\n            [7, 1],\n            [9, 0],\n            [13, 0],\n            [15, 1],\n            [17, 3],\n            [18, 5],\n            [19, 8],\n            [19, 13],\n            [18, 16],\n            [17, 18],\n            [15, 20],\n            [13, 21],\n            [9, 21]\n        ]\n    },\n    'P': {\n        width: 21, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [13, 21],\n            [16, 20],\n            [17, 19],\n            [18, 17],\n            [18, 14],\n            [17, 12],\n            [16, 11],\n            [13, 10],\n            [4, 10]\n        ]\n    },\n    'Q': {\n        width: 22, points: [\n            [9, 21],\n            [7, 20],\n            [5, 18],\n            [4, 16],\n            [3, 13],\n            [3, 8],\n            [4, 5],\n            [5, 3],\n            [7, 1],\n            [9, 0],\n            [13, 0],\n            [15, 1],\n            [17, 3],\n            [18, 5],\n            [19, 8],\n            [19, 13],\n            [18, 16],\n            [17, 18],\n            [15, 20],\n            [13, 21],\n            [9, 21],\n            [-1, -1],\n            [12, 4],\n            [18, -2]\n        ]\n    },\n    'R': {\n        width: 21, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 21],\n            [13, 21],\n            [16, 20],\n            [17, 19],\n            [18, 17],\n            [18, 15],\n            [17, 13],\n            [16, 12],\n            [13, 11],\n            [4, 11],\n            [-1, -1],\n            [11, 11],\n            [18, 0]\n        ]\n    },\n    'S': {\n        width: 20, points: [\n            [17, 18],\n            [15, 20],\n            [12, 21],\n            [8, 21],\n            [5, 20],\n            [3, 18],\n            [3, 16],\n            [4, 14],\n            [5, 13],\n            [7, 12],\n            [13, 10],\n            [15, 9],\n            [16, 8],\n            [17, 6],\n            [17, 3],\n            [15, 1],\n            [12, 0],\n            [8, 0],\n            [5, 1],\n            [3, 3]\n        ]\n    },\n    'T': {\n        width: 16, points: [\n            [8, 21],\n            [8, 0],\n            [-1, -1],\n            [1, 21],\n            [15, 21]\n        ]\n    },\n    'U': {\n        width: 22, points: [\n            [4, 21],\n            [4, 6],\n            [5, 3],\n            [7, 1],\n            [10, 0],\n            [12, 0],\n            [15, 1],\n            [17, 3],\n            [18, 6],\n            [18, 21]\n        ]\n    },\n    'V': {\n        width: 18, points: [\n            [1, 21],\n            [9, 0],\n            [-1, -1],\n            [17, 21],\n            [9, 0]\n        ]\n    },\n    'W': {\n        width: 24, points: [\n            [2, 21],\n            [7, 0],\n            [-1, -1],\n            [12, 21],\n            [7, 0],\n            [-1, -1],\n            [12, 21],\n            [17, 0],\n            [-1, -1],\n            [22, 21],\n            [17, 0]\n        ]\n    },\n    'X': {\n        width: 20, points: [\n            [3, 21],\n            [17, 0],\n            [-1, -1],\n            [17, 21],\n            [3, 0]\n        ]\n    },\n    'Y': {\n        width: 18, points: [\n            [1, 21],\n            [9, 11],\n            [9, 0],\n            [-1, -1],\n            [17, 21],\n            [9, 11]\n        ]\n    },\n    'Z': {\n        width: 20, points: [\n            [17, 21],\n            [3, 0],\n            [-1, -1],\n            [3, 21],\n            [17, 21],\n            [-1, -1],\n            [3, 0],\n            [17, 0]\n        ]\n    },\n    '[': {\n        width: 14, points: [\n            [4, 25],\n            [4, -7],\n            [-1, -1],\n            [5, 25],\n            [5, -7],\n            [-1, -1],\n            [4, 25],\n            [11, 25],\n            [-1, -1],\n            [4, -7],\n            [11, -7]\n        ]\n    },\n    '\\\\': {\n        width: 14, points: [\n            [0, 21],\n            [14, -3]\n        ]\n    },\n    ']': {\n        width: 14, points: [\n            [9, 25],\n            [9, -7],\n            [-1, -1],\n            [10, 25],\n            [10, -7],\n            [-1, -1],\n            [3, 25],\n            [10, 25],\n            [-1, -1],\n            [3, -7],\n            [10, -7]\n        ]\n    },\n    '^': {\n        width: 16, points: [\n            [6, 15],\n            [8, 18],\n            [10, 15],\n            [-1, -1],\n            [3, 12],\n            [8, 17],\n            [13, 12],\n            [-1, -1],\n            [8, 17],\n            [8, 0]\n        ]\n    },\n    '_': {\n        width: 16, points: [\n            [0, -2],\n            [16, -2]\n        ]\n    },\n    '`': {\n        width: 10, points: [\n            [6, 21],\n            [5, 20],\n            [4, 18],\n            [4, 16],\n            [5, 15],\n            [6, 16],\n            [5, 17]\n        ]\n    },\n    'a': {\n        width: 19, points: [\n            [15, 14],\n            [15, 0],\n            [-1, -1],\n            [15, 11],\n            [13, 13],\n            [11, 14],\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3]\n        ]\n    },\n    'b': {\n        width: 19, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 11],\n            [6, 13],\n            [8, 14],\n            [11, 14],\n            [13, 13],\n            [15, 11],\n            [16, 8],\n            [16, 6],\n            [15, 3],\n            [13, 1],\n            [11, 0],\n            [8, 0],\n            [6, 1],\n            [4, 3]\n        ]\n    },\n    'c': {\n        width: 18, points: [\n            [15, 11],\n            [13, 13],\n            [11, 14],\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3]\n        ]\n    },\n    'd': {\n        width: 19, points: [\n            [15, 21],\n            [15, 0],\n            [-1, -1],\n            [15, 11],\n            [13, 13],\n            [11, 14],\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3]\n        ]\n    },\n    'e': {\n        width: 18, points: [\n            [3, 8],\n            [15, 8],\n            [15, 10],\n            [14, 12],\n            [13, 13],\n            [11, 14],\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3]\n        ]\n    },\n    'f': {\n        width: 12, points: [\n            [10, 21],\n            [8, 21],\n            [6, 20],\n            [5, 17],\n            [5, 0],\n            [-1, -1],\n            [2, 14],\n            [9, 14]\n        ]\n    },\n    'g': {\n        width: 19, points: [\n            [15, 14],\n            [15, -2],\n            [14, -5],\n            [13, -6],\n            [11, -7],\n            [8, -7],\n            [6, -6],\n            [-1, -1],\n            [15, 11],\n            [13, 13],\n            [11, 14],\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3]\n        ]\n    },\n    'h': {\n        width: 19, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [4, 10],\n            [7, 13],\n            [9, 14],\n            [12, 14],\n            [14, 13],\n            [15, 10],\n            [15, 0]\n        ]\n    },\n    'i': {\n        width: 8, points: [\n            [3, 21],\n            [4, 20],\n            [5, 21],\n            [4, 22],\n            [3, 21],\n            [-1, -1],\n            [4, 14],\n            [4, 0]\n        ]\n    },\n    'j': {\n        width: 10, points: [\n            [5, 21],\n            [6, 20],\n            [7, 21],\n            [6, 22],\n            [5, 21],\n            [-1, -1],\n            [6, 14],\n            [6, -3],\n            [5, -6],\n            [3, -7],\n            [1, -7]\n        ]\n    },\n    'k': {\n        width: 17, points: [\n            [4, 21],\n            [4, 0],\n            [-1, -1],\n            [14, 14],\n            [4, 4],\n            [-1, -1],\n            [8, 8],\n            [15, 0]\n        ]\n    },\n    'l': {\n        width: 8, points: [\n            [4, 21],\n            [4, 0]\n        ]\n    },\n    'm': {\n        width: 30, points: [\n            [4, 14],\n            [4, 0],\n            [-1, -1],\n            [4, 10],\n            [7, 13],\n            [9, 14],\n            [12, 14],\n            [14, 13],\n            [15, 10],\n            [15, 0],\n            [-1, -1],\n            [15, 10],\n            [18, 13],\n            [20, 14],\n            [23, 14],\n            [25, 13],\n            [26, 10],\n            [26, 0]\n        ]\n    },\n    'n': {\n        width: 19, points: [\n            [4, 14],\n            [4, 0],\n            [-1, -1],\n            [4, 10],\n            [7, 13],\n            [9, 14],\n            [12, 14],\n            [14, 13],\n            [15, 10],\n            [15, 0]\n        ]\n    },\n    'o': {\n        width: 19, points: [\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3],\n            [16, 6],\n            [16, 8],\n            [15, 11],\n            [13, 13],\n            [11, 14],\n            [8, 14]\n        ]\n    },\n    'p': {\n        width: 19, points: [\n            [4, 14],\n            [4, -7],\n            [-1, -1],\n            [4, 11],\n            [6, 13],\n            [8, 14],\n            [11, 14],\n            [13, 13],\n            [15, 11],\n            [16, 8],\n            [16, 6],\n            [15, 3],\n            [13, 1],\n            [11, 0],\n            [8, 0],\n            [6, 1],\n            [4, 3]\n        ]\n    },\n    'q': {\n        width: 19, points: [\n            [15, 14],\n            [15, -7],\n            [-1, -1],\n            [15, 11],\n            [13, 13],\n            [11, 14],\n            [8, 14],\n            [6, 13],\n            [4, 11],\n            [3, 8],\n            [3, 6],\n            [4, 3],\n            [6, 1],\n            [8, 0],\n            [11, 0],\n            [13, 1],\n            [15, 3]\n        ]\n    },\n    'r': {\n        width: 13, points: [\n            [4, 14],\n            [4, 0],\n            [-1, -1],\n            [4, 8],\n            [5, 11],\n            [7, 13],\n            [9, 14],\n            [12, 14]\n        ]\n    },\n    's': {\n        width: 17, points: [\n            [14, 11],\n            [13, 13],\n            [10, 14],\n            [7, 14],\n            [4, 13],\n            [3, 11],\n            [4, 9],\n            [6, 8],\n            [11, 7],\n            [13, 6],\n            [14, 4],\n            [14, 3],\n            [13, 1],\n            [10, 0],\n            [7, 0],\n            [4, 1],\n            [3, 3]\n        ]\n    },\n    't': {\n        width: 12, points: [\n            [5, 21],\n            [5, 4],\n            [6, 1],\n            [8, 0],\n            [10, 0],\n            [-1, -1],\n            [2, 14],\n            [9, 14]\n        ]\n    },\n    'u': {\n        width: 19, points: [\n            [4, 14],\n            [4, 4],\n            [5, 1],\n            [7, 0],\n            [10, 0],\n            [12, 1],\n            [15, 4],\n            [-1, -1],\n            [15, 14],\n            [15, 0]\n        ]\n    },\n    'v': {\n        width: 16, points: [\n            [2, 14],\n            [8, 0],\n            [-1, -1],\n            [14, 14],\n            [8, 0]\n        ]\n    },\n    'w': {\n        width: 22, points: [\n            [3, 14],\n            [7, 0],\n            [-1, -1],\n            [11, 14],\n            [7, 0],\n            [-1, -1],\n            [11, 14],\n            [15, 0],\n            [-1, -1],\n            [19, 14],\n            [15, 0]\n        ]\n    },\n    'x': {\n        width: 17, points: [\n            [3, 14],\n            [14, 0],\n            [-1, -1],\n            [14, 14],\n            [3, 0]\n        ]\n    },\n    'y': {\n        width: 16, points: [\n            [2, 14],\n            [8, 0],\n            [-1, -1],\n            [14, 14],\n            [8, 0],\n            [6, -4],\n            [4, -6],\n            [2, -7],\n            [1, -7]\n        ]\n    },\n    'z': {\n        width: 17, points: [\n            [14, 14],\n            [3, 0],\n            [-1, -1],\n            [3, 14],\n            [14, 14],\n            [-1, -1],\n            [3, 0],\n            [14, 0]\n        ]\n    },\n    '{': {\n        width: 14, points: [\n            [9, 25],\n            [7, 24],\n            [6, 23],\n            [5, 21],\n            [5, 19],\n            [6, 17],\n            [7, 16],\n            [8, 14],\n            [8, 12],\n            [6, 10],\n            [-1, -1],\n            [7, 24],\n            [6, 22],\n            [6, 20],\n            [7, 18],\n            [8, 17],\n            [9, 15],\n            [9, 13],\n            [8, 11],\n            [4, 9],\n            [8, 7],\n            [9, 5],\n            [9, 3],\n            [8, 1],\n            [7, 0],\n            [6, -2],\n            [6, -4],\n            [7, -6],\n            [-1, -1],\n            [6, 8],\n            [8, 6],\n            [8, 4],\n            [7, 2],\n            [6, 1],\n            [5, -1],\n            [5, -3],\n            [6, -5],\n            [7, -6],\n            [9, -7]\n        ]\n    },\n    '|': {\n        width: 8, points: [\n            [4, 25],\n            [4, -7]\n        ]\n    },\n    '}': {\n        width: 14, points: [\n            [5, 25],\n            [7, 24],\n            [8, 23],\n            [9, 21],\n            [9, 19],\n            [8, 17],\n            [7, 16],\n            [6, 14],\n            [6, 12],\n            [8, 10],\n            [-1, -1],\n            [7, 24],\n            [8, 22],\n            [8, 20],\n            [7, 18],\n            [6, 17],\n            [5, 15],\n            [5, 13],\n            [6, 11],\n            [10, 9],\n            [6, 7],\n            [5, 5],\n            [5, 3],\n            [6, 1],\n            [7, 0],\n            [8, -2],\n            [8, -4],\n            [7, -6],\n            [-1, -1],\n            [8, 8],\n            [6, 6],\n            [6, 4],\n            [7, 2],\n            [8, 1],\n            [9, -1],\n            [9, -3],\n            [8, -5],\n            [7, -6],\n            [5, -7]\n        ]\n    },\n    '~': {\n        width: 24, points: [\n            [3, 6],\n            [3, 8],\n            [4, 11],\n            [6, 12],\n            [8, 12],\n            [10, 11],\n            [14, 8],\n            [16, 7],\n            [18, 7],\n            [20, 8],\n            [21, 10],\n            [-1, -1],\n            [3, 8],\n            [4, 10],\n            [6, 11],\n            [8, 11],\n            [10, 10],\n            [14, 7],\n            [16, 6],\n            [18, 6],\n            [20, 7],\n            [21, 10],\n            [21, 12]\n        ]\n    }\n};\n\n/**\n * @desc Creates wireframe text-shaped geometry arrays.\n *\n * ## Usage\n *\n * In the example below we'll create an {@link XKTModel}, then create an {@link XKTMesh} with a text-shaped {@link XKTGeometry}.\n *\n * [[Run this example](http://xeokit.github.io/xeokit-sdk/examples/#geometry_builders_buildVectorTextGeometry)]\n *\n * ````javascript\n * const xktModel = new XKTModel();\n *\n * const text = buildVectorTextGeometry({\n *      origin: [0,0,0],\n *      text: \"On the other side of the screen, it all looked so easy\"\n * });\n *\n * const xktGeometry = xktModel.createGeometry({\n *      geometryId: \"textGeometry\",\n *      primitiveType: text.primitiveType, // Will be \"lines\"\n *      positions: text.positions,\n *      indices: text.indices\n * });\n *\n * const xktMesh = xktModel.createMesh({\n *      meshId: \"redTextMesh\",\n *      geometryId: \"textGeometry\",\n *      position: [-4, -6, -4],\n *      scale: [1, 3, 1],\n *      rotation: [0, 0, 0],\n *      color: [1, 0, 0],\n *      opacity: 1\n * });\n *\n * const xktEntity = xktModel.createEntity({\n *      entityId: \"redText\",\n *      meshIds: [\"redTextMesh\"]\n *  });\n *\n * xktModel.finalize();\n * ````\n *\n * @function buildVectorTextGeometry\n * @param {*} [cfg] Configs\n * @param {Number[]} [cfg.center]  3D point indicating the center position.\n * @param {Number[]} [cfg.origin] 3D point indicating the top left corner.\n * @param {Number} [cfg.size=1] Size of each character.\n * @param {String} [cfg.text=\"\"] The text.\n * @returns {Object} Geometry arrays for {@link XKTModel#createGeometry} or {@link XKTModel#createMesh}.\n */\nfunction buildVectorTextGeometry(cfg = {}) {\n\n    var origin = cfg.origin || [0, 0, 0];\n    var xOrigin = origin[0];\n    var yOrigin = origin[1];\n    var zOrigin = origin[2];\n    var size = cfg.size || 1;\n\n    var positions = [];\n    var indices = [];\n    var text = (\"\" + cfg.text).trim();\n    var lines = (text || \"\").split(\"\\n\");\n    var countVerts = 0;\n    var y = 0;\n    var x;\n    var str;\n    var len;\n    var c;\n    var mag = 1.0 / 25.0;\n    var penUp;\n    var p1;\n    var p2;\n    var needLine;\n    var pointsLen;\n    var a;\n\n    for (var iLine = 0; iLine < lines.length; iLine++) {\n\n        x = 0;\n        str = lines[iLine];\n        len = str.length;\n\n        for (var i = 0; i < len; i++) {\n\n            c = letters[str.charAt(i)];\n\n            if (c === '\\n') {\n                //alert(\"newline\");\n            }\n\n            if (!c) {\n                continue;\n            }\n\n            penUp = 1;\n            p1 = -1;\n            p2 = -1;\n            needLine = false;\n\n            pointsLen = c.points.length;\n\n            for (var j = 0; j < pointsLen; j++) {\n                a = c.points[j];\n\n                if (a[0] === -1 && a[1] === -1) {\n                    penUp = 1;\n                    needLine = false;\n                    continue;\n                }\n\n                positions.push((x + (a[0] * size) * mag) + xOrigin);\n                positions.push((y + (a[1] * size) * mag) + yOrigin);\n                positions.push(0 + zOrigin);\n\n                if (p1 === -1) {\n                    p1 = countVerts;\n                } else if (p2 === -1) {\n                    p2 = countVerts;\n                } else {\n                    p1 = p2;\n                    p2 = countVerts;\n                }\n                countVerts++;\n\n                if (penUp) {\n                    penUp = false;\n\n                } else {\n                    indices.push(p1);\n                    indices.push(p2);\n                }\n\n                needLine = true;\n            }\n            x += c.width * mag * size;\n\n        }\n        y -= 35 * mag * size;\n    }\n\n    return {\n        primitiveType: \"lines\",\n        positions: positions,\n        indices: indices\n    };\n}\n\n\nexport {buildVectorTextGeometry}\n","\nimport {XKTModel} from \"./XKTModel/XKTModel.js\";\nimport {parseGLTFIntoXKTModel} from \"./parsers/parseGLTFIntoXKTModel.js\";\nimport {writeXKTModelToArrayBuffer} from \"./XKTModel/writeXKTModelToArrayBuffer.js\";\n\nimport {toArrayBuffer} from \"./XKTModel/lib/toArraybuffer\";\n\n/**\n * Converts model files into xeokit's native XKT format.\n *\n * Supported source formats are: IFC, CityJSON, glTF, LAZ and LAS.\n *\n * **Only bundled in xeokit-convert.cjs.js.**\n *\n * ## Usage\n *\n ````\n * @param {Object} params Conversion parameters.\n * @param {Object} params.WebIFC The WebIFC library. We pass this in as an external dependency, in order to give the\n * caller the choice of whether to use the Browser or NodeJS version.\n * @param {*} [params.configs] Configurations.\n * @param {ArrayBuffer|JSON} [params.sourceData] Source file data. Alternative to ````source````.\n * @param {Function} [params.outputXKTModel] Callback to collect the ````XKTModel```` that is internally build by this method.\n * @param {Function} [params.outputXKT] Callback to collect XKT file data.\n * @param {String[]} [params.includeTypes] Option to only convert objects of these types.\n * @param {String[]} [params.excludeTypes] Option to never convert objects of these types.\n * @param {Object} [stats] Collects conversion statistics. Statistics are attached to this object if provided.\n * @param {Function} [params.outputStats] Callback to collect statistics.\n * @param {Boolean} [params.rotateX=false] Whether to rotate the model 90 degrees about the X axis to make the Y axis \"up\", if necessary. Applies to CityJSON and LAS/LAZ models.\n * @param {Boolean} [params.reuseGeometries=true] When true, will enable geometry reuse within the XKT. When false,\n * will automatically \"expand\" all reused geometries into duplicate copies. This has the drawback of increasing the XKT\n * file size (~10-30% for typical models), but can make the model more responsive in the xeokit Viewer, especially if the model\n * has excessive geometry reuse. An example of excessive geometry reuse would be when a model (eg. glTF) has 4000 geometries that are\n * shared amongst 2000 objects, ie. a large number of geometries with a low amount of reuse, which can present a\n * pathological performance case for xeokit's underlying graphics APIs (WebGL, WebGPU etc).\n * @param {Boolean} [params.includeTextures=true] Whether to convert textures. Only works for ````glTF```` models.\n * @param {Boolean} [params.includeNormals=true] Whether to convert normals. When false, the parser will ignore\n * geometry normals, and the modelwill rely on the xeokit ````Viewer```` to automatically generate them. This has\n * the limitation that the normals will be face-aligned, and therefore the ````Viewer```` will only be able to render\n * a flat-shaded non-PBR representation of the model.\n * @param {Number} [params.minTileSize=200] Minimum RTC coordinate tile size. Set this to a value between 100 and 10000,\n * depending on how far from the coordinate origin the model's vertex positions are; specify larger tile sizes when close\n * to the origin, and smaller sizes when distant.  This compensates for decreasing precision as floats get bigger.\n * @param {Function} [params.log] Logging callback.\n * @return {Promise<number>}\n */\nfunction convert2xkt({\n                         configs = {},\n                         sourceData,\n                         modelAABB,\n                         outputXKTModel,\n                         outputXKT,\n                         includeTypes,\n                         excludeTypes,\n                         reuseGeometries = true,\n                         minTileSize = 200,\n                         stats = {},\n                         rotateX = false,\n                         includeTextures = true,\n                         includeNormals = true,\n                         log = function (msg) {\n                         }\n                     }) {\n\n    stats.schemaVersion = \"\";\n    stats.title = \"\";\n    stats.author = \"\";\n    stats.created = \"\";\n    stats.numMetaObjects = 0;\n    stats.numPropertySets = 0;\n    stats.numTriangles = 0;\n    stats.numVertices = 0;\n    stats.numNormals = 0;\n    stats.numUVs = 0;\n    stats.numTextures = 0;\n    stats.numTextureSets = 0;\n    stats.numObjects = 0;\n    stats.numGeometries = 0;\n    stats.sourceSize = 0;\n    stats.xktSize = 0;\n    stats.texturesSize = 0;\n    stats.xktVersion = \"\";\n    stats.compressionRatio = 0;\n    stats.conversionTime = 0;\n    stats.aabb = null;\n\n    return new Promise(function (resolve, reject) {\n        const _log = log;\n        log = (msg) => {\n            _log(`[convert2xkt] ${msg}`)\n        }\n\n        if (!sourceData) {\n            reject(\"Argument expected: source or sourceData\");\n            return;\n        }\n\n        if (!outputXKTModel && !outputXKT) {\n            reject(\"Argument expected: output, outputXKTModel or outputXKT\");\n            return;\n        }\n\n        const sourceConfigs = configs.sourceConfigs || {};\n        const ext = 'glb';\n\n        log(`Input file extension: \"${ext}\"`);\n\n        let fileTypeConfigs = sourceConfigs[ext];\n\n        if (!fileTypeConfigs) {\n            log(`[WARNING] Could not find configs sourceConfigs entry for source format \"${ext}\". This is derived from the source file name extension. Will use internal default configs.`);\n            fileTypeConfigs = {};\n        }\n\n        function overrideOption(option1, option2) {\n            if (option1 !== undefined) {\n                return option1;\n            }\n            return option2;\n        }\n\n\n        const sourceFileSizeBytes = sourceData.byteLength;\n\n        log(\"Input file size: \" + (sourceFileSizeBytes / 1000).toFixed(2) + \" kB\");\n\n\n\n        minTileSize = overrideOption(fileTypeConfigs.minTileSize, minTileSize);\n        rotateX = overrideOption(fileTypeConfigs.rotateX, rotateX);\n        reuseGeometries = overrideOption(fileTypeConfigs.reuseGeometries, reuseGeometries);\n        includeTextures = overrideOption(fileTypeConfigs.includeTextures, includeTextures);\n        includeNormals = overrideOption(fileTypeConfigs.includeNormals, includeNormals);\n        includeTypes = overrideOption(fileTypeConfigs.includeTypes, includeTypes);\n        excludeTypes = overrideOption(fileTypeConfigs.excludeTypes, excludeTypes);\n\n        if (reuseGeometries === false) {\n            log(\"Geometry reuse is disabled\");\n        }\n\n        const xktModel = new XKTModel({\n            minTileSize,\n            modelAABB\n        });\n\n\n\n        sourceData = toArrayBuffer(sourceData);\n        convert(parseGLTFIntoXKTModel, {\n            data: sourceData,\n            reuseGeometries,\n            includeTextures: true,\n            includeNormals,\n            xktModel,\n            stats,\n            log\n        });\n\n\n        function convert(parser, converterParams) {\n\n            parser(converterParams).then(() => {\n\n\n                log(\"Input file parsed OK. Building XKT document...\");\n\n                xktModel.finalize().then(() => {\n\n                    log(\"XKT document built OK. Writing to XKT file...\");\n\n                    const xktArrayBuffer = writeXKTModelToArrayBuffer(xktModel, null, stats, {zip: true});\n\n                    const xktContent = Buffer.from(xktArrayBuffer);\n\n\n                    if (outputXKT) {\n                        outputXKT(xktContent);\n                    }\n\n                    resolve();\n                });\n            }, (err) => {\n                reject(err);\n            });\n        }\n    });\n}\n\nexport {convert2xkt};","/**\n * @private\n * @param buf\n * @returns {ArrayBuffer}\n */\nexport function toArrayBuffer(buf) {\n    const ab = new ArrayBuffer(buf.length);\n    const view = new Uint8Array(ab);\n    for (let i = 0; i < buf.length; ++i) {\n        view[i] = buf[i];\n    }\n    return ab;\n}","import '@loaders.gl/polyfills';\nimport {installFilePolyfills} from '@loaders.gl/polyfills';\n\ninstallFilePolyfills();\n\nexport * from \"./src/index.js\";\nexport {convert2xkt} from \"./src/convert2xkt_browser.js\"; // convert2xkt is only bundled for Node.js\n"],"names":["root","factory","exports","module","define","amd","global","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","require","p","mat","mat2","mat3","xyz","tempVec3","vec","translate","scale","XKT_INFO","xktVersion","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","GIFMediaType","JPEGMediaType","PNGMediaType","FloatArrayType","Float64Array","tempMat1","tempMat2","tempVec4","math","MIN_DOUBLE","Number","MAX_SAFE_INTEGER","MAX_DOUBLE","DEGTORAD","RADTODEG","vec2","values","vec3","vec4","mat3ToMat4","mat4","arguments","length","undefined","mat4ToMat3","createUUID","lut","i","toString","d0","Math","random","d1","d2","d3","concat","clamp","min","max","fmod","a","b","console","error","negateVec4","v","dest","addVec4","u","addVec4Scalar","s","addVec3","addVec3Scalar","subVec4","subVec3","subVec2","subVec4Scalar","subScalarVec4","mulVec4","mulVec4Scalar","mulVec3Scalar","mulVec2Scalar","divVec3","divVec4","divScalarVec3","divVec3Scalar","divVec4Scalar","divScalarVec4","dotVec4","cross3Vec4","u0","u1","u2","v0","v1","v2","cross3Vec3","x","y","z","x2","y2","z2","sqLenVec4","lenVec4","sqrt","dotVec3","dotVec2","sqLenVec3","sqLenVec2","lenVec3","distVec3","w","lenVec2","distVec2","rcpVec3","normalizeVec4","f","normalizeVec3","normalizeVec2","angleVec3","theta","acos","vec3FromMat4Scale","m","vecToArray","trunc","round","len","Array","slice","xyzArrayToObject","arr","xyzObjectToArray","arry","dupMat4","mat4To3","m4s","setMat4ToZeroes","setMat4ToOnes","diagonalMat4v","diagonalMat4c","diagonalMat4s","identityMat4","identityMat3","isIdentityMat4","negateMat4","addMat4","addMat4Scalar","addScalarMat4","subMat4","subMat4Scalar","subScalarMat4","mulMat4","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","mulMat3","mulMat4Scalar","mulMat4v4","v3","transposeMat4","m4","m14","m8","m13","m12","m9","transposeMat3","determinantMat4","inverseMat4","b04","b05","b06","b07","b08","b09","invDet","traceMat4","translationMat4v","translationMat3v","translationMat4c","translationMat4s","translateMat4v","translateMat4c","OLDtranslateMat4c","m15","m3","m7","m11","rotationMat4v","anglerad","axis","xy","yz","zx","xs","ys","zs","ax","sin","c","cos","q","rotationMat4c","scalingMat4v","scalingMat3v","scalingMat4c","scaleMat4c","scaleMat4v","scalingMat4s","rotationTranslationMat4","xx","xz","yy","zz","wx","wy","wz","mat4ToEuler","order","m21","m22","m23","m31","m32","m33","asin","abs","atan2","composeMat4","position","quaternion","quaternionToRotationMat4","decomposeMat4","matrix","sx","sy","sz","set","invSX","invSY","invSZ","mat4ToQuaternion","this","lookAtMat4v","pos","target","up","z0","z1","x0","x1","y0","y1","posx","posy","posz","upx","upy","upz","targetx","targety","targetz","lookAtMat4c","orthoMat4c","left","right","bottom","top","near","far","rl","tb","fn","frustumMat4v","fmin","fmax","fmin4","fmax4","t","tempMat20","tempMat21","tempMat22","frustumMat4","perspectiveMat4","fovyrad","aspectratio","znear","zfar","pmin","pmax","tan","transformPoint3","transformPoint4","transformPoints3","points","points2","p0","p1","p2","pi","r","result","m0","m1","m2","m5","m6","m10","transformPositions3","transformPositions4","transformVec3","transformVec4","rotateVec3X","rotateVec3Y","rotateVec3Z","projectVec4","unprojectVec3","viewMat","projMat","lerpVec3","t1","t2","flatten","leni","j","lenj","item","push","identityQuaternion","eulerToQuaternion","euler","c1","c2","c3","s1","s2","s3","trace","vec3PairToQuaternion","norm_u_norm_v","real_part","normalizeQuaternion","angleAxisToQuaternion","angleAxis","halfAngle","fsin","quaternionToEuler","mulQuaternions","p3","q0","q1","q2","q3","vec3ApplyQuaternion","qx","qy","qz","qw","ix","iy","iz","iw","quaternionToMat4","tx","ty","tz","twx","twy","twz","txx","txy","txz","tyy","tyz","tzz","conjugateQuaternion","inverseQuaternion","quaternionToAngleAxis","angle","AABB3","AABB2","OBB3","OBB2","Sphere3","transformOBB3","containsAABB3","aabb1","aabb2","getAABB3Diag","aabb","getAABB3DiagPoint","diagVec","xneg","xpos","yneg","ypos","zneg","zpos","getAABB3Center","getAABB2Center","collapseAABB3","AABB3ToOBB3","obb","positions3ToAABB3","positions","positionsDecodeMatrix","xmin","ymin","zmin","xmax","ymax","zmax","decompressPosition","OBB3ToAABB3","points3ToAABB3","points3ToSphere3","sphere","numPoints","dist","radius","positions3ToSphere3","tempVec3a","tempVec3b","lenPositions","numPositions","OBB3ToSphere3","point","lenPoints","getSphere3Center","expandAABB3","expandAABB3Point3","triangleNormal","normal","p1x","p1y","p1z","p2x","p2y","p2z","p3x","p3y","p3z","mag","octEncodeVec3","array","xfunc","yfunc","tempx","tempy","Int8Array","octDecodeVec2","oct","dot","uniquePositions","indicesLookup","indicesReverseLookup","weldedIndices","faces","numFaces","compa","compb","compc","cb","ab","cross","inverseNormal","geometryCompression","quantizePositions","quantizedPositions","maxInt","xMultiplier","yMultiplier","zMultiplier","verify","num","floor","compressPosition","multiplier","Float32Array","createPositionsDecodeMatrix","xwid","ywid","zwid","transformAndOctEncodeNormals","modelNormalMatrix","normals","lenNormals","compressedNormals","lenCompressedNormals","best","currentCos","bestCos","localNormal","worldNormal","octEncodeNormals","buildEdgeIndices","Uint16Array","indices","edgeThreshold","vx","vy","vz","positionsMap","precision","pow","lenUniquePositions","weldVertices","numIndices","ia","ib","ic","face","buildFaces","edge1","edge2","index1","index2","edge","normal1","normal2","edgeIndices","thresholdDot","edges","largeIndex","faceIndex","face1","face2","dot2","Uint32Array","isTriangleMeshSolid","vertexIndexMapping","compareIndexPositions","posA","posB","newIndices","sort","uniqueVertexIndex","a2","b2","temp","compareEdges","e1","e2","sameEdgeCount","XKTMesh","_createClass","cfg","_classCallCheck","meshId","meshIndex","geometry","color","metallic","roughness","opacity","textureSet","entity","XKTGeometry","geometryId","primitiveType","geometryIndex","numInstances","positionsQuantized","normalsOctEncoded","colorsCompressed","uvs","uvsCompressed","solid","XKTEntity","entityId","meshes","entityIndex","hasReusedGeometries","XKTTile","entities","KDNode","XKTMetaObject","metaObjectId","propertySetIds","metaObjectType","metaObjectName","parentMetaObjectId","XKTPropertySet","propertySetId","propertySetType","propertySetName","properties","XKTTexture","textureId","textureIndex","imageData","channel","width","height","src","compressed","mediaType","minFilter","magFilter","wrapS","wrapT","wrapR","XKTTextureSet","textureSetId","textureSetIndex","materialType","materialIndex","colorTexture","metallicRoughnessTexture","normalsTexture","emissiveTexture","occlusionTexture","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","arg","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","_typeof","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","Error","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_defineProperties","props","descriptor","input","hint","prim","toPrimitive","res","String","_toPrimitive","tempVec4a","tempVec4b","tempMat4","tempMat4b","kdTreeDimLength","TEXTURE_ENCODING_OPTIONS","useSRGB","qualityLevel","encodeUASTC","mipmaps","XKTModel","instance","Constructor","modelId","projectId","revisionId","author","createdAt","creatingApplication","schema","minTileSize","modelAABB","propertySets","propertySetsList","metaObjects","metaObjectsList","reusedGeometriesDecodeMatrix","geometries","geometriesList","textures","texturesList","textureSets","textureSetsList","meshesList","entitiesList","tilesList","finalized","protoProps","_finalize","params","propertySet","metaObject","_rootMetaObject","fileExt","split","texture","colorTextureId","metallicRoughnessTextureId","normalsTextureId","emissiveTextureId","occlusionTextureId","triangles","lines","line_strip","line_loop","_createDefaultIndices","colors","xktGeometryCfg","uv","Uint8Array","mergedPositions","mergedIndices","mergeVertices","rotation","mesh","meshIds","meshIdIdx","meshIdLen","warn","createMetaObject","_callee","rootKDNode","_context","log","_removeUnusedTextures","_compressTextures","_bakeSingleUseGeometryPositions","_bakeAndOctEncodeNormals","_createEntityAABBs","_createKDTree","_createTilesFromKDTree","_createReusedGeometriesDecodeMatrix","_flagSolidGeometries","args","apply","_this","countTextures","_loop","encodingOptions","load","ImageLoader","image","encode","KTX2BasisWriter","encodedData","encodedImageData","entityAABB","_insertEntityIntoKDTree","kdNode","nodeAABB","dim","aabbLeft","aabbRight","_createTilesFromKDNode","_createTileFromEntities","tileAABB","tileCenter","tileCenterNeg","rtcAABB","reused","k","lenk","tile","reusedGeometriesAABB","countReusedGeometries","numGeometries","maxNumPositions","maxNumIndices","XKT_VERSION","NUM_TEXTURE_ATTRIBUTES","NUM_MATERIAL_ATTRIBUTES","writeXKTModelToArrayBuffer","xktModel","metaModelJSON","stats","options","data","metaModelDataStr","numPropertySets","numMetaObjects","numTextures","numTextureSets","numMeshes","numEntities","numTiles","lenColors","lenUVs","lenIndices","lenEdgeIndices","lenMatrices","lenTextures","xktTexture","byteLength","numCompressedTextures","metadata","textureData","eachTextureDataPortion","eachTextureAttributes","eachTextureSetTextures","Int32Array","matrices","eachGeometryPrimitiveType","eachGeometryPositionsPortion","eachGeometryNormalsPortion","eachGeometryColorsPortion","eachGeometryUVsPortion","eachGeometryIndicesPortion","eachGeometryEdgeIndicesPortion","eachMeshGeometriesPortion","eachMeshMatricesPortion","eachMeshTextureSet","eachMeshMaterialAttributes","eachEntityId","eachEntityMeshesPortion","eachTileAABB","eachTileEntitiesPortion","countPositions","countNormals","countColors","countUVs","countIndices","countEdgeIndices","id","propertySetsIndex","propertySetJSON","metaObjectsIndex","metaObjectJSON","parent","external","portionIdx","textureAttrIdx","eachTextureSetTexturesIndex","countEntityMeshesPortion","eachMeshMaterialAttributesIndex","matricesIndex","tileIndex","tileEntities","numTileEntities","entityMeshes","numEntityMeshes","tileAABBIndex","getModelData","deflatedData","deflate","buffer","zip","pako","deflateJSON","JSON","stringify","replace","chr","charCodeAt","substr","deflateData","texturesSize","arrayBuffer","elements","indexData","dataLen","elementsize","indexBuf","dataArray","offset","element","toArrayBuffer","createArrayBuffer","strings","earcut","holeIndices","minX","minY","maxX","maxY","invSize","hasHoles","outerLen","outerNode","linkedList","list","queue","steiner","getLeftmost","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","start","end","clockwise","last","signedArea","insertNode","equals","removeNode","again","area","ear","pass","zOrder","prevZ","nextZ","e","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","maxZ","n","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","mx","my","tanMin","Infinity","sectorContainsSector","findHoleBridge","leftmost","ay","bx","by","cx","cy","px","py","intersectsPolygon","inside","middleInside","o1","sign","o2","o3","o4","onSegment","Node","an","bp","sum","deviation","polygonArea","trianglesArea","vertices","holes","dimensions","holeIndex","d","tempVec2a","tempVec3c","parseCityJSONIntoXKTModel","_ref","_ref$center","center","_ref$transform","transform","_ref$stats","vertices2","copyVertices","cityJSONTransform","vertex","transformVertices","centerVertices","customTransformVertices","sourceFormat","schemaVersion","version","title","created","numTriangles","numVertices","numObjects","rootMetaObjectId","modelMetaObjectId","ctx","msg","nextId","cityObjects","CityObjects","objectId","parseCityObject","parseCityJSON","centerPos","cityObject","parents","objectMaterial","surfaceMaterials","appearance","materials","geometryMaterial","material","themeIds","theme","surfaceMaterial","parseGeometrySurfacesWithOwnMaterials","parseGeometrySurfacesWithSharedMaterial","createEntity","parseSurfacesWithOwnMaterials","boundaries","shells","solids","surfaces","surface","diffuseColor","transparency","sharedIndices","geometryCfg","newFace","extractLocalIndices","_toConsumableArray","pList","getNormalOfPositions","pv","to2D","unshift","tr","createGeometry","createMesh","parseSurfacesWithSharedMaterial","primitiveCfg","boundary","newBoundary","index","includes","vertexIndex","indexOf","nexti","_p","_n","re","x3","tmp2","y3","utils","isString","parseGLTFIntoXKTModel","baseUri","metaModelData","_ref$includeTextures","includeTextures","_ref$includeNormals","includeNormals","getAttachment","numNormals","numUVs","parse","GLTFLoader","gltfData","metaModelCorrections","geometryCreated","parseTexture","parseTextures","_textureSetId","parseTextureSet","_attributes","parseMaterialAttributes","parseMaterials","scene","scenes","nodes","countMeshUsage","parseNode","parseScene","parseDefaultScene","errMsg","source","sampler","createTexture","flipY","_textureId","textureSetCfg","normalTexture","normalTextureId","metallicPBR","pbrMetallicRoughness","baseColorTexture","extensions","specularPBR","specularTexture","specularColorTexture","createTextureSet","materialAttributes","diffuseFactor","common","technique","blinn","phong","lambert","diffuse","transparent","baseColorFactor","metallicFactor","roughnessFactor","node","instances","children","childNode","objectIdStack","meshIdsStack","depth","localMatrix","translation","xktEntityId","numPrimitives","primitives","primitive","_xktGeometryId","xktGeometryId","mode","attributes","POSITION","NORMAL","COLOR_0","TEXCOORD_0","xktMeshId","meshCfg","nodeName","entityMeshIds","atob2","atob","Buffer","from","WEBGL_COMPONENT_TYPES","Int16Array","WEBGL_TYPE_SIZES","parseGLTFJSONIntoXKTModel","reuseGeometries","gltf","getMetaModelCorrections","createXKTGeometryIds","nextMeshId","buffers","all","map","bufferInfo","_arrayBuffer","_buffer","uri","dataUriRegexResult","match","isBase64","decodeURIComponent","ArrayBuffer","view","parseArrayBuffer","parseBuffer","parseBuffers","bufferViewsInfo","bufferViews","parseBufferView","parseBufferViews","freeBuffers","materialsInfo","materialInfo","parseMaterial","_materialData","defaultSceneInfo","sceneInfo","glTFNode","eachRootStats","eachChildRoot","metaObjectsMap","metaObjectParent","rootMetaObject","numChildren","countChildren","bufferViewInfo","_typedArray","byteOffset","deferredMeshIds","gltfMeshId","meshInfo","numPrimitivesInMesh","primitiveInfo","geometryHash","createPrimitiveGeometryHash","geometryArrays","parsePrimitiveGeometry","childNodeIdx","childGLTFNode","rootMetaObjectStats","join","accessors","indicesIndex","accessorInfo","parseAccessorTypedArray","positionsIndex","normalsIndex","colorsIndex","bufferView","itemSize","TypedArray","componentType","itemBytes","BYTES_PER_ELEMENT","byteStride","count","parseIFCIntoXKTModel","WebIFC","_ref$autoNormals","autoNormals","includeTypes","excludeTypes","wasmPath","ifcAPI","IfcAPI","SetWasmPath","Init","modelID","OpenModel","ifcProjectId","GetLineIDsWithType","IFCPROJECT","GetLine","ifcProject","parseSpatialChildren","parseMetadata","flatMeshes","LoadAllGeometry","size","createObject","IFCSPACE","ifcSpaceId","flatMesh","GetFlatMesh","parseGeometry","IFCRELDEFINESBYPROPERTIES","relID","rel","relatingPropertyDefinition","RelatingPropertyDefinition","GlobalId","relatedObjects","RelatedObjects","HasProperties","Name","nominalValue","NominalValue","property","valueType","Description","description","createPropertySet","parsePropertySets","ifcElement","parseRelatedItemsOfType","expressID","IFCRELAGGREGATES","IFCRELCONTAINEDINSPATIALSTRUCTURE","relation","related","relatedItems","isArray","element2","flatMeshExpressID","placedGeometries","placedGeometry","geometryExpressID","GetGeometry","vertexData","GetVertexArray","GetVertexData","GetVertexDataSize","GetIndexArray","GetIndexData","GetIndexDataSize","flatTransformation","MAX_VERTICES","parseLASIntoXKTModel","_ref$colorDepth","colorDepth","_ref$fp","fp64","_ref$skip","skip","_ref$log","LASLoader","las","parsedData","loaderData","pointsFormatId","readAttributes","intensity","readIntensities","readColorsAndIntensities","pointsChunks","chunkArray","positionsValue","readPositions","colorsChunks","attributesPosition","attributesColor","attributesIntensity","colorSize","intensities","colorsCompressedSize","l","chunkSize","parseMetaModelIntoXKTModel","includeTypesMap","excludeTypesMap","newObject","countMetaObjects","parsePCDIntoXKTModel","_ref$littleEndian","littleEndian","textData","TextDecoder","decode","il","fromCharCode","escape","decodeText","header","result1","search","result2","exec","headerLen","str","fields","viewpoint","parseFloat","parseInt","sizeSum","rowSize","parseHeader","line","rgb","g","sizes","compressedSize","decompressedSize","decompressed","inData","outLength","ctrl","ref","inLength","outData","inPtr","outPtr","decompressLZF","dataview","DataView","getFloat32","getUint8","row","parsePLYIntoXKTModel","_x","_parsePLYIntoXKTModel","hasColors","colorsValue","PLYLoader","t0","parseSTLIntoXKTModel","_parseSTLIntoXKTModel","splitMeshes","smoothNormals","smoothNormalsAngleThreshold","binData","ensureBinary","isBinary","parseBinary","parseASCII","reader","getUint32","defaultR","defaultG","defaultB","lastR","lastG","lastB","newMesh","normalX","normalY","normalZ","packedColor","getUint16","vertexstart","addMesh","normalx","normaly","normalz","verticesPerFace","normalsPerFace","text","faceRegex","faceCounter","floatRegex","vertexRegex","RegExp","normalRegex","nextGeometryId","ni","acc","posi","vertexMap","vertexNormals","vertexNormalAccum","numVerts","ii","jj","faceToVertexNormals","buildBoxGeometry","xSize","ySize","zSize","centerX","centerY","centerZ","buildBoxLinesGeometry","buildCylinderGeometry","radiusTop","radiusBottom","radialSegments","heightSegments","h","currentRadius","currentHeight","first","second","startIndex","tu","tv","openEnded","heightHalf","heightLength","radialAngle","PI","radialLength","radiusChange","atan","buildGridGeometry","divisions","step","halfSize","buildPlaneGeometry","xSegments","zSegments","halfWidth","halfHeight","planeX","planeZ","planeX1","planeZ1","segmentWidth","segmentHeight","offset2","buildSphereGeometry","lod","widthSegments","sinTheta","cosTheta","phi","sinPhi","buildTorusGeometry","tube","tubeSegments","arc","letters","buildVectorTextGeometry","penUp","pointsLen","origin","xOrigin","yOrigin","zOrigin","trim","countVerts","iLine","convert2xkt","_ref$configs","configs","sourceData","outputXKTModel","outputXKT","_ref$reuseGeometries","_ref$minTileSize","_ref$rotateX","rotateX","sourceSize","xktSize","compressionRatio","conversionTime","_log","sourceConfigs","ext","fileTypeConfigs","sourceFileSizeBytes","toFixed","overrideOption","buf","finalize","xktArrayBuffer","xktContent","option1","option2","installFilePolyfills"],"sourceRoot":""}